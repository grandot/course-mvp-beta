# QA Orchestrator - æ™ºèƒ½æ¸¬è©¦ç·¨æ’ç³»çµ±

QA Orchestrator æ˜¯ Phase 1 çš„æ ¸å¿ƒå¯¦ç¾ï¼Œæä¾›çµ±ä¸€çš„æ¸¬è©¦æ¥å£å’Œä¾è³´è‡ªå‹•åŒ–åŠŸèƒ½ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. çµ±ä¸€æ¸¬è©¦æ¥å£
- æ•´åˆæœ¬æ©Ÿæ¸¬è©¦ (`test-local-environment.js`)
- æ•´åˆç·šä¸Šæ¸¬è©¦ (`test-real-environment.js`)  
- æ”¯æ´é›™æ¨¡å¼å°æ¯”æ¸¬è©¦
- è‡ªå‹•ç”Ÿæˆçµæœæ¯”è¼ƒå ±å‘Š

### 2. ä¾è³´è‡ªå‹•åŒ–
- è‡ªå‹•è§£æ `comprehensive-test-plan.md`
- æ™ºèƒ½æå–æ¸¬è©¦å¯¦é«” (å­¸ç”Ÿã€èª²ç¨‹)
- è‡ªå‹•æ§‹å»ºä¾è³´é—œä¿‚åœ–
- ç”Ÿæˆ `test-dependencies.yaml` é…ç½®

### 3. æ™ºèƒ½åˆ†æ & è‡ªå‹•ä¿®å¾© ğŸ”§
- Markdown çµæ§‹è§£æ
- å¯¦é«”è­˜åˆ¥èˆ‡ä¿¡å¿ƒåº¦è©•ä¼°
- å¾ªç’°ä¾è³´æª¢æ¸¬
- æ¸¬è©¦å®Œæ•´æ€§é©—è­‰
- **ğŸ†• è‡ªå‹•ä¿®å¾©ä¾è³´é—œä¿‚å•é¡Œ**
- **ğŸ†• æ™ºèƒ½æ¨æ–·å­¤ç«‹æ¸¬è©¦ä½œç”¨**
- **ğŸ†• è‡ªå‹•ç”Ÿæˆç¼ºå¤±çš„å‰µå»ºè€…**

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å®‰è£ä¾è³´
```bash
# ç¢ºä¿å·²å®‰è£æ‰€æœ‰ä¾è³´
npm install
```

### åŸºæœ¬ä½¿ç”¨
```bash
# å®Œæ•´ QA æµç¨‹ (æ¨è–¦)
npm run qa:full

# ğŸ”§ è‡ªå‹•ä¿®å¾©ä¾è³´é—œä¿‚ (æ–°åŠŸèƒ½!)
npm run qa:fix

# å¿«é€Ÿé©—è­‰ä¾è³´é—œä¿‚ (å«è‡ªå‹•ä¿®å¾©)
npm run qa:validate

# åƒ…ç”Ÿæˆä¾è³´é…ç½®
npm run qa:config

# åŸ·è¡Œæ¸¬è©¦ (é›™æ¨¡å¼)
npm run qa:test

# åƒ…æœ¬æ©Ÿæ¸¬è©¦
npm run qa:test:local

# åƒ…ç·šä¸Šæ¸¬è©¦  
npm run qa:test:real
```

### å‘½ä»¤åˆ—ä½¿ç”¨
```bash
# é¡¯ç¤ºå¹«åŠ©
node tools/qa-orchestrator.js --help

# è‡ªè¨‚æ¸¬è©¦è¨ˆåŠƒæ–‡ä»¶
node tools/qa-orchestrator.js full --test-plan ./custom-test-plan.md

# è‡ªè¨‚é…ç½®è¼¸å‡ºè·¯å¾‘
node tools/qa-orchestrator.js config --config ./custom-dependencies.yaml

# ğŸ”§ è‡ªå‹•ä¿®å¾©å°ˆç”¨å‘½ä»¤
node tools/qa-orchestrator.js fix
```

### âš¡ å¿«é€Ÿç¤ºä¾‹
```bash
# 1ï¸âƒ£ æª¢æ¸¬å•é¡Œ
$ npm run qa:validate
âŒ é©—è­‰å¤±æ•—ï¼Œç™¼ç¾ä¾è³´å•é¡Œ
   - å¯¦é«” basic_courses è¢«ä½¿ç”¨ä½†æ²’æœ‰å‰µå»ºè€…

# 2ï¸âƒ£ è‡ªå‹•ä¿®å¾©  
$ npm run qa:fix
ğŸ”§ è‡ªå‹•ä¿®å¾©å®Œæˆ:
   âœ… ä¿®å¾©äº† 1 å€‹å•é¡Œ
   - å°‡å¯¦é«” basic_courses æ·»åŠ åˆ°ç¾æœ‰å‰µå»ºè€… A1.1-A

# 3ï¸âƒ£ ç¢ºèªä¿®å¾©
$ npm run qa:validate  
âœ… é©—è­‰é€šéï¼ä¾è³´é—œä¿‚æ­£ç¢º
```

## ğŸ“ ç³»çµ±æ¶æ§‹

```
qa-system/
â”œâ”€â”€ core/                          # æ ¸å¿ƒçµ„ä»¶
â”‚   â”œâ”€â”€ UnifiedTestRunner.js       # çµ±ä¸€æ¸¬è©¦åŸ·è¡Œå™¨
â”‚   â”œâ”€â”€ MarkdownParser.js          # Markdown è§£æå™¨
â”‚   â”œâ”€â”€ EntityExtractor.js         # å¯¦é«”æå–å™¨
â”‚   â””â”€â”€ DependencyResolver.js      # ä¾è³´è§£æå™¨
â”‚
â”œâ”€â”€ config/                        # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ inference-rules.yaml       # æ¨ç†è¦å‰‡
â”‚   â””â”€â”€ test-modes.yaml           # æ¸¬è©¦æ¨¡å¼é…ç½®
â”‚
â”œâ”€â”€ QAOrchestrator.js              # ä¸»è¦ç·¨æ’å™¨
â””â”€â”€ README.md                      # èªªæ˜æ–‡ä»¶
```

## âš™ï¸ é…ç½®èªªæ˜

### æ¨ç†è¦å‰‡ (`config/inference-rules.yaml`)
å®šç¾©å¯¦é«”è­˜åˆ¥ã€å‹•ä½œæ¨å°ã€å‘½åè¦ç¯„ç­‰è¦å‰‡ï¼š
```yaml
action_rules:
  creates:
    keywords: ['æ–°å¢', 'å‰µå»º', 'å»ºç«‹', 'å®‰æ’']
    confidence: 0.9

entity_patterns:
  students:
    patterns:
      - pattern: 'æ¸¬è©¦(\w+)(?=çš„|æ¯|è¦)'
        confidence: 0.9
```

### æ¸¬è©¦æ¨¡å¼ (`config/test-modes.yaml`)
é…ç½®ä¸åŒæ¸¬è©¦æ¨¡å¼çš„è¡Œç‚ºï¼š
```yaml
test_modes:
  local:
    name: "æœ¬æ©Ÿé‚è¼¯æ¸¬è©¦"
    delay_between_tests: 500
    timeout: 30000
    
  real:
    name: "çœŸå¯¦ç’°å¢ƒæ¸¬è©¦" 
    delay_between_tests: 3000
    timeout: 60000
```

## ğŸ” ä½¿ç”¨æµç¨‹

### 1. è§£ææ¸¬è©¦è¨ˆåŠƒ
ç³»çµ±è‡ªå‹•è§£æ `QA/comprehensive-test-plan.md`ï¼Œæå–ï¼š
- æ¸¬è©¦æ¡ˆä¾‹ ID å’Œåç¨±
- æ¸¬è©¦è¼¸å…¥å’Œé æœŸè¼¸å‡º  
- æ¸¬è©¦ç›®çš„å’Œåˆ†çµ„
- æ˜ç¢ºæ¨™è¨» (`<!-- @creates: ... -->`)

### 2. å¯¦é«”æå–
å°æ¯å€‹æ¸¬è©¦æ¡ˆä¾‹é€²è¡Œï¼š
- å­¸ç”Ÿå¯¦é«”è­˜åˆ¥ (`æ¸¬è©¦å°æ˜` â†’ `test_student_xiaoming`)
- èª²ç¨‹å¯¦é«”è­˜åˆ¥ (`æ¸¬è©¦æ•¸å­¸èª²` â†’ `test_course_math`)
- å‹•ä½œè­˜åˆ¥ (`æ–°å¢` â†’ `creates`)
- ä¿¡å¿ƒåº¦è©•ä¼°

### 3. ä¾è³´è§£æ & è‡ªå‹•ä¿®å¾© ğŸ”§
æ ¹æ“šæ¸¬è©¦åˆ†çµ„å’Œå¯¦é«”é—œä¿‚ï¼š
- Group A: å‰µå»ºåŸºç¤å¯¦é«”
- Group B: ä½¿ç”¨ A å‰µå»ºçš„å¯¦é«”
- Group C: ä¿®æ”¹ B çš„çµæœ
- æª¢æ¸¬å¾ªç’°ä¾è³´å’Œå®Œæ•´æ€§
- **ğŸ†• è‡ªå‹•ä¿®å¾©ç¼ºå¤±çš„å‰µå»ºè€…**
- **ğŸ†• æ™ºèƒ½æ¨æ–·å­¤ç«‹æ¸¬è©¦**
- **ğŸ†• è‡ªå‹•ç”Ÿæˆä¿®å¾©å»ºè­°**

### 4. åŸ·è¡Œæ¸¬è©¦
æ”¯æ´ä¸‰ç¨®æ¨¡å¼ï¼š
- **æœ¬æ©Ÿæ¨¡å¼**: å¿«é€Ÿé‚è¼¯æ¸¬è©¦
- **ç·šä¸Šæ¨¡å¼**: å®Œæ•´ç’°å¢ƒæ¸¬è©¦
- **é›™æ¨¡å¼**: å°æ¯”æ¸¬è©¦çµæœ

## ğŸ“Š è¼¸å‡ºçµæœ

### ä¾è³´é…ç½®æ–‡ä»¶
è‡ªå‹•ç”Ÿæˆ `QA/config/test-dependencies-auto.yaml`ï¼š
```yaml
phases:
  group_a:
    name: "ç¨ç«‹åŠŸèƒ½æ¸¬è©¦"
    provides: ["basic_students", "basic_courses"]
    
test_groups:
  A1.1-A:
    phase: "group_a"
    creates: ["test_student_xiaoming", "test_course_math"]
    
data_entities:
  test_student_xiaoming:
    type: "student"
    created_by: ["A1.1-A"]
    used_by: ["B1.1-A", "C1.1-A"]
```

### æ¸¬è©¦å ±å‘Š
ç”Ÿæˆè©³ç´°çš„ JSON å ±å‘Šï¼š
```json
{
  "timestamp": "2024-XX-XX",
  "mode": "both",
  "summary": {
    "totalTests": 45,
    "totalEntities": 23
  },
  "testResults": {
    "local": { "passed": 42, "failed": 3 },
    "real": { "passed": 40, "failed": 5 },
    "comparison": { "consistency": 87 }
  }
}
```

## ğŸ› ï¸ é–‹ç™¼æŒ‡å—

### æ“´å±•å¯¦é«”é¡å‹
ä¿®æ”¹ `core/EntityExtractor.js`ï¼š
```javascript
this.entityPatterns = {
  // æ–°å¢å¯¦é«”é¡å‹
  teachers: [
    /æ•™å¸«(\w+)/g,
    /(è€å¸«\w+)/g
  ]
};
```

### è‡ªè¨‚æ¨ç†è¦å‰‡
ç·¨è¼¯ `config/inference-rules.yaml`ï¼š
```yaml
action_rules:
  # æ–°å¢å‹•ä½œé¡å‹
  schedules:
    keywords: ['æ’èª²', 'å®‰æ’æ™‚é–“']
    confidence: 0.8
```

### æ•´åˆæ–°æ¸¬è©¦å·¥å…·
ä¿®æ”¹ `core/UnifiedTestRunner.js`ï¼š
```javascript
// æ–°å¢æ¸¬è©¦åŸ·è¡Œå™¨
this.customRunner = new CustomTestRunner();
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

**1. æ‰¾ä¸åˆ°æ¸¬è©¦è¨ˆåŠƒæ–‡ä»¶**
```bash
Error: ENOENT: no such file or directory 'comprehensive-test-plan.md'
```
è§£æ±º: ç¢ºèªæ–‡ä»¶è·¯å¾‘æˆ–ä½¿ç”¨ `--test-plan` åƒæ•¸æŒ‡å®š

**2. å¯¦é«”æå–ä¿¡å¿ƒåº¦éä½**
```bash
Warning: å¯¦é«”æå–ä¿¡å¿ƒåº¦éä½: 0.3
```
è§£æ±º: åœ¨æ¸¬è©¦æ¡ˆä¾‹ä¸­æ·»åŠ æ˜ç¢ºæ¨™è¨»æˆ–æ”¹é€²æ¸¬è©¦è¼¸å…¥æ ¼å¼

**3. ä¾è³´å¾ªç’°æª¢æ¸¬**
```bash
Error: ç™¼ç¾å¾ªç’°ä¾è³´: A1 -> B1 -> A1
```
è§£æ±º: æª¢æŸ¥æ¸¬è©¦åˆ†çµ„å’Œå¯¦é«”å‰µå»ºé‚è¼¯

### èª¿è©¦æ¨¡å¼
```bash
# é–‹å•Ÿè©³ç´°æ—¥èªŒ
NODE_ENV=development npm run qa:full

# åƒ…é©—è­‰ä¸åŸ·è¡Œ
npm run qa:validate
```

## ğŸ”§ è‡ªå‹•ä¿®å¾©åŠŸèƒ½

### æ™ºèƒ½æª¢æ¸¬èƒ½åŠ›
- **ç¼ºå¤±å‰µå»ºè€…**: è­˜åˆ¥è¢«ä½¿ç”¨ä½†æœªå®šç¾©çš„å¯¦é«”
- **å­¤ç«‹æ¸¬è©¦**: ç™¼ç¾æ²’æœ‰ä¾è³´é—œä¿‚çš„æ¸¬è©¦æ¡ˆä¾‹  
- **å¾ªç’°ä¾è³´**: æª¢æ¸¬æ¸¬è©¦é–“çš„å¾ªç’°å¼•ç”¨
- **è·¨éšæ®µä¾è³´**: ç¢ºä¿ä¾è³´é †åºç¬¦åˆé‚è¼¯

### è‡ªå‹•ä¿®å¾©ç­–ç•¥
- **å¯¦é«”ä¿®å¾©**: è‡ªå‹•ç‚ºç¼ºå¤±å¯¦é«”æ‰¾åˆ°æˆ–å‰µå»ºåˆé©çš„å‰µå»ºè€…
- **æ¸¬è©¦æ¨æ–·**: æ ¹æ“šå…§å®¹æ¨æ–·å­¤ç«‹æ¸¬è©¦çš„å¯¦éš›ä½œç”¨
- **ä¾è³´é‡æ§‹**: è‡ªå‹•èª¿æ•´æ¸¬è©¦ä¾è³´é—œä¿‚
- **é…ç½®ç”Ÿæˆ**: ç”Ÿæˆä¿®å¾©å¾Œçš„å®Œæ•´é…ç½®æ–‡ä»¶

### ä½¿ç”¨ç¯„ä¾‹
```bash
# æª¢æ¸¬åˆ°å•é¡Œ: å¯¦é«” basic_courses è¢«ä½¿ç”¨ä½†æ²’æœ‰å‰µå»ºè€…
npm run qa:validate

# è‡ªå‹•ä¿®å¾©
ğŸ”§ é–‹å§‹è‡ªå‹•ä¿®å¾©ä¾è³´é—œä¿‚å•é¡Œ...
   âœ… ä¿®å¾©äº† 1 å€‹å•é¡Œ
   - å°‡å¯¦é«” basic_courses æ·»åŠ åˆ°ç¾æœ‰å‰µå»ºè€… A1.1-A
   ğŸ“Š å•é¡Œæ•¸é‡: 1 â†’ 0

# é©—è­‰ä¿®å¾©çµæœ
âœ… é©—è­‰é€šéï¼ä¾è³´é—œä¿‚æ­£ç¢º
```

## ğŸ“ˆ æ•ˆèƒ½æŒ‡æ¨™

- **è§£æé€Ÿåº¦**: ~100 æ¸¬è©¦æ¡ˆä¾‹/ç§’
- **æœ¬æ©Ÿæ¸¬è©¦**: ~2 æ¸¬è©¦/ç§’  
- **ç·šä¸Šæ¸¬è©¦**: ~1 æ¸¬è©¦/5ç§’ (å«å»¶é²)
- **è¨˜æ†¶é«”ä½¿ç”¨**: <100MB
- **ä¾è³´åˆ†æ**: <5ç§’
- **ğŸ†• è‡ªå‹•ä¿®å¾©**: <3ç§’

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°

### v1.0.0 (Phase 1) - å·²å®Œæˆ âœ…
- âœ… çµ±ä¸€æ¸¬è©¦æ¥å£
- âœ… ä¾è³´è‡ªå‹•åŒ–
- âœ… Markdown è§£æ
- âœ… å¯¦é«”æå–
- âœ… å¾ªç’°ä¾è³´æª¢æ¸¬
- âœ… **è‡ªå‹•ä¿®å¾©ä¾è³´é—œä¿‚å•é¡Œ**
- âœ… **æ™ºèƒ½æ¨æ–·æ¸¬è©¦ä½œç”¨**
- âœ… **Single Source of Truth**

### è¨ˆåŠƒä¸­ (Phase 2)
- ğŸ”„ Agent è¼”åŠ©ç”Ÿæˆ
- ğŸ”„ è‡ªç„¶èªè¨€é©…å‹•
- ğŸ”„ LLM æ•´åˆ

## ğŸ¤ è²¢ç»æŒ‡å—

1. Fork å°ˆæ¡ˆ
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤è®Šæ›´ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. é–‹å•Ÿ Pull Request

## ğŸ“ æŠ€è¡“æ”¯æ´

å¦‚æœ‰å•é¡Œï¼Œè«‹æª¢æŸ¥ï¼š
1. `qa-system/README.md` (æœ¬æ–‡ä»¶)
2. `QA/plan-QA-agent.md` (å®Œæ•´æŠ€è¡“è¦åŠƒ)
3. ä½¿ç”¨ `--help` æŸ¥çœ‹å‘½ä»¤åˆ—èªªæ˜