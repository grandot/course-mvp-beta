2025-08-14 05:37:57  [34m[1m==>(B[m [1mCloning from https://github.com/grandot/course-mvp-beta(B[m
2025-08-14 05:37:59  [34m[1m==>(B[m [1mChecking out commit a9c004cbb4e793a97294fa6e1c8da0bf8a04e5ae in branch main(B[m
2025-08-14 05:38:01  [34m[1m==>(B[m [1mDownloading cache...(B[m
2025-08-14 05:38:13  [34m[1m==>(B[m [1mTransferred 91MB in 8s. Extraction took 3s.(B[m
2025-08-14 05:38:18  [34m[1m==>(B[m [1mRequesting Node.js version >=20.0.0(B[m
2025-08-14 05:38:19  [34m[1m==>(B[m [1mUsing Node.js version 24.5.0 via /opt/render/project/src/package.json(B[m
2025-08-14 05:38:19  [34m[1m==>(B[m [1mDocs on specifying a Node.js version: https://render.com/docs/node-version(B[m
2025-08-14 05:38:19  [34m[1m==>(B[m [1mRunning build command 'yarn'...(B[m
2025-08-14 05:38:19  yarn install v1.22.22
2025-08-14 05:38:19  info No lockfile found.
2025-08-14 05:38:19  warning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.
2025-08-14 05:38:19  [1/5] Validating package.json...
2025-08-14 05:38:19  [2/5] Resolving packages...
2025-08-14 05:38:24  warning googleapis > google-auth-library > gaxios > node-fetch > fetch-blob > node-domexception@1.0.0: Use your platform's native DOMException instead
2025-08-14 05:38:25  warning eslint@8.57.1: This version is no longer supported. Please see https://eslint.org/version-support for other options.
2025-08-14 05:38:25  warning eslint > @humanwhocodes/config-array@0.13.0: Use @eslint/config-array instead
2025-08-14 05:38:25  warning eslint > @humanwhocodes/config-array > @humanwhocodes/object-schema@2.0.3: Use @eslint/object-schema instead
2025-08-14 05:38:25  warning eslint > file-entry-cache > flat-cache > rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
2025-08-14 05:38:25  warning eslint > file-entry-cache > flat-cache > rimraf > glob@7.2.3: Glob versions prior to v9 are no longer supported
2025-08-14 05:38:25  warning eslint > file-entry-cache > flat-cache > rimraf > glob > inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
2025-08-14 05:38:27  [3/5] Fetching packages...
2025-08-14 05:38:35  [4/5] Linking dependencies...
2025-08-14 05:38:39  [5/5] Building fresh packages...
2025-08-14 05:38:39  success Saved lockfile.
2025-08-14 05:38:39  Done in 20.04s.
2025-08-14 05:38:42  [34;1m==>[0;22m [1mUploading build...[22m
2025-08-14 05:38:56  [34;1m==>[0;22m [1mUploaded in 6.2s. Compression took 8.0s[22m
2025-08-14 05:38:56  [32;1m==>[0;22m [1mBuild successful 🎉[22m
2025-08-14 05:39:00  [0;34m[1m==> [0m[1mDeploying...[0m
2025-08-14 05:39:18  [32m[1m==>(B[m [1mRunning 'yarn start'(B[m
2025-08-14 05:39:18  yarn run v1.22.22
2025-08-14 05:39:18  $ node src/index.js
2025-08-14 05:39:19  [dotenv@17.2.1] injecting env (0) from .env -- tip: 📡 auto-backup env with Radar: https://dotenvx.com/radar
2025-08-14 05:39:19  🚀 應用程式啟動中...
2025-08-14 05:39:19  📍 環境: development
2025-08-14 05:39:19  🤖 LINE Service: Real (生產)
2025-08-14 05:39:19  🚀 課程管理機器人服務已啟動
2025-08-14 05:39:19  📡 服務端口: 3000
2025-08-14 05:39:19  🔗 Webhook: http://localhost:3000/webhook
2025-08-14 05:39:19  ❤️ 健康檢查: http://localhost:3000/health
2025-08-14 05:39:19  ---
2025-08-14 05:39:19  ✅ 所有環境變數已設定完成
2025-08-14 05:39:21  [0;32m[1m==> [0m[1mYour service is live 🎉[0m
2025-08-14 05:39:22  [0;32m[1m==> [0m[1m[0m
2025-08-14 05:39:23  [0;32m[1m==> [0m[1m///////////////////////////////////////////////////////////[0m
2025-08-14 05:39:23  [0;32m[1m==> [0m[1m[0m
2025-08-14 05:39:23  [0;32m[1m==> [0m[1mAvailable at your primary URL https://course-mvp-beta.onrender.com[0m
2025-08-14 05:39:24  [0;32m[1m==> [0m[1m[0m
2025-08-14 05:39:24  [0;32m[1m==> [0m[1m///////////////////////////////////////////////////////////[0m
2025-08-14 05:44:26  [0;32m[1m==> [0m[1mDetected service running on port 3000[0m
2025-08-14 05:44:27  [0;32m[1m==> [0m[1mDocs on specifying a port: https://render.com/docs/web-services#port-binding[0m
2025-08-14 05:54:43  🧪 Mock LINE Service 初始化（測試模式）
2025-08-14 05:54:43  ⚠️ 警告：USE_MOCK_LINE_SERVICE 未設定，建議明確指定
2025-08-14 05:54:43  📨 收到 1 個事件
2025-08-14 05:54:43  📋 事件類型: message
2025-08-14 05:54:43  🔍 完整事件 JSON: {
2025-08-14 05:54:43    "type": "message",
2025-08-14 05:54:43    "message": {
2025-08-14 05:54:43      "type": "text",
2025-08-14 05:54:43      "id": "574316946086953033",
2025-08-14 05:54:43      "quoteToken": "MTpYEyvQY0sVnI_xAQEy-lmbnhVQ0Wa-Lj-W54wOaxcNOXvFW3H2slkheF3EN6uEDqrC_b2AbaM6bnDBiBIR3Wo_dYxim49VW_FCpp75q3YE0KK1i_TsnrDXHe6EJ8CuSDvW0APKmHifKKDtVX1WYw",
2025-08-14 05:54:43      "text": "取消Lumi的半跆拳道課"
2025-08-14 05:54:43    },
2025-08-14 05:54:43    "webhookEventId": "01K2KJA3AA7780QYW1F70VCRW3",
2025-08-14 05:54:43    "deliveryContext": {
2025-08-14 05:54:43      "isRedelivery": false
2025-08-14 05:54:43    },
2025-08-14 05:54:43    "timestamp": 1755150879755,
2025-08-14 05:54:43    "source": {
2025-08-14 05:54:43      "type": "user",
2025-08-14 05:54:43      "userId": "U599d5c1ce2ad616580cc4bc986d94e01"
2025-08-14 05:54:43    },
2025-08-14 05:54:43    "replyToken": "26f23b62bcab428689458b304727d5fd",
2025-08-14 05:54:43    "mode": "active"
2025-08-14 05:54:43  }
2025-08-14 05:54:43  {"ts":"2025-08-14T05:54:43.440Z","lvl":"info","direction":"inbound","channel":"line","traceId":"line_1755150883440_subcca","userId":"U599d5c1ce2ad616580cc4bc986d94e01","textIn":"取消Lumi的半跆拳道課"}
2025-08-14 05:54:43  🔍 用戶ID類型: string
2025-08-14 05:54:43  🔍 是否測試用戶: false
2025-08-14 05:54:43  🚀 生產用戶，使用真實 LINE Service
2025-08-14 05:54:43  🎯 開始解析意圖: 取消Lumi的半跆拳道課 (用戶: U599d5c1ce2ad616580cc4bc986d94e01)
2025-08-14 05:54:43  {"ts":"2025-08-14T05:54:43.443Z","lvl":"info","stage":"nlp","traceId":"line_1755150883440_subcca","userId":"U599d5c1ce2ad616580cc4bc986d94e01","intent":"cancel_course"}
2025-08-14 05:54:43  🔍 開始提取 slots - 意圖: cancel_course (用戶: U599d5c1ce2ad616580cc4bc986d94e01)
2025-08-14 05:54:43  ✅ Redis 連接成功
2025-08-14 05:54:43  🧠 使用對話上下文增強 slots 提取
2025-08-14 05:54:43  📊 規則提取置信度: 1.00
2025-08-14 05:54:43  🤖 啟用 AI 輔助提取...
2025-08-14 05:54:43  [dotenv@17.2.1] injecting env (0) from .env -- tip: ⚙️  suppress all logs with { quiet: true }
2025-08-14 05:54:43  ✅ OpenAI 服務初始化完成
2025-08-14 05:54:45  ✅ 最終 slots: { studentName: 'Lumi', courseName: '半跆拳道課' }
2025-08-14 05:54:45  {"ts":"2025-08-14T05:54:45.567Z","lvl":"info","stage":"slots","traceId":"line_1755150883440_subcca","userId":"U599d5c1ce2ad616580cc4bc986d94e01","intent":"cancel_course","slotsSummary":["studentName","courseName"]}
2025-08-14 05:54:45  🎯 執行任務: cancel_course
2025-08-14 05:54:45  🗑️ 開始處理取消課程任務: { studentName: 'Lumi', courseName: '半跆拳道課' }
2025-08-14 05:54:45  [dotenv@17.2.1] injecting env (0) from .env -- tip: 🔐 prevent building .env in docker: https://dotenvx.com/prebuild
2025-08-14 05:54:45  ✅ Firebase 服務初始化完成
2025-08-14 05:54:46  📚 查詢到 7 筆課程資料
2025-08-14 05:54:46  📊 任務執行結果: {
2025-08-14 05:54:46    success: false,
2025-08-14 05:54:46    showQuickReply: true,
2025-08-14 05:54:46    code: 'RECURRING_CANCEL_OPTIONS',
2025-08-14 05:54:46    message: '請問是要取消哪個範圍？\n\n🔘 只取消今天\n🔘 取消明天起所有課程\n🔘 刪除整個重複課程',
2025-08-14 05:54:46  📚 查詢到 7 筆課程資料
2025-08-14 05:54:46  📊 任務執行結果: {
2025-08-14 05:54:46    success: false,
2025-08-14 05:54:46    showQuickReply: true,
2025-08-14 05:54:46    code: 'RECURRING_CANCEL_OPTIONS',
2025-08-14 05:54:46    message: '請問是要取消哪個範圍？\n\n🔘 只取消今天\n🔘 取消明天起所有課程\n🔘 刪除整個重複課程',
2025-08-14 05:54:46    quickReply: [
2025-08-14 05:54:46      { label: '只取消今天', text: '只取消今天' },
2025-08-14 05:54:46      { label: '取消之後全部', text: '取消之後全部' },
2025-08-14 05:54:46      { label: '刪除整個重複', text: '刪除整個重複' }
2025-08-14 05:54:46    ]
2025-08-14 05:54:46  }
2025-08-14 05:54:46  {"ts":"2025-08-14T05:54:46.963Z","lvl":"info","stage":"task","traceId":"line_1755150883440_subcca","userId":"U599d5c1ce2ad616580cc4bc986d94e01","intent":"cancel_course","success":false,"code":"RECURRING_CANCEL_OPTIONS","latencyMs":1395}
2025-08-14 05:54:47  🔍 檢查 replyToken: 26f23b62bcab428689458b304727d5fd
2025-08-14 05:54:47  ✅ 訊息回覆成功
2025-08-14 05:54:47  {"ts":"2025-08-14T05:54:47.506Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755150883440_subcca","userId":"U599d5c1ce2ad616580cc4bc986d94e01","textOut":"請問是要取消哪個範圍？\n\n🔘 只取消今天\n🔘 取消明天起所有課程\n🔘 刪除整個重複課程","quickReply":true}
2025-08-14 05:54:50  📨 收到 1 個事件
2025-08-14 05:54:50  📋 事件類型: message
2025-08-14 05:54:50  🔍 完整事件 JSON: {
2025-08-14 05:54:50    "type": "message",
2025-08-14 05:54:50    "message": {
2025-08-14 05:54:50      "type": "text",
2025-08-14 05:54:50      "id": "574316962780283440",
2025-08-14 05:54:50      "quoteToken": "h3DTGNLuwZT01dBRMOrEnZRnbI_UoTCHjtJKeUnD0lUGVYmBNjsLH6h1427r9Vi6_-8zCMP6U7wSBPpzVqbFMwtx9OaB8BD2-ASLOd5rRTkuFGNzzHrcWYpYFfxHHcinvceQxroppMjRIMRHmKt_vA",
2025-08-14 05:54:50      "text": "刪除整個重複"
2025-08-14 05:54:50    },
2025-08-14 05:54:50    "webhookEventId": "01K2KJAD7H3QNBRMCZWPQDWJT8",
2025-08-14 05:54:50    "deliveryContext": {
2025-08-14 05:54:50      "isRedelivery": false
2025-08-14 05:54:50    },
2025-08-14 05:54:50    "timestamp": 1755150889691,
2025-08-14 05:54:50    "source": {
2025-08-14 05:54:50      "type": "user",
2025-08-14 05:54:50      "userId": "U599d5c1ce2ad616580cc4bc986d94e01"
2025-08-14 05:54:50    },
2025-08-14 05:54:50    "replyToken": "30b54c5e04854cbf93d6193b79baa4a3",
2025-08-14 05:54:50    "mode": "active"
2025-08-14 05:54:50  }
2025-08-14 05:54:50  {"ts":"2025-08-14T05:54:50.412Z","lvl":"info","direction":"inbound","channel":"line","traceId":"line_1755150890412_8xv96q","userId":"U599d5c1ce2ad616580cc4bc986d94e01","textIn":"刪除整個重複"}
2025-08-14 05:54:50  🔍 用戶ID類型: string
2025-08-14 05:54:50  🔍 是否測試用戶: false
2025-08-14 05:54:50  🚀 生產用戶，使用真實 LINE Service
2025-08-14 05:54:50  🎯 開始解析意圖: 刪除整個重複 (用戶: U599d5c1ce2ad616580cc4bc986d94e01)
2025-08-14 05:54:50  🤖 AI調用參數: { message: '刪除整個重複', timeoutMs: 5000, minConfidence: 0.7 }
2025-08-14 05:54:51  🤖 AI原始結果: { intent: 'unknown', confidence: 0 }
2025-08-14 05:54:51  ❌ AI結果拒絕: { hasIntent: true, confidence: 0, threshold: 0.7 }
2025-08-14 05:54:51  ✅ 規則兜底識別: cancel_course
2025-08-14 05:54:51  {"ts":"2025-08-14T05:54:51.083Z","lvl":"info","stage":"nlp","traceId":"line_1755150890412_8xv96q","userId":"U599d5c1ce2ad616580cc4bc986d94e01","intent":"cancel_course"}
2025-08-14 05:54:51  🔍 開始提取 slots - 意圖: cancel_course (用戶: U599d5c1ce2ad616580cc4bc986d94e01)
2025-08-14 05:54:51  🧠 使用對話上下文增強 slots 提取
2025-08-14 05:54:51  📝 從上下文補充學生名稱: Lumi
2025-08-14 05:54:51  📝 從上下文補充課程名稱: 半跆拳道課
2025-08-14 05:54:51  📊 規則提取置信度: 1.00
2025-08-14 05:54:51  🤖 啟用 AI 輔助提取...
2025-08-14 05:54:53  ✅ 最終 slots: {
2025-08-14 05:54:53    studentName: 'Lumi',
2025-08-14 05:54:53    courseName: '半跆拳道課',
2025-08-14 05:54:53    scope: 'all',
2025-08-14 05:54:53    content: '整個重複'
2025-08-14 05:54:53  }
2025-08-14 05:54:53  {"ts":"2025-08-14T05:54:53.856Z","lvl":"info","stage":"slots","traceId":"line_1755150890412_8xv96q","userId":"U599d5c1ce2ad616580cc4bc986d94e01","intent":"cancel_course","slotsSummary":["studentName","courseName","scope","content"]}
2025-08-14 05:54:53  🎯 執行任務: cancel_course
2025-08-14 05:54:53  🗑️ 開始處理取消課程任務: {
2025-08-14 05:54:53    studentName: 'Lumi',
2025-08-14 05:54:53    courseName: '半跆拳道課',
2025-08-14 05:54:53    scope: 'all',
2025-08-14 05:54:53    content: '整個重複'
2025-08-14 05:54:53  }
2025-08-14 05:54:54  📚 查詢到 7 筆課程資料
2025-08-14 05:54:54  📚 查詢到 0 筆課程資料
2025-08-14 05:54:54  📊 任務執行結果: {
2025-08-14 05:54:54    success: false,
2025-08-14 05:54:54    code: 'NOT_FOUND',
2025-08-14 05:54:54    message: '❌ 找不到 Lumi 的 半跆拳道課，請確認課程是否存在'
2025-08-14 05:54:54  }
2025-08-14 05:54:54  {"ts":"2025-08-14T05:54:54.318Z","lvl":"info","stage":"task","traceId":"line_1755150890412_8xv96q","userId":"U599d5c1ce2ad616580cc4bc986d94e01","intent":"cancel_course","success":false,"code":"NOT_FOUND","latencyMs":462}
2025-08-14 05:54:54  🔍 檢查 replyToken: 30b54c5e04854cbf93d6193b79baa4a3
2025-08-14 05:54:54  ✅ 訊息回覆成功
2025-08-14 05:54:54  {"ts":"2025-08-14T05:54:54.795Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755150890412_8xv96q","userId":"U599d5c1ce2ad616580cc4bc986d94e01","textOut":"❌ 找不到 Lumi 的 半跆拳道課，請確認課程是否存在","quickReply":false}
2025-08-14 05:55:10  📨 收到 1 個事件
2025-08-14 05:55:10  📋 事件類型: message
2025-08-14 05:55:10  🔍 完整事件 JSON: {
2025-08-14 05:55:10    "type": "message",
2025-08-14 05:55:10    "message": {
2025-08-14 05:55:10      "type": "text",
2025-08-14 05:55:10      "id": "574316996654006736",
2025-08-14 05:55:10      "quoteToken": "hXBMt3NXZGebPrNtVN-iZ5DE5neJTMcphwmhuRRwOt29mTKFdLv0GyGGoaq2_T9mKov0oE1tr8XDIDADuoBJ7fA-NL8XDJZdQxdgqWEGlX8Be2LCixnp2nTkxYsdbdoP8Sew_74kJUebAIZsKi3oeQ",
2025-08-14 05:55:10      "text": "Lumi課表"
2025-08-14 05:55:10    },
2025-08-14 05:55:10    "webhookEventId": "01K2KJB0SENCXW6V7688Z9PXZ4",
2025-08-14 05:55:10    "deliveryContext": {
2025-08-14 05:55:10      "isRedelivery": false
2025-08-14 05:55:10    },
2025-08-14 05:55:10    "timestamp": 1755150909939,
2025-08-14 05:55:10    "source": {
2025-08-14 05:55:10      "type": "user",
2025-08-14 05:55:10      "userId": "U599d5c1ce2ad616580cc4bc986d94e01"
2025-08-14 05:55:10    },
2025-08-14 05:55:10    "replyToken": "a281253c90504bf0b8cde87ef4baee84",
2025-08-14 05:55:10    "mode": "active"
2025-08-14 05:55:10  📨 收到 1 個事件
2025-08-14 05:55:10  📋 事件類型: message
2025-08-14 05:55:10  🔍 完整事件 JSON: {
2025-08-14 05:55:10    "type": "message",
2025-08-14 05:55:10    "message": {
2025-08-14 05:55:10      "type": "text",
2025-08-14 05:55:10      "id": "574316996654006736",
2025-08-14 05:55:10      "quoteToken": "hXBMt3NXZGebPrNtVN-iZ5DE5neJTMcphwmhuRRwOt29mTKFdLv0GyGGoaq2_T9mKov0oE1tr8XDIDADuoBJ7fA-NL8XDJZdQxdgqWEGlX8Be2LCixnp2nTkxYsdbdoP8Sew_74kJUebAIZsKi3oeQ",
2025-08-14 05:55:10      "text": "Lumi課表"
2025-08-14 05:55:10    },
2025-08-14 05:55:10    "webhookEventId": "01K2KJB0SENCXW6V7688Z9PXZ4",
2025-08-14 05:55:10    "deliveryContext": {
2025-08-14 05:55:10      "isRedelivery": false
2025-08-14 05:55:10    },
2025-08-14 05:55:10    "timestamp": 1755150909939,
2025-08-14 05:55:10    "source": {
2025-08-14 05:55:10      "type": "user",
2025-08-14 05:55:10      "userId": "U599d5c1ce2ad616580cc4bc986d94e01"
2025-08-14 05:55:10    },
2025-08-14 05:55:10    "replyToken": "a281253c90504bf0b8cde87ef4baee84",
2025-08-14 05:55:10    "mode": "active"
2025-08-14 05:55:10  }
2025-08-14 05:55:10  {"ts":"2025-08-14T05:55:10.570Z","lvl":"info","direction":"inbound","channel":"line","traceId":"line_1755150910570_ugiqea","userId":"U599d5c1ce2ad616580cc4bc986d94e01","textIn":"Lumi課表"}
2025-08-14 05:55:10  🔍 用戶ID類型: string
2025-08-14 05:55:10  🔍 是否測試用戶: false
2025-08-14 05:55:10  🚀 生產用戶，使用真實 LINE Service
2025-08-14 05:55:10  🎯 開始解析意圖: Lumi課表 (用戶: U599d5c1ce2ad616580cc4bc986d94e01)
2025-08-14 05:55:10  🤖 AI調用參數: { message: 'Lumi課表', timeoutMs: 5000, minConfidence: 0.7 }
2025-08-14 05:55:11  🤖 AI原始結果: { intent: 'query_schedule', confidence: 0.8 }
2025-08-14 05:55:11  ✅ AI結果採用: query_schedule 0.8
2025-08-14 05:55:11  {"ts":"2025-08-14T05:55:11.194Z","lvl":"info","stage":"nlp","traceId":"line_1755150910570_ugiqea","userId":"U599d5c1ce2ad616580cc4bc986d94e01","intent":"query_schedule"}
2025-08-14 05:55:11  🔍 開始提取 slots - 意圖: query_schedule (用戶: U599d5c1ce2ad616580cc4bc986d94e01)
2025-08-14 05:55:11  🧠 使用對話上下文增強 slots 提取
2025-08-14 05:55:11  📝 從上下文補充課程名稱: 半跆拳道課
2025-08-14 05:55:11  📊 規則提取置信度: 0.50
2025-08-14 05:55:11  🤖 啟用 AI 輔助提取...
2025-08-14 05:55:12  ✅ 最終 slots: { studentName: 'Lumi', courseName: '半跆拳道課' }
2025-08-14 05:55:13  {"ts":"2025-08-14T05:55:13.302Z","lvl":"info","stage":"slots","traceId":"line_1755150910570_ugiqea","userId":"U599d5c1ce2ad616580cc4bc986d94e01","intent":"query_schedule","slotsSummary":["studentName","courseName"]}
2025-08-14 05:55:13  🎯 執行任務: query_schedule
2025-08-14 05:55:13  🎯 開始處理查詢課表任務
2025-08-14 05:55:13  📋 接收參數: { studentName: 'Lumi', courseName: '半跆拳道課' }
2025-08-14 05:55:13  🕐 時間計算診斷: {
2025-08-14 05:55:13    systemTime: '2025-08-14T05:55:13.323Z',
2025-08-14 05:55:13    taiwanTime: '2025-08-14T13:55:13.323Z',
2025-08-14 05:55:13    timeReference: 'this_week'
2025-08-14 05:55:13  }
2025-08-14 05:55:13  📅 查詢時間範圍: { startDate: '2025-08-10', endDate: '2025-08-16', description: '本週' }
2025-08-14 05:55:13  📚 查詢到 3 筆課程資料
2025-08-14 05:55:13  📚 查詢到 7 筆課程資料
2025-08-14 05:55:13  📚 查詢到 1 筆課程
2025-08-14 05:55:13  📊 任務執行結果: {
2025-08-14 05:55:13    success: true,
2025-08-14 05:55:13    code: 'QUERY_OK',
2025-08-14 05:55:13    message: '📅 Lumi本週的課表\n\n📆 8/15 (週五)\n  下午5:30 - 半跆拳道課 🔄',
2025-08-14 05:55:13    data: {
2025-08-14 05:55:13      courses: [ [Object] ],
2025-08-14 05:55:13      courseCount: 1,
2025-08-14 05:55:13      dateRange: {
2025-08-14 05:55:13        startDate: '2025-08-10',
2025-08-14 05:55:13        endDate: '2025-08-16',
2025-08-14 05:55:13        description: '本週'
2025-08-14 05:55:13      }
2025-08-14 05:55:13    }
2025-08-14 05:55:13  }
2025-08-14 05:55:13  {"ts":"2025-08-14T05:55:13.682Z","lvl":"info","stage":"task","traceId":"line_1755150910570_ugiqea","userId":"U599d5c1ce2ad616580cc4bc986d94e01","intent":"query_schedule","success":true,"code":"QUERY_OK","latencyMs":380}
2025-08-14 05:55:13  🔍 檢查 replyToken: a281253c90504bf0b8cde87ef4baee84
2025-08-14 05:55:14  ✅ 訊息回覆成功
2025-08-14 05:55:14  {"ts":"2025-08-14T05:55:14.141Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755150910570_ugiqea","userId":"U599d5c1ce2ad616580cc4bc986d94e01","textOut":"📅 Lumi本週的課表\n\n📆 8/15 (週五)\n  下午5:30 - 半跆拳道課 🔄","quickReply":false}
2025-08-14 06:15:47  ❌ Webhook 簽名驗證失敗
2025-08-14 06:15:47  ❌ Webhook 簽名驗證失敗
2025-08-14 06:15:47  ❌ Webhook 簽名驗證失敗
2025-08-14 06:15:47  ❌ Webhook 簽名驗證失敗
2025-08-14 06:15:47  ❌ Webhook 簽名驗證失敗
2025-08-14 06:15:47  ❌ Webhook 簽名驗證失敗
2025-08-14 06:15:47  ❌ Webhook 簽名驗證失敗
2025-08-14 06:17:35  📨 收到 1 個事件
2025-08-14 06:17:35  📋 事件類型: message
2025-08-14 06:17:35  🔍 完整事件 JSON: {
2025-08-14 06:17:35    "type": "message",
2025-08-14 06:17:35    "message": {
2025-08-14 06:17:35      "type": "text",
2025-08-14 06:17:35      "text": "小明明天下午2點要上數學課"
2025-08-14 06:17:35    },
2025-08-14 06:17:35    "source": {
2025-08-14 06:17:35      "userId": "U_test_user_qa",
2025-08-14 06:17:35      "type": "user"
2025-08-14 06:17:35    },
2025-08-14 06:17:35    "replyToken": "test-reply-token-1755152255217",
2025-08-14 06:17:35    "timestamp": 1755152255217
2025-08-14 06:17:35  }
2025-08-14 06:17:35  🧹 檢測到 QA 重置上下文請求，清理用戶上下文: U_test_user_qa
2025-08-14 06:17:35  {"ts":"2025-08-14T06:17:35.827Z","lvl":"info","direction":"inbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textIn":"小明明天下午2點要上數學課"}
2025-08-14 06:17:35  🔍 用戶ID類型: string
2025-08-14 06:17:35  🔍 是否測試用戶: true
2025-08-14 06:17:35  🚀 生產用戶，使用真實 LINE Service
2025-08-14 06:17:36  🤖 AI 識別意圖: add_course 信心度: 1
2025-08-14 06:17:36  {"ts":"2025-08-14T06:17:36.690Z","lvl":"info","stage":"nlp","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course"}
2025-08-14 06:17:36  🔍 開始提取 slots - 意圖: add_course (用戶: U_test_user_qa)
2025-08-14 06:17:36  🕒 開始高級時間解析: 小明明天下午2點要上數學課
2025-08-14 06:17:36  ✅ 時間解析成功: {
2025-08-14 06:17:36  🤖 AI 識別意圖: add_course 信心度: 1
2025-08-14 06:17:36  {"ts":"2025-08-14T06:17:36.690Z","lvl":"info","stage":"nlp","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course"}
2025-08-14 06:17:36  🔍 開始提取 slots - 意圖: add_course (用戶: U_test_user_qa)
2025-08-14 06:17:36  🕒 開始高級時間解析: 小明明天下午2點要上數學課
2025-08-14 06:17:36  ✅ 時間解析成功: {
2025-08-14 06:17:36    input: '小明明天下午2點要上數學課',
2025-08-14 06:17:36    output: '14:00',
2025-08-14 06:17:36    details: { hour: 14, minute: 0, matchType: 'arabic_period', periodInfo: '下午' }
2025-08-14 06:17:36  }
2025-08-14 06:17:36  🧠 使用對話上下文增強 slots 提取
2025-08-14 06:17:36  📊 規則提取置信度: 1.00
2025-08-14 06:17:36  🤖 啟用 AI 輔助提取...
2025-08-14 06:17:38  ✅ 最終 slots: {
2025-08-14 06:17:38    studentName: '小明',
2025-08-14 06:17:38    courseName: '數學課',
2025-08-14 06:17:38    scheduleTime: '14:00',
2025-08-14 06:17:38    recurring: false,
2025-08-14 06:17:38    recurringRequested: false,
2025-08-14 06:17:38    timeReference: 'tomorrow'
2025-08-14 06:17:38  }
2025-08-14 06:17:38  {"ts":"2025-08-14T06:17:38.333Z","lvl":"info","stage":"slots","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","slotsSummary":["studentName","courseName","scheduleTime","recurring","recurringRequested","timeReference"]}
2025-08-14 06:17:38  🎯 執行任務: add_course
2025-08-14 06:17:38  🎯 開始處理新增課程任務
2025-08-14 06:17:38  📋 接收參數: {
2025-08-14 06:17:38    studentName: '小明',
2025-08-14 06:17:38    courseName: '數學課',
2025-08-14 06:17:38    scheduleTime: '14:00',
2025-08-14 06:17:38    recurring: false,
2025-08-14 06:17:38    recurringRequested: false,
2025-08-14 06:17:38    timeReference: 'tomorrow'
2025-08-14 06:17:38  }
2025-08-14 06:17:38  [dotenv@17.2.1] injecting env (0) from .env -- tip: ⚙️  override existing env vars with { override: true }
2025-08-14 06:17:38  🔐 已使用 OAuth2 模式初始化 Google Calendar (client configured, using refresh_token)
2025-08-14 06:17:38  ✅ Google Calendar 服務初始化完成（模式：oauth2）
2025-08-14 06:17:39  ⚠️ calendarId 無法存取，將自動重建: not_found
2025-08-14 06:17:39  📝 準備建立日曆: {"summary":"小明的課程 (U_test_user_qa)","description":"由 LINE 課程管理機器人自動創建的學生課程日曆","timeZone":"Asia/Taipei"}
2025-08-14 06:17:41  ✅ 已創建新日曆: dd3ccf14e86a5e4154fa28d2d1de601f0b3b24a04003393991c43f1adbf3bf96@group.calendar.google.com
2025-08-14 06:17:41  ✅ 已更新 calendarId: 小明 dd3ccf14e86a5e4154fa28d2d1de601f0b3b24a04003393991c43f1adbf3bf96@group.calendar.google.com
2025-08-14 06:17:41  👤 學生日曆: dd3ccf14e86a5e4154fa28d2d1de601f0b3b24a04003393991c43f1adbf3bf96@group.calendar.google.com
2025-08-14 06:17:41  📝 準備建立事件: calendarId= dd3ccf14e86a5e4154fa28d2d1de601f0b3b24a04003393991c43f1adbf3bf96@group.calendar.google.com  resource= {"summary":"[U_test_user_qa] 小明 - 數學課","description":"小明的課程\n由 LINE 課程管理機器人自動創建","start":{"dateTime":"2025-08-15T14:00:00+08:00","timeZone":"Asia/Taipei"},"end":{"dateTime":"2025-08-15T15:00:00+08:00","timeZone":"Asia/Taipei"},"recurrence":[],"extendedProperties":{"private":{"userId":"U_test_user_qa","studentName":"小明","courseId":""}},"reminders":{"useDefault":false,"overrides":[]}}
2025-08-14 06:17:42  ✅ 已創建課程事件: 350ucbuluqbqukqjsu7iptqi4s
2025-08-14 06:17:42  📅 Google Calendar 事件已創建: 350ucbuluqbqukqjsu7iptqi4s
2025-08-14 06:17:42  ✅ 課程資料已儲存: LnrRPj37lsNHzfk7aLnr
2025-08-14 06:17:42  💾 Firebase 課程資料已儲存: LnrRPj37lsNHzfk7aLnr
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
2025-08-14 06:17:43  📊 任務執行結果: {
2025-08-14 06:17:43    success: true,
2025-08-14 06:17:43    code: 'ADD_COURSE_OK',
2025-08-14 06:17:43    message: '✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00',
2025-08-14 06:17:43    data: {
2025-08-14 06:17:43      courseId: 'LnrRPj37lsNHzfk7aLnr',
2025-08-14 06:17:43      eventId: '350ucbuluqbqukqjsu7iptqi4s'
2025-08-14 06:17:43    },
2025-08-14 06:17:43    quickReply: [ { label: '✅ 確認', text: '確認' }, { label: '❌ 取消操作', text: '取消操作' } ]
2025-08-14 06:17:43  }
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.020Z","lvl":"info","stage":"task","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","intent":"add_course","success":true,"code":"ADD_COURSE_OK","latencyMs":4687}
2025-08-14 06:17:43  🔍 檢查 replyToken: test-reply-token-1755152255217
2025-08-14 06:17:43  🧪 檢測到測試 token，跳過真實 LINE API 調用
2025-08-14 06:17:43  📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！
2025-08-14 06:17:43  
2025-08-14 06:17:43  👦 學生：小明
2025-08-14 06:17:43  📚 課程：數學課
2025-08-14 06:17:43  📅 日期：2025-08-15
2025-08-14 06:17:43  🕐 時間：下午2:00
2025-08-14 06:17:43  {"ts":"2025-08-14T06:17:43.333Z","lvl":"info","direction":"outbound","channel":"line","traceId":"line_1755152255827_4rnwws","userId":"U_test_user_qa","textOut":"✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：數學課\n📅 日期：2025-08-15\n🕐 時間：下午2:00","quickReply":true}
