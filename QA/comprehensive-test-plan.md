# LINE 課程管理機器人 - 全面 QA 測試規劃

## 測試範圍與標準

### 測試目標
**正式發布前的全面功能驗證**，確保所有真實用戶可能遇到的輸入場景都被覆蓋，不遺漏任何邊界與異常情境。

### 測試範圍
- **核心功能**：5個核心意圖的完整業務流程
- **技術組件**：語意識別、多輪對話、狀態管理、數據持久化
- **用戶體驗**：交互流暢性、錯誤恢復、回應時間
- **系統穩定性**：異常處理、邊界條件、併發訪問

### 測試標準
- **覆蓋率目標**：≥95% 功能覆蓋
- **通過率目標**：≥90% 測試用例通過
- **回應時間**：≤3秒（包含網路延遲）
- **語意準確率**：≥95% 意圖識別正確

### 測試流程
1. **撰寫測試規劃** ✓（本文檔）
2. **生成測試數據** - 基於規劃產出 JSON 格式測試用例
3. **執行自動化測試** - 使用 test-actual-responses.js
4. **整理測試結果** - 分析失敗原因和修復優先級
5. **持續回歸測試** - 修復後重新驗證

---

## 功能測試設計

### 1. 新增課程 (add_course)

#### 1.1 標準新增場景

##### 1.1-A 完整單次課程（測試目的：驗證完整信息解析）
- **測試輸入**：「小明明天下午2點要上數學課」
- **預期回覆**：「好的，幫您記下：📌 小明 明天 下午02:00 上數學課 ✅ 沒問題｜📝 修改一下」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 1.1-B 完整重複課程（測試目的：驗證重複規則解析）
- **測試輸入**：「Lumi每週三下午3點要上鋼琴課」
- **預期回覆**：「好的，請確認以下資訊：📌 Lumi 每週三 下午03:00 上鋼琴課 ✅ 沒問題｜📝 修改一下」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 1.1-C 多天重複課程（測試目的：驗證複雜時間解析）
- **測試輸入**：「小光每週一三五上午10點英文課」
- **預期回覆**：「好的，請確認以下資訊：📌 小光 每週一、三、五 上午10:00 上英文課 ✅ 沒問題｜📝 修改一下」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 1.2 缺失信息補充場景

##### 1.2-A 缺少時間信息（測試目的：驗證多輪對話補充機制）
- **測試輸入**：「小明要上數學課」
- **預期回覆**：「請問數學課的上課時間是什麼時候呢？（例如：明天下午3點，或每週一下午2點）」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 1.2-B 缺少學生信息（測試目的：驗證學生選擇機制）
- **測試輸入**：「明天下午2點要上數學課」
- **預期回覆**：「請問這堂課是哪位學生的呢？」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 1.2-C 缺少課程名稱（測試目的：驗證課程信息補充）
- **測試輸入**：「小明明天下午2點要上課」
- **預期回覆**：「請問是什麼課程呢？（例如：數學課、英文課）」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 1.3 語意邊界測試

##### 1.3-A 模糊時間表達（測試目的：驗證時間解析容錯性）
- **測試輸入**：「小明下個禮拜三差不多下午兩點左右上數學課」
- **預期回覆**：「好的，請確認以下資訊：📌 小明 下週三 下午02:00 上數學課 ✅ 沒問題｜📝 修改一下」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 1.3-B 口語化表達（測試目的：驗證自然語言理解）
- **測試輸入**：「幫我排一下Lumi的鋼琴課，就每個星期四晚上七點」
- **預期回覆**：「好的，請確認以下資訊：📌 Lumi 每週四 晚上07:00 上鋼琴課 ✅ 沒問題｜📝 修改一下」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 1.3-C 錯別字容錯（測試目的：驗證輸入容錯能力）
- **測試輸入**：「小明明天下午2点数学课」
- **預期回覆**：「好的，幫您記下：📌 小明 明天 下午02:00 上數學課 ✅ 沒問題｜📝 修改一下」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 1.4 異常處理測試

##### 1.4-A 無效時間（測試目的：驗證時間格式校驗）
- **測試輸入**：「小明明天25點上數學課」
- **預期回覆**：「抱歉，時間格式不正確，請重新輸入正確的時間（例如：下午2點）」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 1.4-B 過去時間（測試目的：驗證時間邏輯校驗）
- **測試輸入**：「小明昨天下午2點上數學課」
- **預期回覆**：「無法新增過去時間的課程，請確認時間後重新輸入」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

### 2. 查詢課程 (query_schedule)

#### 2.1 時間範圍查詢

##### 2.1-A 今日課程查詢（測試目的：驗證當日課程顯示）
- **測試輸入**：「小明今天有什麼課？」
- **預期回覆**：「小明 今天（X/X）的課程如下：📍 上午10:00 英文課 📍 下午15:00 數學課」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 2.1-B 明天課程查詢（測試目的：驗證次日課程顯示）
- **測試輸入**：「查詢Lumi明天的課表」
- **預期回覆**：「Lumi 明天（X/X）的課程如下：📍 下午14:00 鋼琴課」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 2.1-C 本週課程查詢（測試目的：驗證週期性課程顯示）
- **測試輸入**：「看一下小光這週的安排」
- **預期回覆**：「小光 這週（X/X-X/X）的課程如下：📍 週一 上午10:00 英文課 📍 週三 下午15:00 數學課...」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 2.2 空結果處理

##### 2.2-A 無課程日查詢（測試目的：驗證空結果友善提示）
- **測試輸入**：「小明今天有什麼課？」
- **預期回覆**：「小明 今天（X/X）沒有安排課程喔！要不要新增課程？」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 2.2-B 不存在學生查詢（測試目的：驗證學生不存在處理）
- **測試輸入**：「查詢阿強今天的課程」
- **預期回覆**：「找不到學生「阿強」的資料，請確認學生姓名或先新增學生」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 2.3 語意邊界測試

##### 2.3-A 模糊時間查詢（測試目的：驗證相對時間理解）
- **測試輸入**：「小明這幾天有什麼課？」
- **預期回覆**：「請問是要查詢今天、明天，還是這週的課程呢？」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 2.3-B 特定課程查詢（測試目的：驗證課程篩選功能）
- **測試輸入**：「小明的數學課什麼時候上？」
- **預期回覆**：「小明的數學課安排：📍 每週一 下午15:00 📍 每週四 上午10:00」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

### 3. 記錄內容 (record_content)

#### 3.1 標準記錄場景

##### 3.1-A 當日課程記錄（測試目的：驗證內容記錄基本功能）
- **測試輸入**：「今天小明的數學課學了分數加減法」
- **預期回覆**：「好的，已記錄小明今天（X/X）數學課的內容：📝 分數加減法 ✅」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 3.1-B 昨日課程記錄（測試目的：驗證歷史日期記錄）
- **測試輸入**：「補記一下昨天Lumi鋼琴課的內容，練習了小星星」
- **預期回覆**：「好的，已記錄Lumi昨天（X/X）鋼琴課的內容：📝 練習小星星 ✅」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 3.1-C 詳細內容記錄（測試目的：驗證長文本內容處理）
- **測試輸入**：「今天小光英文課學了新單字apple、banana、cherry，還練習了對話how are you」
- **預期回覆**：「好的，已記錄小光今天（X/X）英文課的內容：📝 學習單字：apple、banana、cherry；練習對話：how are you ✅」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 3.2 圖片記錄場景（當前已知失效）

##### 3.2-A 純圖片記錄（測試目的：驗證圖片上傳功能）
- **測試輸入**：[傳送一張圖片]
- **預期回覆**：「這張照片是要記錄到哪一堂課呢？請說明課名與學生，例如「Lumi的鋼琴課」」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 3.2-B 圖片加文字記錄（測試目的：驗證多媒體內容記錄）
- **測試輸入**：[傳送圖片] + 「小明今天數學課的作業」
- **預期回覆**：「好的，已將照片記錄到小明今天（X/X）數學課中：📝 作業照片 ✅」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 3.3 語意邊界測試

##### 3.3-A 模糊課程指向（測試目的：驗證課程識別準確性）
- **測試輸入**：「今天的課學了很多東西」
- **預期回覆**：「請問是哪位學生的哪門課程呢？（例如：小明的數學課）」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 3.3-B 意圖識別邊界（測試目的：驗證記錄vs新增意圖區分）
- **測試輸入**：「今天小明的數學課學了分數，明天還要繼續學」
- **預期回覆**：「好的，已記錄小明今天（X/X）數學課的內容：📝 學了分數，明天還要繼續學 ✅」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 3.4 異常處理測試

##### 3.4-A 課程不存在（測試目的：驗證資料校驗）
- **測試輸入**：「今天小明的化學課學了很多」
- **預期回覆**：「找不到小明今天的化學課記錄，請確認課程資訊或先新增課程」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 3.4-B 日期超出範圍（測試目的：驗證時間範圍校驗）
- **測試輸入**：「記錄小明一個月前數學課的內容」
- **預期回覆**：「抱歉，只能記錄近期（7天內）的課程內容」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

### 4. 設定提醒 (set_reminder)

#### 4.1 標準提醒設定

##### 4.1-A 基本課前提醒（測試目的：驗證提醒設定基本功能）
- **測試輸入**：「提醒我小明的數學課」
- **預期回覆**：「好的，將在小明數學課開始前30分鐘提醒您 ✅」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 4.1-B 自訂提醒時間（測試目的：驗證提醒時間自訂）
- **測試輸入**：「Lumi鋼琴課前1小時提醒我」
- **預期回覆**：「好的，將在Lumi鋼琴課開始前60分鐘提醒您 ✅」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 4.1-C 附加提醒內容（測試目的：驗證提醒訊息客製化）
- **測試輸入**：「提醒我小光英文課要帶課本」
- **預期回覆**：「好的，已為小光英文課設定提醒：📌 記得帶課本 將在課程開始前30分鐘發送 ✅」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 4.2 複雜提醒場景

##### 4.2-A 特定日期提醒（測試目的：驗證單次提醒設定）
- **測試輸入**：「提醒我明天小明的數學課要帶計算機」
- **預期回覆**：「好的，已為明天（X/X）小明的數學課設定提醒：📌 記得帶計算機 ✅」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 4.2-B 重複課程提醒（測試目的：驗證循環提醒設定）
- **測試輸入**：「每次Lumi鋼琴課都提醒我帶琴譜」
- **預期回覆**：「好的，已為Lumi的鋼琴課設定重複提醒：📌 記得帶琴譜 每次上課前都會提醒您 ✅」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 4.3 語意邊界測試

##### 4.3-A 模糊課程指向（測試目的：驗證課程識別精確性）
- **測試輸入**：「提醒我明天的課」
- **預期回覆**：「請問是哪位學生的哪門課程呢？（例如：小明的數學課）」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 4.3-B 時間表達多樣性（測試目的：驗證時間解析靈活性）
- **測試輸入**：「鋼琴課開始前半小時通知我」
- **預期回覆**：「好的，將在鋼琴課開始前30分鐘提醒您 ✅」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 4.4 異常處理測試

##### 4.4-A 課程不存在（測試目的：驗證提醒設定資料校驗）
- **測試輸入**：「提醒我小明的物理課」
- **預期回覆**：「找不到小明的物理課，請確認課程資訊或先新增課程」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 4.4-B 無效提醒時間（測試目的：驗證時間參數校驗）
- **測試輸入**：「數學課前5小時提醒我」
- **預期回覆**：「提醒時間過長，建議設定在課程開始前2小時內」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

### 5. 取消課程 (cancel_course)

#### 5.1 標準取消場景

##### 5.1-A 單次課程取消（測試目的：驗證單次課程刪除）
- **測試輸入**：「取消小明明天的數學課」
- **預期回覆**：「已取消：小明 明天（X/X） 數學課 ✅」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 5.1-B 重複課程取消（測試目的：驗證重複課程刪除選項）
- **測試輸入**：「刪掉Lumi的鋼琴課」
- **預期回覆**：「請問是要取消單次課程還是整個重複課程？ 🔘 只取消今天 🔘 取消所有重複課程」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 5.1-C 確認取消流程（測試目的：驗證取消確認機制）
- **測試輸入**：「刪除小光的英文課」
- **預期回覆**：「確定要刪除小光的英文課嗎？這個動作無法復原。✅ 確定刪除｜❌ 取消操作」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 5.2 複雜取消場景

##### 5.2-A 部分重複課程取消（測試目的：驗證部分時間範圍刪除）
- **測試輸入**：「取消小明下週的數學課」
- **預期回覆**：「已取消小明下週（X/X-X/X）的數學課，其他時間的數學課保持不變 ✅」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 5.2-B 帶原因取消（測試目的：驗證取消原因記錄）
- **測試輸入**：「小明明天數學課生病不能上，取消」
- **預期回覆**：「已取消小明明天（X/X）的數學課，原因：生病 ✅」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 5.3 語意邊界測試

##### 5.3-A 模糊課程指向（測試目的：驗證課程識別準確性）
- **測試輸入**：「不上課了」
- **預期回覆**：「請問是要取消哪位學生的哪門課程呢？」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 5.3-B 意圖識別邊界（測試目的：驗證取消vs修改意圖區分）
- **測試輸入**：「小明數學課不上了，改成下午4點」
- **預期回覆**：「請問是要取消數學課，還是要修改時間為下午4點？ 🔘 取消課程 🔘 修改時間」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 5.4 異常處理測試

##### 5.4-A 課程不存在（測試目的：驗證取消操作資料校驗）
- **測試輸入**：「取消小明的化學課」
- **預期回覆**：「找不到小明的化學課，請確認課程資訊」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 5.4-B 已過期課程取消（測試目的：驗證歷史課程取消限制）
- **測試輸入**：「取消小明昨天的數學課」
- **預期回覆**：「無法取消已過去的課程」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

---

## 系統級測試設計

### 6. 多輪對話測試

#### 6.1 狀態持續性

##### 6.1-A 信息補充流程（測試目的：驗證對話狀態管理）
- **測試序列**：
  1. 輸入：「小明要上課」
  2. 系統：「請問是什麼課程呢？」
  3. 輸入：「數學課」
  4. 系統：「請問上課時間是什麼時候呢？」
  5. 輸入：「明天下午2點」
- **預期最終回覆**：「好的，幫您記下：📌 小明 明天 下午02:00 上數學課 ✅ 沒問題｜📝 修改一下」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

##### 6.1-B 上下文切換（測試目的：驗證多意圖切換處理）
- **測試序列**：
  1. 輸入：「小明要上數學課」
  2. 系統：「請問上課時間是什麼時候呢？」
  3. 輸入：「先查一下今天有什麼課」
  4. 系統：顯示今日課程
  5. 輸入：「明天下午2點」
- **預期最終回覆**：「好的，幫您記下：📌 小明 明天 下午02:00 上數學課 ✅ 沒問題｜📝 修改一下」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 6.2 錯誤恢復

##### 6.2-A 錯誤輸入修正（測試目的：驗證輸入錯誤恢復機制）
- **測試序列**：
  1. 輸入：「小明明天25點上數學課」
  2. 系統：「時間格式不正確，請重新輸入」
  3. 輸入：「下午2點」
- **預期最終回覆**：「好的，幫您記下：📌 小明 明天 下午02:00 上數學課 ✅ 沒問題｜📝 修改一下」
- **實際回覆**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

### 7. 併發與壓力測試

#### 7.1 併發用戶測試

##### 7.1-A 多用戶同時操作（測試目的：驗證系統併發處理能力）
- **測試方法**：同時發送5個不同用戶的課程新增請求
- **預期結果**：所有請求都應正確處理，無數據混淆
- **實際結果**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

#### 7.2 高頻請求測試

##### 7.2-A 連續快速請求（測試目的：驗證系統負載能力）
- **測試方法**：1分鐘內發送20個查詢請求
- **預期結果**：所有請求在3秒內響應，無錯誤
- **實際結果**：（待填）
- **測試結果**：（待填）
- **問題分析**：（待填）

---

## 測試數據準備

### 測試用戶設定
- **測試用戶ID**：U_test_user_001
- **學生資料**：小明、Lumi、小光
- **課程類型**：數學課、英文課、鋼琴課、直排輪課

### 預置測試數據
- 每個學生各有2-3門既有課程
- 包含單次和重複課程
- 覆蓋不同時間段

---

## 測試執行計畫

### 第一階段：功能完整性測試（預計60個用例）
- 5個核心功能 × 每功能8-12個變種
- 預期執行時間：2-3小時
- 通過標準：≥85%

### 第二階段：邊界異常測試（預計20個用例）
- 專注異常情況和邊界條件
- 預期執行時間：1小時
- 通過標準：≥90%

### 第三階段：系統級測試（預計15個用例）
- 多輪對話、併發、壓力測試
- 預期執行時間：1小時
- 通過標準：≥95%

### 測試結果分析標準
- **P0 嚴重**：核心功能完全失效
- **P1 重要**：功能部分失效或用戶體驗差
- **P2 一般**：邊界情況處理不當
- **P3 輕微**：用戶體驗優化建議

---

**總計預估測試用例數量：95個**
**預計總執行時間：4-5小時**
**目標通過率：≥90%**
