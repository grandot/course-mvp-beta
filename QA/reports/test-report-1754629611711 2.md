# 統一 QA 測試報告

- **時間**: 2025-08-08T05:06:51.711Z
- **模式**: both
- **測試案例數**: 45

## 本機測試
- **總數**: 45
- **通過**: 11
- **失敗**: 34

## 線上測試
- **總數**: 45
- **通過**: 4
- **失敗**: 41

## 本機 vs 線上
- **一致性**: 71%
- **差異數**: 13

## 詳細案例 - 本機
### 本機-1. 完整資訊輸入
- **輸入**: 測試小明明天下午2點要上測試數學課
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-2. 時間格式多樣性
- **輸入**: 測試Lumi後天晚上八點半要上測試鋼琴課
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-3. 中文數字時間
- **輸入**: 測試小光明天上午十點三十分測試英文課
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-4. 缺少學生資訊
- **輸入**: 明天下午3點要上測試數學課
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-5. 缺少時間資訊
- **輸入**: 測試小明要上測試數學課
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-6. 多輪對話完成流程
- **輸入**: 
- **結果**: ❌ FAIL
- **輸出**: 😊 不太理解您的意思，試試這些功能：  • 新增課程：「小明明天上午10點英文課」 • 查詢課程：「查詢小明的課表」   • 記錄內容：「記錄昨天數學課的內容」 • 設定提醒：「設定提醒」  💡 您也可以直接告訴我想要做什麼，我會盡力幫助您！

### 本機-7. 無效時間格式
- **輸入**: 測試小明明天25點上測試數學課
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-8. 過去時間輸入
- **輸入**: 測試小明昨天下午2點上測試數學課
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-9. 模糊語句處理
- **輸入**: 我想要什麼時候上課來著
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-10. 每週重複課程
- **輸入**: 測試Lumi每週三下午3點要上測試鋼琴課
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-11. 多天重複課程
- **輸入**: 測試小光每週一三五上午10點測試英文課
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-12. 每天重複課程
- **輸入**: 測試小明每天早上8點測試晨練課
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-13. 每日重複變體測試
- **輸入**: 安排測試Lumi每日下午5點測試瑜伽課
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-14. 每月重複課程 
- **輸入**: 測試小光每月第一個週一上午10點測試評鑑
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-15. 重複關鍵詞識別
- **輸入**: 安排測試小明定期游泳課每週二晚上7點
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-16. 模糊重複表達
- **輸入**: 測試Lumi固定每個星期四下午兩點鋼琴課
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-17. 重複類型區分測試
- **輸入**: 
- **結果**: ❌ FAIL
- **輸出**: 😊 不太理解您的意思，試試這些功能：  • 新增課程：「小明明天上午10點英文課」 • 查詢課程：「查詢小明的課表」   • 記錄內容：「記錄昨天數學課的內容」 • 設定提醒：「設定提醒」  💡 您也可以直接告訴我想要做什麼，我會盡力幫助您！

### 本機-18. 功能開關測試
- **輸入**: 
- **結果**: ❌ FAIL
- **輸出**: 😊 不太理解您的意思，試試這些功能：  • 新增課程：「小明明天上午10點英文課」 • 查詢課程：「查詢小明的課表」   • 記錄內容：「記錄昨天數學課的內容」 • 設定提醒：「設定提醒」  💡 您也可以直接告訴我想要做什麼，我會盡力幫助您！

### 本機-19. 重複課程時間衝突處理
- **輸入**: 
- **結果**: ✅ PASS

### 本機-20. 意圖邊界測試
- **輸入**: 我想了解一下課程安排的情況
- **結果**: ✅ PASS

### 本機-21. 複合意圖處理
- **輸入**: 幫我安排測試小明數學課，然後查詢一下他今天有什麼課
- **結果**: ✅ PASS

### 本機-22. 系統錯誤恢復
- **輸入**: 
- **結果**: ❌ FAIL
- **輸出**: 😊 不太理解您的意思，試試這些功能：  • 新增課程：「小明明天上午10點英文課」 • 查詢課程：「查詢小明的課表」   • 記錄內容：「記錄昨天數學課的內容」 • 設定提醒：「設定提醒」  💡 您也可以直接告訴我想要做什麼，我會盡力幫助您！

### 本機-23. 輸入修正流程
- **輸入**: 
- **結果**: ❌ FAIL
- **輸出**: 😊 不太理解您的意思，試試這些功能：  • 新增課程：「小明明天上午10點英文課」 • 查詢課程：「查詢小明的課表」   • 記錄內容：「記錄昨天數學課的內容」 • 設定提醒：「設定提醒」  💡 您也可以直接告訴我想要做什麼，我會盡力幫助您！

### 本機-24. 今日課程查詢
- **輸入**: 測試小明今天有什麼課？
- **結果**: ✅ PASS

### 本機-25. 明天課程查詢
- **輸入**: 查詢測試Lumi明天的課表
- **結果**: ✅ PASS

### 本機-26. 本週課程查詢
- **輸入**: 看一下測試小光這週的安排
- **結果**: ✅ PASS

### 本機-27. 無課程日查詢
- **輸入**: 測試小王今天有什麼課？
- **結果**: ✅ PASS

### 本機-28. 特定課程查詢
- **輸入**: 測試小明的測試數學課什麼時候上？
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-29. 每日重複課程查詢
- **輸入**: 測試小明的測試晨練課每天幾點？
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-30. 重複課程類型識別查詢
- **輸入**: 查詢測試Lumi的重複課程
- **結果**: ✅ PASS

### 本機-31. 當日課程記錄
- **輸入**: 今天測試小明的測試數學課學了分數加減法
- **結果**: ✅ PASS

### 本機-32. 昨日課程補記錄
- **輸入**: 補記一下昨天測試Lumi測試鋼琴課的內容，練習了小星星
- **結果**: ❌ FAIL
- **輸出**: ❌ 目前不支援「add_homework」功能，請稍後再試

### 本機-33. 查詢課程記錄
- **輸入**: 測試小明昨天測試數學課學了什麼？
- **結果**: ❌ FAIL
- **輸出**: ❌ 目前不支援「query_course_content」功能，請稍後再試

### 本機-34. 不存在課程記錄
- **輸入**: 記錄測試小明今天測試化學課的內容
- **結果**: ❌ FAIL
- **輸出**: ✅ 課程內容已成功記錄！ 📝 記錄為獨立內容 👨‍🎓 學生：測試小明 📚 課程：測試物理課 📅 日期：null 💬 內容：測試小明今天測試化學課的內容

### 本機-35. 標準課前提醒
- **輸入**: 提醒我測試小明的測試數學課
- **結果**: ❌ FAIL
- **輸出**: ❌ 找不到 醒我測試小明 的 測試數學課，請確認課程是否已安排

### 本機-36. 自訂提醒時間
- **輸入**: 測試Lumi測試鋼琴課前1小時提醒我
- **結果**: ❌ FAIL
- **輸出**: ❌ 找不到 醒我測試小明 的 測試鋼琴課，請確認課程是否已安排

### 本機-37. 不存在課程提醒
- **輸入**: 提醒我測試小明的測試物理課
- **結果**: ❌ FAIL
- **輸出**: ❌ 找不到 醒我測試小明 的 測試物理課，請確認課程是否已安排

### 本機-38. 修改課程時間
- **輸入**: 測試小明的測試數學課改到下午4點
- **結果**: ❌ FAIL
- **輸出**: ❌ 修改操作時發生錯誤，請稍後再試。

### 本機-39. 修改每日重複課程時間
- **輸入**: 測試小明每天的測試晨練課改到早上7點
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-40. 修改重複課程類型
- **輸入**: 測試Lumi的測試鋼琴課改成每天下午3點
- **結果**: ❌ FAIL
- **輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。

### 本機-41. 取消單次課程
- **輸入**: 取消測試小明明天的測試數學課
- **結果**: ✅ PASS

### 本機-42. 取消每日重複課程
- **輸入**: 取消測試小明的測試晨練課
- **結果**: ❌ FAIL
- **輸出**: ❌ 找不到 測試小明 的 測試晨練課，請確認課程是否存在

### 本機-43. 取消部分每日重複課程
- **輸入**: 取消測試小明下週的測試晨練課
- **結果**: ❌ FAIL
- **輸出**: ❌ 找不到 醒我測試小明 的 測試晨練課，請確認課程是否存在

### 本機-44. 重複課程類型區分取消
- **輸入**: 
- **結果**: ❌ FAIL
- **輸出**: 😊 不太理解您的意思，試試這些功能：  • 新增課程：「小明明天上午10點英文課」 • 查詢課程：「查詢小明的課表」   • 記錄內容：「記錄昨天數學課的內容」 • 設定提醒：「設定提醒」  💡 您也可以直接告訴我想要做什麼，我會盡力幫助您！

### 本機-45. 併發用戶操作
- **輸入**: 
- **結果**: ✅ PASS

## 詳細案例 - 線上
### 線上-1. 完整資訊輸入
- **輸入**: 測試小明明天下午2點要上測試數學課
- **Webhook**: 200 ✅
- **回覆**: 🕐 時間：下午2:00
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 測試小明明天下午2點要上測試數學課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小明明天下午2點要上測試數學課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小明明天下午2點要上測試數學課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小明明天下午2點要上測試數學課 (用戶: U_real_env_qa)",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試小明明天下午2點要上測試數學課",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "📋 提取結果: {",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試小明明天下午2點要上測試數學課",
  - taskExecution:
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小明\\n📚 課程：測試數學課\\n📅 日期：2025-08-09\\n🕐 時間：下午2:00',",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小明\\n📚 課程：測試數學課\\n📅 日期：2025-08-09\\n🕐 時間：下午2:00',",
    - "message": "📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小明\\n📚 課程：測試數學課\\n📅 日期：2025-08-09\\n🕐 時間：下午2:00',",
  - systemBehavior:
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754628952911",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754628952911",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754628952911",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",

### 線上-2. 時間格式多樣性
- **輸入**: 測試Lumi後天晚上八點半要上測試鋼琴課
- **Webhook**: 200 ✅
- **回覆**: 🕐 時間：下午2:00
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 測試小明明天下午2點要上測試數學課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小明明天下午2點要上測試數學課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試Lumi後天晚上八點半要上測試鋼琴課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試Lumi後天晚上八點半要上測試鋼琴課 (用戶: U_real_env_qa)",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試小明明天下午2點要上測試數學課",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "📋 提取結果: {",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試小明明天下午2點要上測試數學課",
  - taskExecution:
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小明\\n📚 課程：測試數學課\\n📅 日期：2025-08-09\\n🕐 時間：下午2:00',",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小明\\n📚 課程：測試數學課\\n📅 日期：2025-08-09\\n🕐 時間：下午2:00',",
    - "message": "📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小明\\n📚 課程：測試數學課\\n📅 日期：2025-08-09\\n🕐 時間：下午2:00',",
  - errors:
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
  - systemBehavior:
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754628952911",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754628952911",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754628952911",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754628974086",

### 線上-3. 中文數字時間
- **輸入**: 測試小光明天上午十點三十分測試英文課
- **Webhook**: 200 ✅
- **回覆**: 🕐 時間：上午10:30:00
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
  - slotExtraction:
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試小光明天上午十點三十分測試英文課",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
  - taskExecution:
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小光\\n📚 課程：十分測試英文課\\n📅 日期：2025-08-09\\n🕐 時間：上午10:30:00',",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小光\\n📚 課程：十分測試英文課\\n📅 日期：2025-08-09\\n🕐 時間：上午10:30:00',",
    - "message": "📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小光\\n📚 課程：十分測試英文課\\n📅 日期：2025-08-09\\n🕐 時間：上午10:30:00',",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754628987536",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754628987536",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754628987536",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754628987536",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754628987536",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",

### 線上-4. 缺少學生資訊
- **輸入**: 明天下午3點要上測試數學課
- **Webhook**: 200 ✅
- **回覆**: 🕐 時間：上午10:30:00
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 明天下午3點要上測試數學課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 明天下午3點要上測試數學課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
  - slotExtraction:
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試小光明天上午十點三十分測試英文課",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
  - taskExecution:
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小光\\n📚 課程：十分測試英文課\\n📅 日期：2025-08-09\\n🕐 時間：上午10:30:00',",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小光\\n📚 課程：十分測試英文課\\n📅 日期：2025-08-09\\n🕐 時間：上午10:30:00',",
    - "message": "📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小光\\n📚 課程：十分測試英文課\\n📅 日期：2025-08-09\\n🕐 時間：上午10:30:00',",
  - errors:
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754628987536",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754628987536",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754628987536",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629009176",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",

### 線上-5. 缺少時間資訊
- **輸入**: 測試小明要上測試數學課
- **Webhook**: 200 ✅
- **回覆**: 範例：「小明每週三下午3點數學課」
- **結果**: ✅ PASS

### 線上-6. 多輪對話完成流程
- **輸入**: 
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: unknown",
  - slotExtraction:
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: { studentName: '小明', courseName: '測試數學課', recurring: false }",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試小明要上測試數學課",
    - "message": "❌ 時間解析失敗: 測試小明要上測試數學課",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
  - taskExecution:
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: { studentName: '小明', courseName: '測試數學課', recurring: false }",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '❓ 請提供以下資訊：上課時間、課程日期\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "  message: '❓ 請提供以下資訊：上課時間、課程日期\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "📤 [測試模式] 實際業務回覆: ❓ 請提供以下資訊：上課時間、課程日期",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: { studentName: '小明', courseName: '測試數學課', recurring: false }",
  - errors:
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629022532",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629032643",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629022532",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",

### 線上-7. 無效時間格式
- **輸入**: 測試小明明天25點上測試數學課
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。
- **結果**: ❌ FAIL
- **診斷日誌**:
  - taskExecution:
    - "message": "📊 任務執行結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
  - errors:
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629045256",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629045256",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629045256",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629045256",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629045256",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",

### 線上-8. 過去時間輸入
- **輸入**: 測試小明昨天下午2點上測試數學課
- **Webhook**: 200 ✅
- **回覆**: 🕐 時間：下午2:00
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 測試小明昨天下午2點上測試數學課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小明昨天下午2點上測試數學課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小明昨天下午2點上測試數學課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小明昨天下午2點上測試數學課 (用戶: U_real_env_qa)",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試小明昨天下午2點上測試數學課",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "📋 提取結果: {",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試小明昨天下午2點上測試數學課",
  - taskExecution:
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小明\\n📚 課程：測試數學課\\n📅 日期：2025-08-07\\n🕐 時間：下午2:00',",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小明\\n📚 課程：測試數學課\\n📅 日期：2025-08-07\\n🕐 時間：下午2:00',",
    - "message": "📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小明\\n📚 課程：測試數學課\\n📅 日期：2025-08-07\\n🕐 時間：下午2:00',",
  - errors:
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629045256",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629062434",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629045256",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629062434",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",

### 線上-9. 模糊語句處理
- **輸入**: 我想要什麼時候上課來著
- **Webhook**: 200 ✅
- **回覆**: 範例：「小明每週三下午3點數學課」
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 我想要什麼時候上課來著 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 我想要什麼時候上課來著 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 我想要什麼時候上課來著 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 我想要什麼時候上課來著 (用戶: U_real_env_qa)",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 我想要什麼時候上課來著",
    - "message": "❌ 時間解析失敗: 我想要什麼時候上課來著",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: { courseName: '課來著', recurring: false }",
    - "message": "📋 提取結果: { courseName: '課來著', recurring: false }",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 我想要什麼時候上課來著",
  - taskExecution:
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小明\\n📚 課程：測試數學課\\n📅 日期：2025-08-07\\n🕐 時間：下午2:00',",
    - "message": "📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！",
    - "message": "      message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小明\\n📚 課程：測試數學課\\n📅 日期：2025-08-07\\n🕐 時間：下午2:00',",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: { courseName: '課來著', recurring: false }",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '❓ 請提供以下資訊：學生姓名、上課時間、課程日期\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "  message: '❓ 請提供以下資訊：學生姓名、上課時間、課程日期\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "📤 [測試模式] 實際業務回覆: ❓ 請提供以下資訊：學生姓名、上課時間、課程日期",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試小明\\n📚 課程：測試數學課\\n📅 日期：2025-08-07\\n🕐 時間：下午2:00',",
  - errors:
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629062434",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629077670",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629062434",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629077670",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",

### 線上-10. 每週重複課程
- **輸入**: 測試Lumi每週三下午3點要上測試鋼琴課
- **Webhook**: 200 ✅
- **回覆**: 📅 下次上課：2025-08-13
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
  - slotExtraction:
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試Lumi每週三下午3點要上測試鋼琴課",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
  - taskExecution:
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試Lumi\\n📚 課程：測試鋼琴課\\n🔄 重複：每週三 下午3:00\\n📅 下次上課：2025-08-13',",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試Lumi\\n📚 課程：測試鋼琴課\\n🔄 重複：每週三 下午3:00\\n📅 下次上課：2025-08-13',",
    - "message": "📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試Lumi\\n📚 課程：測試鋼琴課\\n🔄 重複：每週三 下午3:00\\n📅 下次上課：2025-08-13',",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629098356",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629098356",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629098356",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629098356",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629098356",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",

### 線上-11. 多天重複課程
- **輸入**: 測試小光每週一三五上午10點測試英文課
- **Webhook**: 200 ✅
- **回覆**: 📅 下次上課：2025-08-13
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: add_course",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
  - slotExtraction:
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試Lumi每週三下午3點要上測試鋼琴課",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
  - taskExecution:
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試Lumi\\n📚 課程：測試鋼琴課\\n🔄 重複：每週三 下午3:00\\n📅 下次上課：2025-08-13',",
    - "message": "  message: '✅ 課程已安排成功！\\n\\n👦 學生：測試Lumi\\n📚 課程：測試鋼琴課\\n🔄 重複：每週三 下午3:00\\n📅 下次上課：2025-08-13',",
    - "message": "📤 [測試模式] 實際業務回覆: ✅ 課程已安排成功！",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
  - errors:
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629098356",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629118229",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629118229",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629118229",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629118229",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",

### 線上-12. 每天重複課程
- **輸入**: 測試小明每天早上8點測試晨練課
- **Webhook**: 200 ✅
- **回覆**: 範例：「小明每週三下午3點數學課」
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 測試小明每天早上8點測試晨練課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小明每天早上8點測試晨練課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小明每天早上8點測試晨練課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小明每天早上8點測試晨練課 (用戶: U_real_env_qa)",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試小明每天早上8點測試晨練課",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "📋 提取結果: {",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試小明每天早上8點測試晨練課",
  - taskExecution:
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '❓ 請提供以下資訊：課程日期\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "  message: '❓ 請提供以下資訊：課程日期\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "📤 [測試模式] 實際業務回覆: ❓ 請提供以下資訊：課程日期",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
  - errors:
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
  - systemBehavior:
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629133253",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629133253",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629133253",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",

### 線上-13. 每日重複變體測試
- **輸入**: 安排測試Lumi每日下午5點測試瑜伽課
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 安排測試Lumi每日下午5點測試瑜伽課",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.00",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 安排測試Lumi每日下午5點測試瑜伽課",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
  - taskExecution:
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "❌ 新增課程任務失敗: Error: 無效的日期時間格式: 每日T下午5點:00+08:00",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "❌ 新增課程任務失敗: Error: 無效的日期時間格式: 每日T下午5點:00+08:00",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
  - errors:
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "❌ 檢查時間衝突失敗: Error: 無效的日期時間格式: 每日T下午5點:00+08:00",
    - "message": "❌ 創建課程事件失敗: Error: 無效的日期時間格式: 每日T下午5點:00+08:00",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "❌ 檢查時間衝突失敗: Error: 無效的日期時間格式: 每日T下午5點:00+08:00",
    - "message": "❌ 創建課程事件失敗: Error: 無效的日期時間格式: 每日T下午5點:00+08:00",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "❌ 檢查時間衝突失敗: Error: 無效的日期時間格式: 每日T下午5點:00+08:00",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629147978",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629147978",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629147978",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629147978",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629147978",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",

### 線上-14. 每月重複課程 
- **輸入**: 測試小光每月第一個週一上午10點測試評鑑
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小光每月第一個週一上午10點測試評鑑 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小光每月第一個週一上午10點測試評鑑 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 安排測試Lumi每日下午5點測試瑜伽課",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.00",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 安排測試Lumi每日下午5點測試瑜伽課",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
  - taskExecution:
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "❌ 新增課程任務失敗: Error: 無效的日期時間格式: 每日T下午5點:00+08:00",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "❌ 新增課程任務失敗: Error: 無效的日期時間格式: 每日T下午5點:00+08:00",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
  - errors:
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "❌ 檢查時間衝突失敗: Error: 無效的日期時間格式: 每日T下午5點:00+08:00",
    - "message": "❌ 創建課程事件失敗: Error: 無效的日期時間格式: 每日T下午5點:00+08:00",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "❌ 檢查時間衝突失敗: Error: 無效的日期時間格式: 每日T下午5點:00+08:00",
    - "message": "❌ 創建課程事件失敗: Error: 無效的日期時間格式: 每日T下午5點:00+08:00",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "❌ 檢查時間衝突失敗: Error: 無效的日期時間格式: 每日T下午5點:00+08:00",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629147978",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629147978",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629147978",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629147978",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629166392",

### 線上-15. 重複關鍵詞識別
- **輸入**: 安排測試小明定期游泳課每週二晚上7點
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 安排測試小明定期游泳課每週二晚上7點",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.00",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 安排測試小明定期游泳課每週二晚上7點",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
  - taskExecution:
    - "message": "🎯 執行任務: add_course",
    - "message": "❌ 新增課程任務失敗: RangeError: Invalid time value",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "🎯 執行任務: add_course",
    - "message": "❌ 新增課程任務失敗: RangeError: Invalid time value",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "🎯 執行任務: add_course",
    - "message": "❌ 新增課程任務失敗: RangeError: Invalid time value",
  - errors:
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629180593",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629180593",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629180593",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629180593",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629180593",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",

### 線上-16. 模糊重複表達
- **輸入**: 測試Lumi固定每個星期四下午兩點鋼琴課
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試Lumi固定每個星期四下午兩點鋼琴課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試Lumi固定每個星期四下午兩點鋼琴課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_course",
    - "message": "🎯 識別意圖: add_course",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 安排測試小明定期游泳課每週二晚上7點",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.00",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 安排測試小明定期游泳課每週二晚上7點",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
  - taskExecution:
    - "message": "🎯 執行任務: add_course",
    - "message": "❌ 新增課程任務失敗: RangeError: Invalid time value",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "🎯 執行任務: add_course",
    - "message": "❌ 新增課程任務失敗: RangeError: Invalid time value",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "🎯 執行任務: add_course",
    - "message": "❌ 新增課程任務失敗: RangeError: Invalid time value",
  - errors:
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
    - "message": "✅ 任務結果: { success: false, message: '❌ 新增課程失敗，請檢查輸入資訊並稍後再試。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629180593",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629180593",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629180593",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629180593",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629196134",

### 線上-17. 重複類型區分測試
- **輸入**: 
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
  - slotExtraction:
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "📋 提取結果: {",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "📋 提取結果: {",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
  - taskExecution:
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '❓ 請提供以下資訊：學生姓名\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "  message: '❓ 請提供以下資訊：學生姓名\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "📤 [測試模式] 實際業務回覆: ❓ 請提供以下資訊：學生姓名",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
  - errors:
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629196134",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629209757",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629196134",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",

### 線上-18. 功能開關測試
- **輸入**: 
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
  - slotExtraction:
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "📋 提取結果: {",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "📋 提取結果: {",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
  - taskExecution:
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '❓ 請提供以下資訊：學生姓名\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "  message: '❓ 請提供以下資訊：學生姓名\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "📤 [測試模式] 實際業務回覆: ❓ 請提供以下資訊：學生姓名",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
  - errors:
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629196134",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629209757",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629196134",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",

### 線上-19. 重複課程時間衝突處理
- **輸入**: 
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
  - taskExecution:
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
  - errors:
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
  - systemBehavior:
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629221885",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629234443",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。",

### 線上-20. 意圖邊界測試
- **輸入**: 我想了解一下課程安排的情況
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 開始解析意圖: 我想了解一下課程安排的情況 (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 我想了解一下課程安排的情況 (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 我想了解一下課程安排的情況 (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 我想了解一下課程安排的情況 (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: add_course",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 我想了解一下課程安排的情況",
    - "message": "❌ 時間解析失敗: 我想了解一下課程安排的情況",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.00",
    - "message": "✅ 最終 slots: { studentName: '我', content: '課程安排的情況' }",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 我想了解一下課程安排的情況",
    - "message": "❌ 時間解析失敗: 我想了解一下課程安排的情況",
    - "message": "🧠 使用對話上下文增強 slots 提取",
  - taskExecution:
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: { courseName: '課程安排', content: '了解' }",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '❓ 請提供以下資訊：學生姓名、上課時間、課程日期\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "  message: '❓ 請提供以下資訊：學生姓名、上課時間、課程日期\\n\\n範例：「小明每週三下午3點數學課」',",
  - errors:
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
  - systemBehavior:
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629221885",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629234443",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。",

### 線上-21. 複合意圖處理
- **輸入**: 幫我安排測試小明數學課，然後查詢一下他今天有什麼課
- **Webhook**: 200 ✅
- **回覆**: • 記錄課程內容：「記錄昨天數學課的內容」
- **結果**: ✅ PASS

### 線上-22. 系統錯誤恢復
- **輸入**: 
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
  - taskExecution:
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "📊 任務執行結果: {",
  - errors:
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629262580",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 📅 小明今天沒有安排課程",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629272503",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629262580",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",

### 線上-23. 輸入修正流程
- **輸入**: 
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
  - taskExecution:
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "📊 任務執行結果: {",
  - errors:
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629262580",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 📅 小明今天沒有安排課程",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629272503",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629262580",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",

### 線上-24. 今日課程查詢
- **輸入**: 測試小明今天有什麼課？
- **Webhook**: 200 ✅
- **回覆**: • 記錄課程內容：「記錄昨天數學課的內容」
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試小明今天有什麼課？",
    - "message": "❌ 時間解析失敗: 測試小明今天有什麼課？",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: query_schedule (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
  - taskExecution:
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: query_schedule",
    - "message": "📋 接收參數: { studentName: '測試小明', timeReference: 'today' }",
    - "message": "📊 任務執行結果: {",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: query_schedule",
    - "message": "📋 接收參數: { studentName: '測試小明', timeReference: 'today' }",
    - "message": "📊 任務執行結果: {",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: query_schedule",
  - errors:
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629296996",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 📅 測試小明今天沒有安排課程",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629296996",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 📅 測試小明今天沒有安排課程",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629296996",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 📅 測試小明今天沒有安排課程",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629296996",

### 線上-25. 明天課程查詢
- **輸入**: 查詢測試Lumi明天的課表
- **Webhook**: 200 ✅
- **回覆**: • 記錄課程內容：「記錄昨天數學課的內容」
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試小明今天有什麼課？",
    - "message": "❌ 時間解析失敗: 測試小明今天有什麼課？",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: query_schedule (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
  - taskExecution:
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: query_schedule",
    - "message": "📋 接收參數: { studentName: '測試小明', timeReference: 'today' }",
    - "message": "📊 任務執行結果: {",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: query_schedule",
    - "message": "📋 接收參數: { studentName: '測試Lumi', timeReference: 'tomorrow' }",
    - "message": "📊 任務執行結果: {",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: query_schedule",
  - errors:
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629296996",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 📅 測試小明今天沒有安排課程",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629312794",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 📅 測試Lumi明天沒有安排課程",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629312794",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 📅 測試Lumi明天沒有安排課程",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629312794",

### 線上-26. 本週課程查詢
- **輸入**: 看一下測試小光這週的安排
- **Webhook**: 200 ✅
- **回覆**: 範例：「小明每週三下午3點數學課」
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 看一下測試小光這週的安排 (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 看一下測試小光這週的安排 (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 看一下測試小光這週的安排 (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 看一下測試小光這週的安排 (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 看一下測試小光這週的安排 (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: add_course",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 看一下測試小光這週的安排",
    - "message": "❌ 時間解析失敗: 看一下測試小光這週的安排",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.00",
    - "message": "✅ 最終 slots: { studentName: '小光', courseName: '測試', scheduleTime: '這週' }",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 看一下測試小光這週的安排",
    - "message": "❌ 時間解析失敗: 看一下測試小光這週的安排",
    - "message": "🧠 使用對話上下文增強 slots 提取",
  - taskExecution:
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: { courseName: '測試小光', scheduleTime: '這週' }",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '❓ 請提供以下資訊：學生姓名、課程日期\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "📤 [測試模式] 實際業務回覆: ❓ 請提供以下資訊：學生姓名、課程日期",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: { courseName: '測試小光', scheduleTime: '這週' }",
    - "message": "📊 任務執行結果: {",
  - systemBehavior:
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629329072",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629329072",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629329072",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",

### 線上-27. 無課程日查詢
- **輸入**: 測試小王今天有什麼課？
- **Webhook**: 200 ✅
- **回覆**: 範例：「小明每週三下午3點數學課」
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 看一下測試小光這週的安排 (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小王今天有什麼課？ (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小王今天有什麼課？ (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小王今天有什麼課？ (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 開始解析意圖: 測試小王今天有什麼課？ (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: add_course",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 看一下測試小光這週的安排",
    - "message": "❌ 時間解析失敗: 看一下測試小光這週的安排",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.00",
    - "message": "✅ 最終 slots: { studentName: '小光', courseName: '測試', scheduleTime: '這週' }",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 看一下測試小光這週的安排",
    - "message": "❌ 時間解析失敗: 看一下測試小光這週的安排",
    - "message": "🧠 使用對話上下文增強 slots 提取",
  - taskExecution:
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: { courseName: '測試小光', scheduleTime: '這週' }",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '❓ 請提供以下資訊：學生姓名、課程日期\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "  message: '❓ 請提供以下資訊：學生姓名、課程日期\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "📤 [測試模式] 實際業務回覆: ❓ 請提供以下資訊：學生姓名、課程日期",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: { studentName: '測試小王', recurring: false, timeReference: 'today' }",
  - systemBehavior:
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629329072",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629346285",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629346285",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",

### 線上-28. 特定課程查詢
- **輸入**: 測試小明的測試數學課什麼時候上？
- **Webhook**: 200 ✅
- **回覆**: 範例：「小明每週三下午3點數學課」
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 測試小明的測試數學課什麼時候上？ (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: supplement_course_name",
    - "message": "🎯 開始解析意圖: 測試小明的測試數學課什麼時候上？ (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: supplement_course_name",
    - "message": "🎯 開始解析意圖: 測試小明的測試數學課什麼時候上？ (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: supplement_course_name",
    - "message": "🎯 開始解析意圖: 測試小明的測試數學課什麼時候上？ (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: supplement_course_name",
    - "message": "🎯 開始解析意圖: 測試小明的測試數學課什麼時候上？ (用戶: U_real_env_qa)",
    - "message": "🎯 識別意圖: supplement_course_name",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試小明的測試數學課什麼時候上？",
    - "message": "❌ 時間解析失敗: 測試小明的測試數學課什麼時候上？",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: { studentName: '測試小明', courseName: '課什麼時候上', recurring: false }",
    - "message": "🔍 開始提取 slots - 意圖: supplement_course_name (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
  - taskExecution:
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: supplement_course_name",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '❓ 請提供以下資訊：上課時間\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "  message: '❓ 請提供以下資訊：上課時間\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "📤 [測試模式] 實際業務回覆: ❓ 請提供以下資訊：上課時間",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: supplement_course_name",
    - "message": "📋 接收參數: {",
  - systemBehavior:
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629362176",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629362176",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629362176",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",

### 線上-29. 每日重複課程查詢
- **輸入**: 測試小明的測試晨練課每天幾點？
- **Webhook**: 200 ✅
- **回覆**: 範例：「小明每週三下午3點數學課」
- **結果**: ✅ PASS

### 線上-30. 重複課程類型識別查詢
- **輸入**: 查詢測試Lumi的重複課程
- **Webhook**: 200 ✅
- **回覆**: • 記錄課程內容：「記錄昨天數學課的內容」
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 查詢測試Lumi的重複課程 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
    - "message": "🎯 開始解析意圖: 查詢測試Lumi的重複課程 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
    - "message": "🎯 開始解析意圖: 查詢測試Lumi的重複課程 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
    - "message": "🎯 開始解析意圖: 查詢測試Lumi的重複課程 (用戶: U_real_env_qa)",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: query_schedule (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: { studentName: '測試Lumi', courseName: '重複課' }",
    - "message": "📋 提取結果: { studentName: '測試Lumi', courseName: '重複課' }",
    - "message": "🔍 開始提取 slots - 意圖: query_schedule (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
  - taskExecution:
    - "message": "🎯 執行任務: supplement_schedule_time",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 處理補充資訊時發生錯誤，請重新開始。' }",
    - "message": "🎯 執行任務: query_schedule",
    - "message": "📋 接收參數: { studentName: '測試Lumi', courseName: '重複課' }",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: supplement_schedule_time",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 處理補充資訊時發生錯誤，請重新開始。' }",
    - "message": "🎯 執行任務: query_schedule",
    - "message": "📋 接收參數: { studentName: '測試Lumi', courseName: '重複課' }",
    - "message": "📊 任務執行結果: {",
  - errors:
    - "message": "❌ 處理 scheduleTime 補充失敗: TypeError: parseTime is not a function",
    - "message": "✅ 任務結果: { success: false, message: '❌ 處理補充資訊時發生錯誤，請重新開始。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 處理補充資訊時發生錯誤，請重新開始。",
    - "message": "❌ 處理 scheduleTime 補充失敗: TypeError: parseTime is not a function",
    - "message": "✅ 任務結果: { success: false, message: '❌ 處理補充資訊時發生錯誤，請重新開始。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 處理補充資訊時發生錯誤，請重新開始。",
    - "message": "❌ 處理 scheduleTime 補充失敗: TypeError: parseTime is not a function",
    - "message": "✅ 任務結果: { success: false, message: '❌ 處理補充資訊時發生錯誤，請重新開始。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 處理補充資訊時發生錯誤，請重新開始。",
    - "message": "❌ 處理 scheduleTime 補充失敗: TypeError: parseTime is not a function",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629376019",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629384543",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 📅 測試Lumi本週沒有安排課程",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629376019",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629384543",

### 線上-31. 當日課程記錄
- **輸入**: 今天測試小明的測試數學課學了分數加減法
- **Webhook**: 200 ✅
- **回覆**: • 記錄課程內容：「記錄昨天數學課的內容」
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 查詢測試Lumi的重複課程 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
    - "message": "🎯 開始解析意圖: 查詢測試Lumi的重複課程 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
    - "message": "✅ 規則匹配成功: record_content",
    - "message": "🎯 識別意圖: record_content",
    - "message": "✅ 規則匹配成功: record_content",
    - "message": "🎯 識別意圖: record_content",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: query_schedule (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: { studentName: '測試Lumi', courseName: '重複課' }",
    - "message": "📋 提取結果: { studentName: '測試Lumi', courseName: '重複課' }",
    - "message": "🔍 開始提取 slots - 意圖: query_schedule (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
  - taskExecution:
    - "message": "🎯 執行任務: supplement_schedule_time",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 處理補充資訊時發生錯誤，請重新開始。' }",
    - "message": "🎯 執行任務: query_schedule",
    - "message": "📋 接收參數: { studentName: '測試Lumi', courseName: '重複課' }",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: supplement_schedule_time",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 處理補充資訊時發生錯誤，請重新開始。' }",
    - "message": "🎯 執行任務: query_schedule",
    - "message": "📋 接收參數: { studentName: '測試Lumi', courseName: '重複課' }",
    - "message": "📊 任務執行結果: {",
  - errors:
    - "message": "❌ 處理 scheduleTime 補充失敗: TypeError: parseTime is not a function",
    - "message": "✅ 任務結果: { success: false, message: '❌ 處理補充資訊時發生錯誤，請重新開始。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 處理補充資訊時發生錯誤，請重新開始。",
    - "message": "❌ 處理 scheduleTime 補充失敗: TypeError: parseTime is not a function",
    - "message": "✅ 任務結果: { success: false, message: '❌ 處理補充資訊時發生錯誤，請重新開始。' }",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 處理補充資訊時發生錯誤，請重新開始。",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629376019",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629384543",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 📅 測試Lumi本週沒有安排課程",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629376019",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629384543",

### 線上-32. 昨日課程補記錄
- **輸入**: 補記一下昨天測試Lumi測試鋼琴課的內容，練習了小星星
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: ❌ 目前不支援「add_homework」功能，請稍後再試
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 補記一下昨天測試Lumi測試鋼琴課的內容，練習了小星星 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_homework",
    - "message": "🎯 識別意圖: add_homework",
    - "message": "🎯 開始解析意圖: 補記一下昨天測試Lumi測試鋼琴課的內容，練習了小星星 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_homework",
    - "message": "🎯 識別意圖: add_homework",
    - "message": "🎯 開始解析意圖: 補記一下昨天測試Lumi測試鋼琴課的內容，練習了小星星 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_homework",
    - "message": "🎯 識別意圖: add_homework",
    - "message": "🎯 開始解析意圖: 補記一下昨天測試Lumi測試鋼琴課的內容，練習了小星星 (用戶: U_real_env_qa)",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 補記一下昨天測試Lumi測試鋼琴課的內容，練習了小星星",
    - "message": "❌ 時間解析失敗: 補記一下昨天測試Lumi測試鋼琴課的內容，練習了小星星",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: add_homework (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
  - taskExecution:
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
  - errors:
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 找不到意圖 \"add_homework\" 的任務處理器",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 找不到意圖 \"add_homework\" 的任務處理器",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 找不到意圖 \"add_homework\" 的任務處理器",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 找不到意圖 \"add_homework\" 的任務處理器",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 找不到意圖 \"add_homework\" 的任務處理器",
  - systemBehavior:
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629413585",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 目前不支援「add_homework」功能，請稍後再試",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629413585",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 目前不支援「add_homework」功能，請稍後再試",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629413585",

### 線上-33. 查詢課程記錄
- **輸入**: 測試小明昨天測試數學課學了什麼？
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: ❌ 目前不支援「add_homework」功能，請稍後再試
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 補記一下昨天測試Lumi測試鋼琴課的內容，練習了小星星 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_homework",
    - "message": "🎯 識別意圖: add_homework",
    - "message": "🎯 開始解析意圖: 補記一下昨天測試Lumi測試鋼琴課的內容，練習了小星星 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_homework",
    - "message": "🎯 識別意圖: add_homework",
    - "message": "🎯 開始解析意圖: 補記一下昨天測試Lumi測試鋼琴課的內容，練習了小星星 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: add_homework",
    - "message": "🎯 識別意圖: add_homework",
    - "message": "🎯 開始解析意圖: 測試小明昨天測試數學課學了什麼？ (用戶: U_real_env_qa)",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 補記一下昨天測試Lumi測試鋼琴課的內容，練習了小星星",
    - "message": "❌ 時間解析失敗: 補記一下昨天測試Lumi測試鋼琴課的內容，練習了小星星",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: add_homework (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
  - taskExecution:
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
  - errors:
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 找不到意圖 \"add_homework\" 的任務處理器",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 找不到意圖 \"add_homework\" 的任務處理器",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 找不到意圖 \"add_homework\" 的任務處理器",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 找不到意圖 \"query_course_content\" 的任務處理器",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 找不到意圖 \"query_course_content\" 的任務處理器",
  - systemBehavior:
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629413585",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 目前不支援「add_homework」功能，請稍後再試",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629413585",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 目前不支援「add_homework」功能，請稍後再試",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629413585",

### 線上-34. 不存在課程記錄
- **輸入**: 記錄測試小明今天測試化學課的內容
- **Webhook**: 200 ✅
- **回覆**: 💬 內容：測試小明今天測試化學課的內容
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "✅ 規則匹配成功: record_content",
    - "message": "🎯 識別意圖: record_content",
    - "message": "✅ 規則匹配成功: record_content",
    - "message": "🎯 識別意圖: record_content",
    - "message": "✅ 規則匹配成功: record_content",
    - "message": "🎯 識別意圖: record_content",
    - "message": "✅ 規則匹配成功: record_content",
    - "message": "🎯 識別意圖: record_content",
    - "message": "✅ 規則匹配成功: record_content",
    - "message": "🎯 識別意圖: record_content",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 記錄測試小明今天測試化學課的內容",
    - "message": "❌ 時間解析失敗: 記錄測試小明今天測試化學課的內容",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: record_content (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.67",
  - taskExecution:
    - "message": "🎯 執行任務: record_content",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: record_content",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: record_content",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: record_content",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: record_content",
    - "message": "📊 任務執行結果: {",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629441052",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ✅ 課程內容已成功記錄！",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629441052",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ✅ 課程內容已成功記錄！",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629441052",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ✅ 課程內容已成功記錄！",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629441052",

### 線上-35. 標準課前提醒
- **輸入**: 提醒我測試小明的測試數學課
- **Webhook**: 200 ✅
- **回覆**: 💬 內容：測試小明今天測試化學課的內容
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "✅ 規則匹配成功: record_content",
    - "message": "🎯 識別意圖: record_content",
    - "message": "✅ 規則匹配成功: record_content",
    - "message": "🎯 識別意圖: record_content",
    - "message": "🎯 開始解析意圖: 提醒我測試小明的測試數學課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: set_reminder",
    - "message": "🎯 識別意圖: set_reminder",
    - "message": "🎯 開始解析意圖: 提醒我測試小明的測試數學課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: set_reminder",
    - "message": "🎯 識別意圖: set_reminder",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 記錄測試小明今天測試化學課的內容",
    - "message": "❌ 時間解析失敗: 記錄測試小明今天測試化學課的內容",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: record_content (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.67",
  - taskExecution:
    - "message": "🎯 執行任務: record_content",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: record_content",
    - "message": "📊 任務執行結果: {",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: set_reminder",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 醒我測試小明 的 測試數學課，請確認課程是否已安排' }",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: set_reminder",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 醒我測試小明 的 測試數學課，請確認課程是否已安排' }",
  - errors:
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629441052",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ✅ 課程內容已成功記錄！",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629441052",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ✅ 課程內容已成功記錄！",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629457015",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 找不到 醒我測試小明 的 測試數學課，請確認課程是否已安排",

### 線上-36. 自訂提醒時間
- **輸入**: 測試Lumi測試鋼琴課前1小時提醒我
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: ❌ 找不到 Lumi 的 鋼琴課，請確認課程是否已安排
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 測試Lumi測試鋼琴課前1小時提醒我 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: set_reminder",
    - "message": "🎯 識別意圖: set_reminder",
    - "message": "🎯 開始解析意圖: 測試Lumi測試鋼琴課前1小時提醒我 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: set_reminder",
    - "message": "🎯 識別意圖: set_reminder",
    - "message": "🎯 開始解析意圖: 測試Lumi測試鋼琴課前1小時提醒我 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: set_reminder",
    - "message": "🎯 識別意圖: set_reminder",
    - "message": "🎯 開始解析意圖: 測試Lumi測試鋼琴課前1小時提醒我 (用戶: U_real_env_qa)",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試Lumi測試鋼琴課前1小時提醒我",
    - "message": "❌ 時間解析失敗: 測試Lumi測試鋼琴課前1小時提醒我",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: set_reminder (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.33",
  - taskExecution:
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: set_reminder",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 Lumi 的 鋼琴課，請確認課程是否已安排' }",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: set_reminder",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 Lumi 的 鋼琴課，請確認課程是否已安排' }",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: set_reminder",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 Lumi 的 鋼琴課，請確認課程是否已安排' }",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
  - errors:
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
  - systemBehavior:
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629472139",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 找不到 Lumi 的 鋼琴課，請確認課程是否已安排",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629472139",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 找不到 Lumi 的 鋼琴課，請確認課程是否已安排",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629472139",

### 線上-37. 不存在課程提醒
- **輸入**: 提醒我測試小明的測試物理課
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: ❌ 找不到 Lumi 的 鋼琴課，請確認課程是否已安排
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 測試Lumi測試鋼琴課前1小時提醒我 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: set_reminder",
    - "message": "🎯 識別意圖: set_reminder",
    - "message": "🎯 開始解析意圖: 測試Lumi測試鋼琴課前1小時提醒我 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: set_reminder",
    - "message": "🎯 識別意圖: set_reminder",
    - "message": "🎯 開始解析意圖: 提醒我測試小明的測試物理課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: set_reminder",
    - "message": "🎯 識別意圖: set_reminder",
    - "message": "🎯 開始解析意圖: 提醒我測試小明的測試物理課 (用戶: U_real_env_qa)",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試Lumi測試鋼琴課前1小時提醒我",
    - "message": "❌ 時間解析失敗: 測試Lumi測試鋼琴課前1小時提醒我",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: set_reminder (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.33",
  - taskExecution:
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: set_reminder",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 Lumi 的 鋼琴課，請確認課程是否已安排' }",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: set_reminder",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 Lumi 的 鋼琴課，請確認課程是否已安排' }",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: set_reminder",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 醒我測試小明 的 測試物理課，請確認課程是否已安排' }",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
  - errors:
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
    - "message": "⚠️ 無法識別為期待的補充資訊類型",
  - systemBehavior:
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629472139",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 找不到 Lumi 的 鋼琴課，請確認課程是否已安排",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629472139",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 找不到 Lumi 的 鋼琴課，請確認課程是否已安排",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629488681",

### 線上-38. 修改課程時間
- **輸入**: 測試小明的測試數學課改到下午4點
- **Webhook**: 200 ✅
- **回覆**: • 「改成提前15分鐘」
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 測試小明的測試數學課改到下午4點 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: modify_course",
    - "message": "🎯 識別意圖: modify_course",
    - "message": "🎯 開始解析意圖: 測試小明的測試數學課改到下午4點 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: modify_course",
    - "message": "🎯 識別意圖: modify_course",
    - "message": "🎯 開始解析意圖: 測試小明的測試數學課改到下午4點 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: modify_course",
    - "message": "🎯 識別意圖: modify_course",
    - "message": "🎯 開始解析意圖: 測試小明的測試數學課改到下午4點 (用戶: U_real_env_qa)",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: modify_course (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.00",
    - "message": "✅ 最終 slots: { studentName: '小明', courseName: '數學課', scheduleTime: '下午4點' }",
    - "message": "📋 提取結果: { studentName: '小明', courseName: '數學課', scheduleTime: '下午4點' }",
    - "message": "🔍 開始提取 slots - 意圖: modify_course (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.00",
    - "message": "✅ 最終 slots: { studentName: '小明', courseName: '數學課', scheduleTime: '下午4點' }",
    - "message": "📋 提取結果: { studentName: '小明', courseName: '數學課', scheduleTime: '下午4點' }",
  - taskExecution:
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 醒我測試小明 的 測試物理課，請確認課程是否已安排' }",
    - "message": "🎯 執行任務: modify_course",
    - "message": "📊 任務執行結果: {",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 醒我測試小明 的 測試物理課，請確認課程是否已安排' }",
    - "message": "🎯 執行任務: modify_course",
    - "message": "📊 任務執行結果: {",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 醒我測試小明 的 測試物理課，請確認課程是否已安排' }",
    - "message": "🎯 執行任務: modify_course",
    - "message": "📊 任務執行結果: {",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 醒我測試小明 的 測試物理課，請確認課程是否已安排' }",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629488681",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 找不到 醒我測試小明 的 測試物理課，請確認課程是否已安排",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629504430",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 📝 請告訴我您要修改什麼：",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629488681",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 找不到 醒我測試小明 的 測試物理課，請確認課程是否已安排",

### 線上-39. 修改每日重複課程時間
- **輸入**: 測試小明每天的測試晨練課改到早上7點
- **Webhook**: 200 ✅
- **回覆**: • 「改成提前15分鐘」
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 開始解析意圖: 測試小明的測試數學課改到下午4點 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: modify_course",
    - "message": "🎯 識別意圖: modify_course",
    - "message": "🎯 開始解析意圖: 測試小明的測試數學課改到下午4點 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: modify_course",
    - "message": "🎯 識別意圖: modify_course",
    - "message": "🎯 開始解析意圖: 測試小明的測試數學課改到下午4點 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: modify_course",
    - "message": "🎯 識別意圖: modify_course",
    - "message": "🎯 開始解析意圖: 測試小明每天的測試晨練課改到早上7點 (用戶: U_real_env_qa)",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: modify_course (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.00",
    - "message": "✅ 最終 slots: { studentName: '小明', courseName: '數學課', scheduleTime: '下午4點' }",
    - "message": "📋 提取結果: { studentName: '小明', courseName: '數學課', scheduleTime: '下午4點' }",
    - "message": "🔍 開始提取 slots - 意圖: modify_course (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.00",
    - "message": "✅ 最終 slots: { studentName: '小明', courseName: '數學課', scheduleTime: '下午4點' }",
    - "message": "📋 提取結果: { studentName: '小明', courseName: '數學課', scheduleTime: '下午4點' }",
  - taskExecution:
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 醒我測試小明 的 測試物理課，請確認課程是否已安排' }",
    - "message": "🎯 執行任務: modify_course",
    - "message": "📊 任務執行結果: {",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 醒我測試小明 的 測試物理課，請確認課程是否已安排' }",
    - "message": "🎯 執行任務: modify_course",
    - "message": "📊 任務執行結果: {",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 醒我測試小明 的 測試物理課，請確認課程是否已安排' }",
    - "message": "🎯 執行任務: modify_course",
    - "message": "📊 任務執行結果: {",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
  - errors:
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629488681",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 找不到 醒我測試小明 的 測試物理課，請確認課程是否已安排",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629504430",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 📝 請告訴我您要修改什麼：",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629488681",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 找不到 醒我測試小明 的 測試物理課，請確認課程是否已安排",

### 線上-40. 修改重複課程類型
- **輸入**: 測試Lumi的測試鋼琴課改成每天下午3點
- **Webhook**: 200 ✅
- **回覆**: 範例：「小明每週三下午3點數學課」
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試Lumi的測試鋼琴課改成每天下午3點",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試Lumi的測試鋼琴課改成每天下午3點",
    - "message": "✅ 時間解析成功: {",
  - taskExecution:
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '❓ 請提供以下資訊：課程日期\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "  message: '❓ 請提供以下資訊：課程日期\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "📤 [測試模式] 實際業務回覆: ❓ 請提供以下資訊：課程日期",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629532179",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629532179",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629532179",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629532179",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629532179",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",

### 線上-41. 取消單次課程
- **輸入**: 取消測試小明明天的測試數學課
- **Webhook**: 200 ✅
- **回覆**: 範例：「小明每週三下午3點數學課」
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
    - "message": "🎯 識別意圖: add_course",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試Lumi的測試鋼琴課改成每天下午3點",
    - "message": "✅ 時間解析成功: {",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 測試Lumi的測試鋼琴課改成每天下午3點",
    - "message": "✅ 時間解析成功: {",
  - taskExecution:
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '❓ 請提供以下資訊：課程日期\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "  message: '❓ 請提供以下資訊：課程日期\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "📤 [測試模式] 實際業務回覆: ❓ 請提供以下資訊：課程日期",
    - "message": "      message: '✅ 課程已安排成功！\\n' +",
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629532179",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629532179",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629548549",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629548549",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629548549",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",

### 線上-42. 取消每日重複課程
- **輸入**: 取消測試小明的測試晨練課
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: ❌ 找不到 測試小明 的 測試晨練課，請確認課程是否存在
- **結果**: ✅ PASS

### 線上-43. 取消部分每日重複課程
- **輸入**: 取消測試小明下週的測試晨練課
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: ❌ 找不到 小明 的 測試晨練課，請確認課程是否存在
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "✅ 規則匹配成功: cancel_course",
    - "message": "🎯 識別意圖: cancel_course",
    - "message": "🎯 開始解析意圖: 取消測試小明下週的測試晨練課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: cancel_course",
    - "message": "🎯 識別意圖: cancel_course",
    - "message": "✅ 規則匹配成功: cancel_course",
    - "message": "🎯 識別意圖: cancel_course",
    - "message": "🎯 開始解析意圖: 取消測試小明下週的測試晨練課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: cancel_course",
    - "message": "🎯 識別意圖: cancel_course",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 取消測試小明的測試晨練課",
    - "message": "❌ 時間解析失敗: 取消測試小明的測試晨練課",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: { studentName: '測試小明', courseName: '測試晨練課', recurring: false }",
    - "message": "🔍 開始提取 slots - 意圖: cancel_course (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
  - taskExecution:
    - "message": "🎯 執行任務: cancel_course",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 測試小明 的 測試晨練課，請確認課程是否存在' }",
    - "message": "🎯 執行任務: cancel_course",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 小明 的 測試晨練課，請確認課程是否存在' }",
    - "message": "🎯 執行任務: cancel_course",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 測試小明 的 測試晨練課，請確認課程是否存在' }",
    - "message": "🎯 執行任務: cancel_course",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 小明 的 測試晨練課，請確認課程是否存在' }",
    - "message": "🎯 執行任務: cancel_course",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 測試小明 的 測試晨練課，請確認課程是否存在' }",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629564428",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 找不到 測試小明 的 測試晨練課，請確認課程是否存在",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629573901",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 找不到 小明 的 測試晨練課，請確認課程是否存在",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629564428",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 找不到 測試小明 的 測試晨練課，請確認課程是否存在",

### 線上-44. 重複課程類型區分取消
- **輸入**: 
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: ❌ 找不到 小明 的 測試晨練課，請確認課程是否存在
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "✅ 規則匹配成功: cancel_course",
    - "message": "🎯 識別意圖: cancel_course",
    - "message": "🎯 開始解析意圖: 取消測試小明下週的測試晨練課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: cancel_course",
    - "message": "🎯 識別意圖: cancel_course",
    - "message": "✅ 規則匹配成功: cancel_course",
    - "message": "🎯 識別意圖: cancel_course",
    - "message": "🎯 開始解析意圖: 取消測試小明下週的測試晨練課 (用戶: U_real_env_qa)",
    - "message": "✅ 規則匹配成功: cancel_course",
    - "message": "🎯 識別意圖: cancel_course",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: add_course (用戶: U_real_env_qa)",
    - "message": "🕒 開始高級時間解析: 取消測試小明的測試晨練課",
    - "message": "❌ 時間解析失敗: 取消測試小明的測試晨練課",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: { studentName: '測試小明', courseName: '測試晨練課', recurring: false }",
    - "message": "🔍 開始提取 slots - 意圖: cancel_course (用戶: U_real_env_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 1.00",
  - taskExecution:
    - "message": "🎯 執行任務: cancel_course",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 測試小明 的 測試晨練課，請確認課程是否存在' }",
    - "message": "🎯 執行任務: cancel_course",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 小明 的 測試晨練課，請確認課程是否存在' }",
    - "message": "🎯 執行任務: cancel_course",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 測試小明 的 測試晨練課，請確認課程是否存在' }",
    - "message": "🎯 執行任務: cancel_course",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 小明 的 測試晨練課，請確認課程是否存在' }",
    - "message": "🎯 執行任務: cancel_course",
    - "message": "📊 任務執行結果: { success: false, message: '❌ 找不到 測試小明 的 測試晨練課，請確認課程是否存在' }",
  - errors:
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629564428",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 找不到 測試小明 的 測試晨練課，請確認課程是否存在",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629573901",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 找不到 小明 的 測試晨練課，請確認課程是否存在",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629564428",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: ❌ 找不到 測試小明 的 測試晨練課，請確認課程是否存在",

### 線上-45. 併發用戶操作
- **輸入**: 
- **Webhook**: 200 ✅
- **回覆**: 📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。
- **結果**: ❌ FAIL
- **診斷日誌**:
  - intentParsing:
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
    - "message": "🎯 識別意圖: unknown",
  - taskExecution:
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
    - "message": "🎯 執行任務: unknown",
    - "message": "📊 任務執行結果: {",
  - errors:
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 處理文字訊息失敗: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
    - "message": "❌ 錯誤堆疊: TypeError: currentLineService.replyMessageWithQuickReply is not a function",
  - systemBehavior:
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629587678",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754629599915",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。",

## 差異詳情
### 差異-1. 缺少時間資訊
- **本機**: FAIL
- **線上**: PASS
- **本機輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。
- **線上輸出**: 範例：「小明每週三下午3點數學課」

### 差異-2. 重複課程時間衝突處理
- **本機**: PASS
- **線上**: FAIL
- **本機輸出**: 😊 不太理解您的意思，試試這些功能：  • 新增課程：「小明明天上午10點英文課」 • 查詢課程：「查詢小明的課表」   • 記錄內容：「記錄昨天數學課的內容」 • 設定提醒：「設定提醒」  💡 您也可以直接告訴我想要做什麼，我會盡力幫助您！
- **線上輸出**: 📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。

### 差異-3. 意圖邊界測試
- **本機**: PASS
- **線上**: FAIL
- **本機輸出**: 📅 醒我測試小明未來7天沒有安排課程  💡 您可以： • 新增課程：「小明明天上午10點英文課」 • 查詢其他時間：「小明下週的課表」 • 記錄課程內容：「記錄昨天數學課的內容」
- **線上輸出**: 📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。

### 差異-4. 今日課程查詢
- **本機**: PASS
- **線上**: FAIL
- **本機輸出**: 📅 測試小明今天沒有安排課程  💡 您可以： • 新增課程：「小明明天上午10點英文課」 • 查詢其他時間：「小明下週的課表」 • 記錄課程內容：「記錄昨天數學課的內容」
- **線上輸出**: • 記錄課程內容：「記錄昨天數學課的內容」

### 差異-5. 明天課程查詢
- **本機**: PASS
- **線上**: FAIL
- **本機輸出**: 📅 測試Lumi明天沒有安排課程  💡 您可以： • 新增課程：「小明明天上午10點英文課」 • 查詢其他時間：「小明下週的課表」 • 記錄課程內容：「記錄昨天數學課的內容」
- **線上輸出**: • 記錄課程內容：「記錄昨天數學課的內容」

### 差異-6. 本週課程查詢
- **本機**: PASS
- **線上**: FAIL
- **本機輸出**: 📅 醒我測試小明本週沒有安排課程  💡 您可以： • 新增課程：「小明明天上午10點英文課」 • 查詢其他時間：「小明下週的課表」 • 記錄課程內容：「記錄昨天數學課的內容」
- **線上輸出**: 範例：「小明每週三下午3點數學課」

### 差異-7. 無課程日查詢
- **本機**: PASS
- **線上**: FAIL
- **本機輸出**: 📅 測試小王今天沒有安排課程  💡 您可以： • 新增課程：「小明明天上午10點英文課」 • 查詢其他時間：「小明下週的課表」 • 記錄課程內容：「記錄昨天數學課的內容」
- **線上輸出**: 範例：「小明每週三下午3點數學課」

### 差異-8. 每日重複課程查詢
- **本機**: FAIL
- **線上**: PASS
- **本機輸出**: ❌ 新增課程失敗，請檢查輸入資訊並稍後再試。
- **線上輸出**: 範例：「小明每週三下午3點數學課」

### 差異-9. 重複課程類型識別查詢
- **本機**: PASS
- **線上**: FAIL
- **本機輸出**: 📅 測試Lumi本週沒有安排課程  💡 您可以： • 新增課程：「小明明天上午10點英文課」 • 查詢其他時間：「小明下週的課表」 • 記錄課程內容：「記錄昨天數學課的內容」
- **線上輸出**: • 記錄課程內容：「記錄昨天數學課的內容」

### 差異-10. 當日課程記錄
- **本機**: PASS
- **線上**: FAIL
- **本機輸出**: ✅ 課程內容已成功記錄！ 📝 記錄為獨立內容 👨‍🎓 學生：測試小明 📚 課程：測試數學課 📅 日期：null 💬 內容：分數加減法
- **線上輸出**: • 記錄課程內容：「記錄昨天數學課的內容」

### 差異-11. 取消單次課程
- **本機**: PASS
- **線上**: FAIL
- **本機輸出**: ✅ 已取消 測試小明 的 測試數學課 📅 原定時間：2025-08-09 14:00  💡 提示：已取消的課程仍保留在記錄中，可隨時查看歷史資料
- **線上輸出**: 範例：「小明每週三下午3點數學課」

### 差異-12. 取消每日重複課程
- **本機**: FAIL
- **線上**: PASS
- **本機輸出**: ❌ 找不到 測試小明 的 測試晨練課，請確認課程是否存在
- **線上輸出**: 📤 [測試模式] 實際業務回覆: ❌ 找不到 測試小明 的 測試晨練課，請確認課程是否存在

### 差異-13. 併發用戶操作
- **本機**: PASS
- **線上**: FAIL
- **本機輸出**: 😊 不太理解您的意思，試試這些功能：  • 新增課程：「小明明天上午10點英文課」 • 查詢課程：「查詢小明的課表」   • 記錄內容：「記錄昨天數學課的內容」 • 設定提醒：「設定提醒」  💡 您也可以直接告訴我想要做什麼，我會盡力幫助您！
- **線上輸出**: 📤 [測試模式] 實際業務回覆: 處理訊息時發生錯誤，請稍後再試。
