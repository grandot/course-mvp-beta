# 線上真環境（Mock GCal）批次測試報告

- 批次: first5
- 產出時間: 2025-08-08T20:46:54.444Z
- 測試數: 5 | 通過: 1 | 失敗: 4 | 通過率: 20%

### 測試-1. [A1.1-A] 完整資訊輸入
- 輸入: 測試小明明天下午2點要上測試數學課
- Webhook: 0 ❌
- 回覆: (無) 
- 結果: ❌ FAIL

### 測試-2. [A1.1-B] 時間格式多樣性
- 輸入: 測試Lumi後天晚上八點半要上測試鋼琴課
- Webhook: 0 ❌
- 回覆: (無) 
- 結果: ❌ FAIL

### 測試-3. [A1.1-C] 中文數字時間
- 輸入: 測試小光明天上午十點三十分測試英文課
- Webhook: 0 ❌
- 回覆: 📅 小明今天沒有安排課程 
- 結果: ❌ FAIL
- 診斷：
  - intentParsing:
    - "message": "🎯 開始解析意圖: 幫我安排測試小明數學課，然後查詢一下他今天有什麼課 (用戶: U_test_user_qa)",
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
    - "message": "🎯 開始解析意圖: 幫我安排測試小明數學課，然後查詢一下他今天有什麼課 (用戶: U_test_user_qa)",
    - "message": "✅ 規則匹配成功: query_schedule",
    - "message": "🎯 識別意圖: query_schedule",
  - slotExtraction:
    - "message": "🔍 開始提取 slots - 意圖: query_schedule (用戶: U_test_user_qa)",
    - "message": "🧠 使用對話上下文增強 slots 提取",
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "📋 提取結果: {",
  - taskExecution:
    - "message": "      message: '✅ 課程已安排成功！\\n\\n👦 學生：測試Lumi\\n📚 課程：鋼琴課\\n🔄 重複：每週四 下午2:00\\n📅 下次上課：2025-08-13',",
    - "message": "🎯 執行任務: query_schedule",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "      message: '✅ 課程已安排成功！\\n\\n👦 學生：測試Lumi\\n📚 課程：鋼琴課\\n🔄 重複：每週四 下午2:00\\n📅 下次上課：2025-08-13',",
    - "message": "🎯 執行任務: query_schedule",
  - errors:
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
    - "message": "⚠️ 無待處理的意圖資料",
  - systemBehavior:
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754685009114",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",
    - "message": "📤 [測試模式] 實際業務回覆: 📅 小明今天沒有安排課程",
    - "message": "🚀 生產用戶，使用真實 LINE Service",
    - "message": "🔍 檢查 replyToken: test-reply-token-1754685009114",

### 測試-4. [A1.2-A] 缺少學生資訊
- 輸入: 明天下午3點要上測試數學課
- Webhook: 200 ✅
- 回覆: 📅 小明今天沒有安排課程 
- 結果: ❌ FAIL
- 診斷：
  - slotExtraction:
    - "message": "📊 規則提取置信度: 0.50",
    - "message": "🤖 啟用 AI 輔助提取...",
    - "message": "✅ 最終 slots: {",
    - "message": "📋 提取結果: {",
  - taskExecution:
    - "message": "🎯 執行任務: add_course",
    - "message": "📋 接收參數: {",
    - "message": "📊 任務執行結果: {",
    - "message": "  message: '❓ 請提供以下資訊：學生姓名\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "  message: '❓ 請提供以下資訊：學生姓名\\n\\n範例：「小明每週三下午3點數學課」',",
    - "message": "📤 [測試模式] 實際業務回覆: ❓ 請提供以下資訊：學生姓名",
  - systemBehavior:
    - "message": "🔍 檢查 replyToken: test-reply-token-1754685989281",
    - "message": "🧪 檢測到測試 token，跳過真實 LINE API 調用",

### 測試-5. [A1.2-B] 缺少時間資訊
- 輸入: 測試小明要上測試數學課
- Webhook: 200 ✅
- 回覆: ❓ 請提供以下資訊：上課時間、課程日期 
- 結果: ✅ PASS
