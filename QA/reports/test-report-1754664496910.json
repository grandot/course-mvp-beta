{
  "timestamp": "2025-08-08T14:48:16.910Z",
  "mode": "local",
  "summary": {
    "totalTests": 45,
    "totalEntities": 5,
    "dependencyValidation": {
      "isValid": true,
      "issues": [],
      "warnings": [
        "測試 A1.3-C 似乎是孤立的（沒有依賴關係）",
        "測試 A3.1-A 似乎是孤立的（沒有依賴關係）",
        "測試 A3.2-A 似乎是孤立的（沒有依賴關係）",
        "測試 A3.2-B 似乎是孤立的（沒有依賴關係）",
        "測試 B2.3-A 似乎是孤立的（沒有依賴關係）",
        "測試 B3.2-A 似乎是孤立的（沒有依賴關係）"
      ],
      "statistics": {
        "totalTests": 45,
        "totalEntities": 5,
        "byPhase": {
          "group_a": 23,
          "group_b": 14,
          "group_c": 8
        },
        "entityTypes": {
          "course": 4,
          "student": 1
        },
        "dependencyCount": 275
      }
    }
  },
  "testResults": {
    "local": {
      "total": 45,
      "passed": 36,
      "failed": 9,
      "results": [
        {
          "testCase": {
            "id": "A1.1-A",
            "name": "完整資訊輸入",
            "purpose": "驗證標準格式解析",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「測試小明明天下午2點要上測試數學課」\n- **預期回覆**：「✅ 課程已安排成功！👦 學生：測試小明 📚 課程：測試數學課 📅 日期：YYYY-MM-DD 🕐 時間：下午2:00」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試小明明天下午2點要上測試數學課",
            "expectedOutput": "✅ 課程已安排成功！👦 學生：測試小明 📚 課程：測試數學課 📅 日期：YYYY-MM-DD 🕐 時間：下午2:00",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "成功",
              "✅",
              "已安排",
              "課程",
              "小明"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "數學課"
              ],
              "timeExpressions": [
                "明天",
                "下午2點"
              ],
              "actions": [],
              "creates": [
                "test_course___",
                "basic_courses"
              ],
              "requires": [],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": true,
          "output": "✅ 課程已安排成功！\n\n👦 學生：測試小明\n📚 課程：測試數學課\n📅 日期：2025-08-09\n🕐 時間：下午2:00",
          "intent": "add_course",
          "keywordMatch": true,
          "code": "ADD_COURSE_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "A1.1-B",
            "name": "時間格式多樣性",
            "purpose": "驗證時間解析器覆蓋率",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「測試Lumi後天晚上八點半要上測試鋼琴課」\n- **預期回覆**：「✅ 課程已安排成功！👦 學生：測試Lumi 📚 課程：測試鋼琴課 📅 日期：YYYY-MM-DD 🕐 時間：晚上8:30」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試Lumi後天晚上八點半要上測試鋼琴課",
            "expectedOutput": "✅ 課程已安排成功！👦 學生：測試Lumi 📚 課程：測試鋼琴課 📅 日期：YYYY-MM-DD 🕐 時間：晚上8:30",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "成功",
              "✅",
              "已安排",
              "課程",
              "Lumi"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "鋼琴課"
              ],
              "timeExpressions": [],
              "actions": [],
              "creates": [
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": true,
          "output": "✅ 課程已安排成功！\n\n👦 學生：要上測試\n📚 課程：鋼琴課\n📅 日期：2025-08-10\n🕐 時間：下午8:30",
          "intent": "add_course",
          "keywordMatch": true,
          "code": "ADD_COURSE_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "A1.1-C",
            "name": "中文數字時間",
            "purpose": "驗證中文數字解析",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「測試小光明天上午十點三十分測試英文課」\n- **預期回覆**：「✅ 課程已安排成功！👦 學生：測試小光 📚 課程：測試英文課 📅 日期：YYYY-MM-DD 🕐 時間：上午10:30」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n#### A1.2 資訊補充流程測試\n\n",
            "annotations": {},
            "input": "測試小光明天上午十點三十分測試英文課",
            "expectedOutput": "✅ 課程已安排成功！👦 學生：測試小光 📚 課程：測試英文課 📅 日期：YYYY-MM-DD 🕐 時間：上午10:30",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "成功",
              "✅",
              "已安排",
              "課程",
              "小光"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "英文課"
              ],
              "timeExpressions": [
                "明天"
              ],
              "actions": [],
              "creates": [
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": true,
          "output": "✅ 課程已安排成功！\n\n👦 學生：測試小光\n📚 課程：十分測試英文課\n📅 日期：2025-08-09\n🕐 時間：上午10:30",
          "intent": "add_course",
          "keywordMatch": true,
          "code": "ADD_COURSE_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "A1.2-A",
            "name": "缺少學生資訊",
            "purpose": "驗證多輪對話補充",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「明天下午3點要上測試數學課」\n- **預期回覆**：「❓ 請提供以下資訊：學生姓名 範例：「小明每週三下午3點數學課」」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "明天下午3點要上測試數學課",
            "expectedOutput": "❓ 請提供以下資訊：學生姓名 範例：「小明每週三下午3點數學課",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "❓",
              "請提供",
              "課程",
              "小明"
            ],
            "expectedSuccess": false,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "數學課"
              ],
              "timeExpressions": [
                "明天",
                "下午3點"
              ],
              "actions": [],
              "creates": [
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": true,
          "output": "❓ 請提供以下資訊：學生姓名\n\n範例：「小明每週三下午3點數學課」",
          "intent": "add_course",
          "keywordMatch": true,
          "code": "MISSING_FIELDS",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "A1.2-B",
            "name": "缺少時間資訊",
            "purpose": "驗證時間補充機制",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「測試小明要上測試數學課」\n- **預期回覆**：「❓ 請提供以下資訊：上課時間、課程日期 範例：「小明每週三下午3點數學課」」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試小明要上測試數學課",
            "expectedOutput": "❓ 請提供以下資訊：上課時間、課程日期 範例：「小明每週三下午3點數學課",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "❓",
              "請提供",
              "課程",
              "小明"
            ],
            "expectedSuccess": false,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "數學課"
              ],
              "timeExpressions": [],
              "actions": [],
              "creates": [
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": true,
          "output": "❓ 請提供以下資訊：上課時間、課程日期\n\n範例：「小明每週三下午3點數學課」",
          "intent": "add_course",
          "keywordMatch": true,
          "code": "MISSING_FIELDS",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "A1.2-C",
            "name": "多輪對話完成流程",
            "purpose": "驗證狀態持續性",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試序列**：\n1. 輸入：「測試小明要上課」\n2. 預期：系統詢問課程和時間\n3. 輸入：「測試數學課」\n4. 預期：系統詢問時間\n5. 輸入：「明天下午2點」\n- **預期最終回覆**：「✅ 課程已安排成功！」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n#### A1.3 錯誤處理測試\n\n",
            "annotations": {},
            "input": "明天下午2點",
            "expectedOutput": "",
            "expectedFinalOutput": "✅ 課程已安排成功！",
            "expectedKeywords": [
              "課程"
            ],
            "expectedSuccess": true,
            "steps": [
              {
                "input": "測試小明要上課"
              },
              {
                "input": "測試數學課"
              },
              {
                "input": "明天下午2點"
              }
            ],
            "entities": {
              "students": [],
              "courses": [
                "數學課"
              ],
              "timeExpressions": [
                "明天",
                "下午2點"
              ],
              "actions": [
                "creates",
                "queries"
              ],
              "creates": [
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": false,
          "output": "❓ 請提供以下資訊：上課時間、課程日期\n\n範例：「小明每週三下午3點數學課」",
          "intent": "supplement_student_name",
          "keywordMatch": true,
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "A1.3-A",
            "name": "無效時間格式",
            "purpose": "驗證時間校驗",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「測試小明明天25點上測試數學課」\n- **預期回覆**：「抱歉，時間格式不正確，請重新輸入正確的時間（例如：下午2點）」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試小明明天25點上測試數學課",
            "expectedOutput": "抱歉，時間格式不正確，請重新輸入正確的時間（例如：下午2點）",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "錯誤",
              "重新"
            ],
            "expectedSuccess": null,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "數學課"
              ],
              "timeExpressions": [
                "明天"
              ],
              "actions": [],
              "creates": [
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": false,
          "output": "❌ 時間格式不正確，請重新輸入正確的時間（例如：下午2點 或 14:00）",
          "intent": "add_course",
          "keywordMatch": false,
          "code": "INVALID_TIME",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "A1.3-B",
            "name": "過去時間輸入",
            "purpose": "驗證時間邏輯校驗",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「測試小明昨天下午2點上測試數學課」\n- **預期回覆**：「無法新增過去時間的課程，請確認時間後重新輸入」\n<!-- @expectedCode: INVALID_PAST_TIME -->\n<!-- @expectedSuccess: false -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試小明昨天下午2點上測試數學課",
            "expectedOutput": "無法新增過去時間的課程，請確認時間後重新輸入",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "確認",
              "無法",
              "課程"
            ],
            "expectedSuccess": false,
            "steps": [],
            "expectedCode": "INVALID_PAST_TIME",
            "entities": {
              "students": [],
              "courses": [
                "數學課"
              ],
              "timeExpressions": [
                "昨天",
                "下午2點"
              ],
              "actions": [],
              "creates": [
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": true,
          "output": "❌ 無法建立過去時間的課程，請確認日期時間後重新輸入",
          "intent": "add_course",
          "keywordMatch": true,
          "code": "INVALID_PAST_TIME",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "A1.3-C",
            "name": "模糊語句處理",
            "purpose": "驗證意圖識別邊界",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「我想要什麼時候上課來著」\n- **預期回覆**：「抱歉，我沒有理解您的意思。請提供具體的課程資訊，例如：「小明明天下午2點上數學課」」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n### A2. 新增重複課程（10個用例）\n\n#### A2.1 標準重複模式\n\n",
            "annotations": {},
            "input": "我想要什麼時候上課來著",
            "expectedOutput": "抱歉，我沒有理解您的意思。請提供具體的課程資訊，例如：「小明明天下午2點上數學課",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "請提供",
              "課程",
              "小明"
            ],
            "expectedSuccess": false,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [],
              "timeExpressions": [],
              "actions": [],
              "creates": [],
              "requires": [],
              "confidence": 0.1
            },
            "validation": {
              "isValid": false,
              "issues": [
                "未識別到任何實體依賴關係",
                "實體提取信心度過低: 0.1"
              ],
              "confidence": 0.1
            }
          },
          "success": true,
          "output": "❓ 請提供以下資訊：學生姓名、上課時間、課程日期\n\n範例：「小明每週三下午3點數學課」",
          "intent": "add_course",
          "keywordMatch": true,
          "code": "MISSING_FIELDS",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "A2.1-A",
            "name": "每週重複課程",
            "purpose": "驗證週循環功能",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「測試Lumi每週三下午3點要上測試鋼琴課」\n- **預期回覆**：「✅ 課程已安排成功！👦 學生：測試Lumi 📚 課程：測試鋼琴課 🔄 重複：每週三 下午3:00 📅 下次上課：YYYY-MM-DD」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試Lumi每週三下午3點要上測試鋼琴課",
            "expectedOutput": "✅ 課程已安排成功！👦 學生：測試Lumi 📚 課程：測試鋼琴課 🔄 重複：每週三 下午3:00 📅 下次上課：YYYY-MM-DD",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "成功",
              "✅",
              "已安排",
              "課程",
              "Lumi"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [
                "Lumi"
              ],
              "courses": [
                "鋼琴課"
              ],
              "timeExpressions": [
                "每週三",
                "下午3點"
              ],
              "actions": [
                "creates"
              ],
              "creates": [
                "test_student_lumi",
                "test_course___"
              ],
              "requires": [],
              "confidence": 1
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 1
            }
          },
          "success": true,
          "output": "✅ 課程已安排成功！\n\n👦 學生：測試Lumi\n📚 課程：測試鋼琴課\n🔄 重複：每週三 下午3:00\n📅 下次上課：2025-08-13",
          "intent": "add_course",
          "keywordMatch": true,
          "code": "ADD_COURSE_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "A2.1-B",
            "name": "多天重複課程",
            "purpose": "驗證複雜重複規則",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「測試小光每週一三五上午10點測試英文課」\n- **預期回覆**：「✅ 課程已安排成功！👦 學生：測試小光 📚 課程：測試英文課 🔄 重複：每週一、三、五 上午10:00」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試小光每週一三五上午10點測試英文課",
            "expectedOutput": "✅ 課程已安排成功！👦 學生：測試小光 📚 課程：測試英文課 🔄 重複：每週一、三、五 上午10:00",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "成功",
              "✅",
              "已安排",
              "課程",
              "小光"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "英文課"
              ],
              "timeExpressions": [
                "每週一",
                "上午10點"
              ],
              "actions": [
                "creates"
              ],
              "creates": [
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.8
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.8
            }
          },
          "success": true,
          "output": "✅ 課程已安排成功！\n\n👦 學生：測試小光\n📚 課程：測試英文課\n🔄 重複：每週一 上午10:00\n📅 下次上課：2025-08-11",
          "intent": "add_course",
          "keywordMatch": true,
          "code": "ADD_COURSE_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "A2.1-C",
            "name": "每天重複課程",
            "purpose": "驗證每日循環功能",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「測試小明每天早上8點測試晨練課」\n- **預期回覆**：「✅ 課程已安排成功！👦 學生：測試小明 📚 課程：測試晨練課 🔄 重複：每天 早上8:00 📅 下次上課：YYYY-MM-DD（明天）」\n- **功能狀態**：✅ 已實現（v1.3.4）\n- **環境變數**：需要 ENABLE_DAILY_RECURRING=true\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試小明每天早上8點測試晨練課",
            "expectedOutput": "✅ 課程已安排成功！👦 學生：測試小明 📚 課程：測試晨練課 🔄 重複：每天 早上8:00 📅 下次上課：YYYY-MM-DD（明天）",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "成功",
              "✅",
              "已安排",
              "課程",
              "小明"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "晨練課"
              ],
              "timeExpressions": [
                "每天"
              ],
              "actions": [
                "creates"
              ],
              "creates": [
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.8
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.8
            }
          },
          "success": true,
          "output": "✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：測試晨練課\n🔄 重複：每天 上午8:00\n📅 下次上課：2025-08-09",
          "intent": "add_course",
          "keywordMatch": true,
          "code": "ADD_COURSE_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "A2.1-D",
            "name": "每日重複變體測試",
            "purpose": "驗證每日關鍵詞識別",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「安排測試Lumi每日下午5點測試瑜伽課」\n- **預期回覆**：「✅ 課程已安排成功！👦 學生：測試Lumi 📚 課程：測試瑜伽課 🔄 重複：每天 下午17:00」\n- **功能狀態**：✅ 已實現（v1.3.4）\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "安排測試Lumi每日下午5點測試瑜伽課",
            "expectedOutput": "✅ 課程已安排成功！👦 學生：測試Lumi 📚 課程：測試瑜伽課 🔄 重複：每天 下午17:00",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "成功",
              "✅",
              "已安排",
              "課程",
              "Lumi"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [
                "Lumi"
              ],
              "courses": [
                "瑜伽課"
              ],
              "timeExpressions": [
                "每日",
                "下午5點"
              ],
              "actions": [
                "creates",
                "queries"
              ],
              "creates": [
                "test_student_lumi",
                "test_course___"
              ],
              "requires": [],
              "confidence": 1
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 1
            }
          },
          "success": true,
          "output": "✅ 課程已安排成功！\n\n👦 學生：Lumi\n📚 課程：瑜伽課\n🔄 重複：每天 下午5:00\n📅 下次上課：2025-08-09",
          "intent": "add_course",
          "keywordMatch": true,
          "code": "ADD_COURSE_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "A2.1-E",
            "name": "每月重複課程 ",
            "purpose": "驗證每月循環功能",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「測試小光每月第一個週一上午10點測試評鑑」\n- **預期回覆**：「✅ 課程已安排成功！👦 學生：測試小光 📚 課程：測試評鑑 🔄 重複：每月第一個週一 上午10:00」\n- **⚠️ 已知問題**：每月重複邏輯未完全實現（基礎架構已就緒）\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n#### A2.2 重複規則邊界測試\n\n",
            "annotations": {},
            "input": "測試小光每月第一個週一上午10點測試評鑑",
            "expectedOutput": "✅ 課程已安排成功！👦 學生：測試小光 📚 課程：測試評鑑 🔄 重複：每月第一個週一 上午10:00",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "成功",
              "✅",
              "已安排",
              "課程",
              "小光"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "評鑑"
              ],
              "timeExpressions": [
                "每月",
                "上午10點"
              ],
              "actions": [
                "creates"
              ],
              "creates": [
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.8
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.8
            }
          },
          "success": false,
          "output": "❓ 請提供以下資訊：課程名稱\n\n範例：「小明每週三下午3點數學課」",
          "intent": "add_course",
          "keywordMatch": true,
          "code": "MISSING_FIELDS",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "A2.2-A",
            "name": "重複關鍵詞識別",
            "purpose": "驗證意圖分類準確性",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「安排測試小明定期游泳課每週二晚上7點」\n- **預期回覆**：「✅ 課程已安排成功！（重複課程格式）」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "安排測試小明定期游泳課每週二晚上7點",
            "expectedOutput": "✅ 課程已安排成功！（重複課程格式）",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "成功",
              "✅",
              "已安排",
              "課程"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "游泳課"
              ],
              "timeExpressions": [
                "每週二",
                "晚上7點"
              ],
              "actions": [
                "creates",
                "queries"
              ],
              "creates": [
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.8
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.8
            }
          },
          "success": true,
          "output": "✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：游泳課\n🔄 重複：每週二 下午7:00\n📅 下次上課：2025-08-12",
          "intent": "create_recurring_course",
          "keywordMatch": true,
          "code": "ADD_COURSE_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "A2.2-B",
            "name": "模糊重複表達",
            "purpose": "驗證自然語言理解",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「測試Lumi固定每個星期四下午兩點鋼琴課」\n- **預期回覆**：「✅ 課程已安排成功！👦 學生：測試Lumi 📚 課程：鋼琴課 🔄 重複：每週四 下午14:00」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試Lumi固定每個星期四下午兩點鋼琴課",
            "expectedOutput": "✅ 課程已安排成功！👦 學生：測試Lumi 📚 課程：鋼琴課 🔄 重複：每週四 下午14:00",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "成功",
              "✅",
              "已安排",
              "課程",
              "Lumi"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "鋼琴課"
              ],
              "timeExpressions": [],
              "actions": [],
              "creates": [
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": false,
          "output": "❓ 請提供以下資訊：學生姓名\n\n範例：「小明每週三下午3點數學課」",
          "intent": "add_course",
          "keywordMatch": true,
          "code": "MISSING_FIELDS",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "A2.2-C",
            "name": "重複類型區分測試",
            "purpose": "驗證 recurrenceType 識別準確性",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試序列**：\n1. 輸入：「測試小明每天早上8點英文課」→ 預期 daily\n2. 輸入：「測試小明每週一早上8點英文課」→ 預期 weekly\n3. 輸入：「測試小明每月1號早上8點英文課」→ 預期 monthly\n- **預期回覆**：每個都應正確識別重複類型並生成對應的 Google Calendar 規則\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試小明每月1號早上8點英文課",
            "expectedOutput": "",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程"
            ],
            "expectedSuccess": null,
            "steps": [
              {
                "input": "測試小明每天早上8點英文課"
              },
              {
                "input": "測試小明每週一早上8點英文課"
              },
              {
                "input": "測試小明每月1號早上8點英文課"
              }
            ],
            "entities": {
              "students": [],
              "courses": [
                "英文課"
              ],
              "timeExpressions": [
                "每週一",
                "每天",
                "每月"
              ],
              "actions": [
                "creates",
                "confirms"
              ],
              "creates": [
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": true,
          "output": "✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：英文課\n🔄 重複：每月 上午8:00\n📅 下次上課：2025-09-08",
          "intent": "add_course",
          "keywordMatch": true,
          "code": "ADD_COURSE_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "A2.2-D",
            "name": "功能開關測試",
            "purpose": "驗證每日重複功能開關",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試序列**：\n1. 輸入：「測試小明每天早上8點英文課」\n- **預期結果**：\n1. 功能關閉時：優雅降級到非重複模式\n2. 功能開啟時：正確處理每日重複\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試小明每天早上8點英文課",
            "expectedOutput": "",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程",
              "重複"
            ],
            "expectedSuccess": null,
            "steps": [
              {
                "input": "測試小明每天早上8點英文課"
              }
            ],
            "entities": {
              "students": [],
              "courses": [
                "英文課"
              ],
              "timeExpressions": [
                "每天",
                "每日"
              ],
              "actions": [
                "creates"
              ],
              "creates": [
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": true,
          "output": "✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：英文課\n🔄 重複：每天 上午8:00\n📅 下次上課：2025-08-09",
          "intent": "add_course",
          "keywordMatch": true,
          "code": "ADD_COURSE_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "A2.2-E",
            "name": "重複課程時間衝突處理",
            "purpose": "驗證重複課程的衝突檢測",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試序列**：\n1. 輸入：「測試小明每天下午2點測試數學課」\n2. 輸入：「測試小明每天下午2點測試英文課」\n- **預期回覆**：「⚠️ 時間衝突：測試小明 每天 下午14:00 已有測試數學課，是否要覆蓋？」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n### A3. 系統基礎功能（4個用例）\n\n#### A3.1 意圖識別準確性\n\n",
            "annotations": {},
            "input": "測試小明每天下午2點測試英文課",
            "expectedOutput": "⚠️ 時間衝突：測試小明 每天 下午14:00 已有測試數學課，是否要覆蓋？",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "時間衝突",
              "課程",
              "小明"
            ],
            "expectedSuccess": null,
            "steps": [
              {
                "input": "測試小明每天下午2點測試數學課"
              },
              {
                "input": "測試小明每天下午2點測試英文課"
              }
            ],
            "entities": {
              "students": [],
              "courses": [
                "數學課",
                "英文課"
              ],
              "timeExpressions": [
                "每天",
                "下午2點",
                "下午14:00"
              ],
              "actions": [
                "creates"
              ],
              "creates": [
                "test_course___",
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": false,
          "output": "✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：測試英文課\n🔄 重複：每天 下午2:00\n📅 下次上課：2025-08-09",
          "intent": "add_course",
          "keywordMatch": false,
          "code": "ADD_COURSE_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "A3.1-A",
            "name": "意圖邊界測試",
            "purpose": "驗證意圖分類不混淆",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「我想了解一下課程安排的情況」\n- **預期回覆**：「請問您想查詢課程表，還是要新增課程呢？」或顯示查詢導引（UNKNOWN_HELP）\n<!-- @expectedSuccess: true -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "我想了解一下課程安排的情況",
            "expectedOutput": "請問您想查詢課程表，還是要新增課程呢？",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [],
              "timeExpressions": [],
              "actions": [
                "creates",
                "queries"
              ],
              "creates": [],
              "requires": [],
              "confidence": 0.2
            },
            "validation": {
              "isValid": false,
              "issues": [
                "未識別到任何實體依賴關係",
                "實體提取信心度過低: 0.2"
              ],
              "confidence": 0.2
            }
          },
          "success": true,
          "output": "📅 我本週沒有安排課程\n\n💡 您可以：\n• 新增課程：「小明明天上午10點英文課」\n• 查詢其他時間：「小明下週的課表」\n• 記錄課程內容：「記錄昨天數學課的內容」",
          "intent": "query_schedule",
          "keywordMatch": true,
          "code": "QUERY_OK_EMPTY",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "A3.1-B",
            "name": "複合意圖處理",
            "purpose": "驗證複雜語句解析",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「幫我安排測試小明數學課，然後查詢一下他今天有什麼課」\n- **預期回覆**：「我一次只能處理一個請求，請先告訴我數學課的具體時間」或優先回應其中一項請求（以目前規則多數會優先 query）\n<!-- @expectedSuccess: true -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n#### A3.2 錯誤恢復機制\n\n",
            "annotations": {},
            "input": "幫我安排測試小明數學課，然後查詢一下他今天有什麼課",
            "expectedOutput": "我一次只能處理一個請求，請先告訴我數學課的具體時間",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "數學課"
              ],
              "timeExpressions": [
                "今天"
              ],
              "actions": [
                "creates",
                "queries"
              ],
              "creates": [
                "test_course___"
              ],
              "requires": [],
              "confidence": 0.8
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.8
            }
          },
          "success": true,
          "output": "📅 小明今天沒有安排課程\n\n💡 您可以：\n• 新增課程：「小明明天上午10點英文課」\n• 查詢其他時間：「小明下週的課表」\n• 記錄課程內容：「記錄昨天數學課的內容」",
          "intent": "query_schedule",
          "keywordMatch": true,
          "code": "QUERY_OK_EMPTY",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "A3.2-A",
            "name": "系統錯誤恢復",
            "purpose": "驗證服務故障處理",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試輸入**：「（觸發系統錯誤的占位輸入）」\n- **預期回覆**：「❌ 資料儲存失敗，請稍後再試。」\n<!-- @expectedSuccess: false -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "（觸發系統錯誤的占位輸入）",
            "expectedOutput": "❌ 資料儲存失敗，請稍後再試。",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "失敗"
            ],
            "expectedSuccess": false,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [],
              "timeExpressions": [],
              "actions": [],
              "creates": [],
              "requires": [],
              "confidence": 0.1
            },
            "validation": {
              "isValid": false,
              "issues": [
                "未識別到任何實體依賴關係",
                "實體提取信心度過低: 0.1"
              ],
              "confidence": 0.1
            }
          },
          "success": false,
          "output": "😊 不太理解您的意思，試試這些功能：\n\n• 新增課程：「小明明天上午10點英文課」\n• 查詢課程：「查詢小明的課表」  \n• 記錄內容：「記錄昨天數學課的內容」\n• 設定提醒：「設定提醒」\n\n💡 您也可以直接告訴我想要做什麼，我會盡力幫助您！",
          "intent": "unknown",
          "keywordMatch": true,
          "code": "UNKNOWN_HELP",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "A3.2-B",
            "name": "輸入修正流程",
            "purpose": "驗證錯誤輸入處理",
            "group": "A",
            "phase": "group_a",
            "content": "- **測試序列**：\n1. 輸入：「測試小明明天25點上課」\n2. 預期：系統提示時間格式錯誤\n3. 輸入：「下午2點」\n- **預期最終回覆**：第一步回覆 INVALID_TIME 指引，後續接受正確時間後進入補充流程（非成功完成）\n<!-- @expectedCode: INVALID_TIME -->\n<!-- @expectedSuccess: false -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n---\n\n## Group B: 依賴功能測試（14個用例）\n\n> **前置條件**：依賴Group A建立的測試課程資料\n\n### B1. 查詢課程功能（5個用例）\n\n#### B1.1 時間範圍查詢\n\n",
            "annotations": {},
            "input": "下午2點",
            "expectedOutput": "",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "錯誤",
              "重新"
            ],
            "expectedSuccess": false,
            "steps": [
              {
                "input": "測試小明明天25點上課"
              },
              {
                "input": "下午2點"
              }
            ],
            "expectedCode": "INVALID_TIME",
            "entities": {
              "students": [],
              "courses": [],
              "timeExpressions": [
                "明天",
                "下午2點"
              ],
              "actions": [
                "creates",
                "queries"
              ],
              "creates": [],
              "requires": [],
              "confidence": 0.1
            },
            "validation": {
              "isValid": false,
              "issues": [
                "未識別到任何實體依賴關係",
                "實體提取信心度過低: 0.1"
              ],
              "confidence": 0.1
            }
          },
          "success": false,
          "output": "❓ 請提供以下資訊：課程名稱\n\n範例：「小明每週三下午3點數學課」",
          "intent": "supplement_schedule_time",
          "keywordMatch": true,
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "B1.1-A",
            "name": "今日課程查詢",
            "purpose": "驗證當日課程顯示",
            "group": "B",
            "phase": "group_b",
            "content": "- **前置條件**：Group A 已建立今日課程\n- **測試輸入**：「測試小明今天有什麼課？」\n- **預期回覆**：「測試小明 今天（X/X）的課程如下：📍 下午02:00 測試數學課」\n<!-- @expectedCode: QUERY_OK_EMPTY -->\n<!-- @expectedSuccess: true -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試小明今天有什麼課？",
            "expectedOutput": "測試小明 今天（X/X）的課程如下：📍 下午02:00 測試數學課",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程",
              "小明"
            ],
            "expectedSuccess": true,
            "steps": [],
            "expectedCode": "QUERY_OK_EMPTY",
            "entities": {
              "students": [],
              "courses": [],
              "timeExpressions": [
                "今天"
              ],
              "actions": [
                "queries"
              ],
              "creates": [],
              "requires": [
                "basic_courses"
              ],
              "confidence": 0.6
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.6
            }
          },
          "success": true,
          "output": "📅 測試小明今天沒有安排課程\n\n💡 您可以：\n• 新增課程：「小明明天上午10點英文課」\n• 查詢其他時間：「小明下週的課表」\n• 記錄課程內容：「記錄昨天數學課的內容」",
          "intent": "query_schedule",
          "keywordMatch": true,
          "code": "QUERY_OK_EMPTY",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "B1.1-B",
            "name": "明天課程查詢",
            "purpose": "驗證次日課程顯示",
            "group": "B",
            "phase": "group_b",
            "content": "- **前置條件**：Group A 已建立明日課程\n- **測試輸入**：「查詢測試Lumi明天的課表」\n- **預期回覆**：「測試Lumi 明天（X/X）的課程如下：📍 下午15:30 測試鋼琴課」\n<!-- @expectedCode: QUERY_OK_EMPTY -->\n<!-- @expectedSuccess: true -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "查詢測試Lumi明天的課表",
            "expectedOutput": "測試Lumi 明天（X/X）的課程如下：📍 下午15:30 測試鋼琴課",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程",
              "Lumi"
            ],
            "expectedSuccess": true,
            "steps": [],
            "expectedCode": "QUERY_OK_EMPTY",
            "entities": {
              "students": [
                "Lumi"
              ],
              "courses": [],
              "timeExpressions": [
                "明天"
              ],
              "actions": [
                "queries"
              ],
              "creates": [],
              "requires": [
                "test_student_lumi",
                "basic_courses"
              ],
              "confidence": 0.8
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.8
            }
          },
          "success": true,
          "output": "📅 測試Lumi明天沒有安排課程\n\n💡 您可以：\n• 新增課程：「小明明天上午10點英文課」\n• 查詢其他時間：「小明下週的課表」\n• 記錄課程內容：「記錄昨天數學課的內容」",
          "intent": "query_schedule",
          "keywordMatch": true,
          "code": "QUERY_OK_EMPTY",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "B1.1-C",
            "name": "本週課程查詢",
            "purpose": "驗證週期性課程顯示",
            "group": "B",
            "phase": "group_b",
            "content": "- **前置條件**：Group A 已建立重複課程\n- **測試輸入**：「看一下測試小光這週的安排」\n- **預期回覆**：顯示本週重複課程安排\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n#### B1.2 空結果與異常處理\n\n",
            "annotations": {},
            "input": "看一下測試小光這週的安排",
            "expectedOutput": "",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程"
            ],
            "expectedSuccess": null,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [],
              "timeExpressions": [],
              "actions": [
                "creates",
                "queries"
              ],
              "creates": [],
              "requires": [
                "basic_courses"
              ],
              "confidence": 0.6
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.6
            }
          },
          "success": true,
          "output": "📅 測試小光本週的課程安排\n\n📆 8/9 (週六)\n  上午10:30 - 十分測試英文課",
          "intent": "query_schedule",
          "keywordMatch": true,
          "code": "QUERY_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "B1.2-A",
            "name": "無課程日查詢",
            "purpose": "驗證空結果處理",
            "group": "B",
            "phase": "group_b",
            "content": "- **測試輸入**：「測試小王今天有什麼課？」\n- **預期回覆**：「📅 測試小王今天沒有安排課程」\n<!-- @expectedCode: QUERY_OK_EMPTY -->\n<!-- @expectedSuccess: true -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n#### B1.3 複雜查詢場景\n\n",
            "annotations": {},
            "input": "測試小王今天有什麼課？",
            "expectedOutput": "📅 測試小王今天沒有安排課程",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程"
            ],
            "expectedSuccess": true,
            "steps": [],
            "expectedCode": "QUERY_OK_EMPTY",
            "entities": {
              "students": [],
              "courses": [],
              "timeExpressions": [
                "今天"
              ],
              "actions": [
                "queries"
              ],
              "creates": [],
              "requires": [
                "basic_courses"
              ],
              "confidence": 0.6
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.6
            }
          },
          "success": true,
          "output": "📅 測試小王今天沒有安排課程\n\n💡 您可以：\n• 新增課程：「小明明天上午10點英文課」\n• 查詢其他時間：「小明下週的課表」\n• 記錄課程內容：「記錄昨天數學課的內容」",
          "intent": "query_schedule",
          "keywordMatch": true,
          "code": "QUERY_OK_EMPTY",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "B1.3-A",
            "name": "特定課程查詢",
            "purpose": "驗證課程篩選功能",
            "group": "B",
            "phase": "group_b",
            "content": "- **前置條件**：Group A 已建立多門課程\n- **測試輸入**：「測試小明的測試數學課什麼時候上？」\n- **預期回覆**：顯示測試數學課的具體時間安排\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試小明的測試數學課什麼時候上？",
            "expectedOutput": "",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程"
            ],
            "expectedSuccess": null,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "數學課"
              ],
              "timeExpressions": [],
              "actions": [],
              "creates": [],
              "requires": [
                "test_course___"
              ],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": true,
          "output": "📅 測試小明本週沒有安排課程\n\n💡 您可以：\n• 新增課程：「小明明天上午10點英文課」\n• 查詢其他時間：「小明下週的課表」\n• 記錄課程內容：「記錄昨天數學課的內容」",
          "intent": "query_schedule",
          "keywordMatch": true,
          "code": "QUERY_OK_EMPTY",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "B1.3-B",
            "name": "每日重複課程查詢",
            "purpose": "驗證每日重複課程顯示",
            "group": "B",
            "phase": "group_b",
            "content": "- **前置條件**：Group A 已建立每日重複課程\n- **測試輸入**：「測試小明的測試晨練課每天幾點？」\n- **預期回覆**：若已建立對應課程則顯示安排；否則返回空查詢或補充提示\n<!-- @expectedSuccess: true -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試小明的測試晨練課每天幾點？",
            "expectedOutput": "",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程",
              "課程",
              "重複"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "晨練課"
              ],
              "timeExpressions": [
                "每天"
              ],
              "actions": [
                "creates"
              ],
              "creates": [],
              "requires": [
                "test_course___"
              ],
              "confidence": 0.8
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.8
            }
          },
          "success": true,
          "output": "📅 測試小明本週沒有安排課程\n\n💡 您可以：\n• 新增課程：「小明明天上午10點英文課」\n• 查詢其他時間：「小明下週的課表」\n• 記錄課程內容：「記錄昨天數學課的內容」",
          "intent": "query_schedule",
          "keywordMatch": true,
          "code": "QUERY_OK_EMPTY",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "B1.3-C",
            "name": "重複課程類型識別查詢",
            "purpose": "驗證重複課程類型顯示",
            "group": "B",
            "phase": "group_b",
            "content": "- **前置條件**：Group A 已建立不同類型重複課程\n- **測試輸入**：「查詢測試Lumi的重複課程」\n- **預期回覆**：若存在相應重複課程則列出；否則返回空查詢\n<!-- @expectedSuccess: true -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n### B2. 記錄內容功能（4個用例）\n\n#### B2.1 標準記錄場景\n\n",
            "annotations": {},
            "input": "查詢測試Lumi的重複課程",
            "expectedOutput": "",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程",
              "課程",
              "重複"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [
                "Lumi"
              ],
              "courses": [],
              "timeExpressions": [],
              "actions": [
                "queries"
              ],
              "creates": [],
              "requires": [
                "test_student_lumi",
                "basic_courses"
              ],
              "confidence": 0.8
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.8
            }
          },
          "success": true,
          "output": "📅 測試Lumi本週沒有安排課程\n\n💡 您可以：\n• 新增課程：「小明明天上午10點英文課」\n• 查詢其他時間：「小明下週的課表」\n• 記錄課程內容：「記錄昨天數學課的內容」",
          "intent": "query_schedule",
          "keywordMatch": true,
          "code": "QUERY_OK_EMPTY",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "B2.1-A",
            "name": "當日課程記錄",
            "purpose": "驗證內容記錄功能",
            "group": "B",
            "phase": "group_b",
            "content": "- **前置條件**：Group A 已建立今日課程\n- **測試輸入**：「今天測試小明的測試數學課學了分數加減法」\n- **預期回覆**：「好的，已記錄測試小明今天（X/X）測試數學課的內容：📝 分數加減法 ✅」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "今天測試小明的測試數學課學了分數加減法",
            "expectedOutput": "好的，已記錄測試小明今天（X/X）測試數學課的內容：📝 分數加減法 ✅",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "✅",
              "課程",
              "小明"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "數學課"
              ],
              "timeExpressions": [
                "今天"
              ],
              "actions": [],
              "creates": [],
              "requires": [
                "test_course___"
              ],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": true,
          "output": "✅ 課程內容已成功記錄！\n📚 課程：測試小明 - 測試數學課\n📅 日期：2025-08-08\n💬 內容：分數加減法",
          "intent": "record_content",
          "keywordMatch": true,
          "code": "RECORD_CONTENT_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "B2.1-B",
            "name": "昨日課程補記錄",
            "purpose": "驗證歷史記錄功能",
            "group": "B",
            "phase": "group_b",
            "content": "- **前置條件**：需要昨日的課程存在\n- **測試輸入**：「補記一下昨天測試Lumi測試鋼琴課的內容，練習了小星星」\n- **預期回覆**：「好的，已記錄測試Lumi昨天（X/X）測試鋼琴課的內容：📝 練習小星星 ✅」\n<!-- @expectedCode: MISSING_FIELDS -->\n<!-- @expectedSuccess: false -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n#### B2.2 記錄內容查詢\n\n",
            "annotations": {},
            "input": "補記一下昨天測試Lumi測試鋼琴課的內容，練習了小星星",
            "expectedOutput": "好的，已記錄測試Lumi昨天（X/X）測試鋼琴課的內容：📝 練習小星星 ✅",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "✅",
              "課程",
              "Lumi"
            ],
            "expectedSuccess": false,
            "steps": [],
            "expectedCode": "MISSING_FIELDS",
            "entities": {
              "students": [],
              "courses": [
                "鋼琴課"
              ],
              "timeExpressions": [
                "昨天"
              ],
              "actions": [],
              "creates": [],
              "requires": [
                "test_course___"
              ],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": true,
          "output": "❓ 請提供以下資訊：學生姓名",
          "intent": "add_homework",
          "keywordMatch": true,
          "code": "MISSING_FIELDS",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "B2.2-A",
            "name": "查詢課程記錄",
            "purpose": "驗證內容查詢功能",
            "group": "B",
            "phase": "group_b",
            "content": "- **前置條件**：B2.1 已記錄課程內容\n- **測試輸入**：「測試小明昨天測試數學課學了什麼？」\n- **預期回覆**：顯示已記錄的課程內容\n<!-- @expectedCode: NOT_FOUND -->\n<!-- @expectedSuccess: false -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n#### B2.3 記錄異常處理\n\n",
            "annotations": {},
            "input": "測試小明昨天測試數學課學了什麼？",
            "expectedOutput": "",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程"
            ],
            "expectedSuccess": false,
            "steps": [],
            "expectedCode": "NOT_FOUND",
            "entities": {
              "students": [],
              "courses": [
                "數學課"
              ],
              "timeExpressions": [
                "昨天"
              ],
              "actions": [],
              "creates": [],
              "requires": [
                "test_course___"
              ],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": true,
          "output": "❌ 找不到 測試小明 的 數學課 內容記錄",
          "intent": "query_course_content",
          "keywordMatch": true,
          "code": "NOT_FOUND",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "B2.3-A",
            "name": "不存在課程記錄",
            "purpose": "驗證數據校驗",
            "group": "B",
            "phase": "group_b",
            "content": "- **測試輸入**：「記錄測試小明今天測試化學課的內容」\n- **預期回覆**：「找不到測試小明今天的測試化學課記錄，請確認課程資訊或先新增課程」\n<!-- @expectedCode: NOT_FOUND -->\n<!-- @expectedSuccess: false -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n### B3. 設定提醒功能（5個用例）\n\n#### B3.1 基本提醒設定\n\n",
            "annotations": {},
            "input": "記錄測試小明今天測試化學課的內容",
            "expectedOutput": "找不到測試小明今天的測試化學課記錄，請確認課程資訊或先新增課程",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "確認",
              "課程",
              "小明"
            ],
            "expectedSuccess": false,
            "steps": [],
            "expectedCode": "NOT_FOUND",
            "entities": {
              "students": [],
              "courses": [],
              "timeExpressions": [
                "今天"
              ],
              "actions": [],
              "creates": [],
              "requires": [],
              "confidence": 0.1
            },
            "validation": {
              "isValid": false,
              "issues": [
                "未識別到任何實體依賴關係",
                "實體提取信心度過低: 0.1"
              ],
              "confidence": 0.1
            }
          },
          "success": true,
          "output": "❌ 找不到 測試小明 的 化學課（日期：2025-08-08）。請先建立對應課程後再記錄內容。",
          "intent": "record_content",
          "keywordMatch": true,
          "code": "NOT_FOUND",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "B3.1-A",
            "name": "標準課前提醒",
            "purpose": "驗證提醒設定功能",
            "group": "B",
            "phase": "group_b",
            "content": "- **前置條件**：Group A 已建立課程\n- **測試輸入**：「提醒我測試小明的測試數學課」\n- **預期回覆**：「好的，將在測試小明測試數學課開始前30分鐘提醒您 ✅」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "提醒我測試小明的測試數學課",
            "expectedOutput": "好的，將在測試小明測試數學課開始前30分鐘提醒您 ✅",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "✅",
              "課程",
              "小明"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "數學課"
              ],
              "timeExpressions": [],
              "actions": [],
              "creates": [],
              "requires": [
                "test_course___"
              ],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": true,
          "output": "✅ 提醒設定完成！\n📚 課程：測試小明 的 測試數學課\n📅 上課時間：8/9 下午02:00\n⏰ 提醒時間：8/9 下午01:30 (提前 30 分鐘)\n📝 提醒內容：測試",
          "intent": "set_reminder",
          "keywordMatch": true,
          "code": "REMINDER_SET_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "B3.1-B",
            "name": "自訂提醒時間",
            "purpose": "驗證提醒時間自訂",
            "group": "B",
            "phase": "group_b",
            "content": "- **前置條件**：Group A 已建立課程\n- **測試輸入**：「測試Lumi測試鋼琴課前1小時提醒我」\n- **預期回覆**：「好的，將在測試Lumi測試鋼琴課開始前60分鐘提醒您 ✅」\n<!-- @expectedCode: MISSING_STUDENT -->\n<!-- @expectedSuccess: false -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n#### B3.2 提醒異常處理\n\n",
            "annotations": {},
            "input": "測試Lumi測試鋼琴課前1小時提醒我",
            "expectedOutput": "好的，將在測試Lumi測試鋼琴課開始前60分鐘提醒您 ✅",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "✅",
              "課程",
              "Lumi"
            ],
            "expectedSuccess": false,
            "steps": [],
            "expectedCode": "MISSING_STUDENT",
            "entities": {
              "students": [],
              "courses": [
                "鋼琴課"
              ],
              "timeExpressions": [],
              "actions": [],
              "creates": [],
              "requires": [
                "test_course___"
              ],
              "confidence": 0.7
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.7
            }
          },
          "success": true,
          "output": "❌ 請提供學生姓名，例如：「提醒我小明的數學課」",
          "intent": "set_reminder",
          "keywordMatch": true,
          "code": "MISSING_STUDENT",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "B3.2-A",
            "name": "不存在課程提醒",
            "purpose": "驗證提醒設定校驗",
            "group": "B",
            "phase": "group_b",
            "content": "- **測試輸入**：「提醒我測試小明的測試物理課」\n- **預期回覆**：「找不到測試小明的測試物理課，請確認課程資訊或先新增課程」\n<!-- @expectedCode: NOT_FOUND -->\n<!-- @expectedSuccess: false -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n---\n\n## Group C: 複雜操作測試（8個用例）\n\n> **前置條件**：需要Group A + Group B的完整數據環境\n\n### C1. 修改課程功能（3個用例）\n\n#### C1.1 基本修改場景\n\n",
            "annotations": {},
            "input": "提醒我測試小明的測試物理課",
            "expectedOutput": "找不到測試小明的測試物理課，請確認課程資訊或先新增課程",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "確認",
              "課程",
              "小明"
            ],
            "expectedSuccess": false,
            "steps": [],
            "expectedCode": "NOT_FOUND",
            "entities": {
              "students": [],
              "courses": [],
              "timeExpressions": [],
              "actions": [],
              "creates": [],
              "requires": [],
              "confidence": 0.1
            },
            "validation": {
              "isValid": false,
              "issues": [
                "未識別到任何實體依賴關係",
                "實體提取信心度過低: 0.1"
              ],
              "confidence": 0.1
            }
          },
          "success": true,
          "output": "❌ 找不到 測試小明 的 測試物理課，請確認課程是否已安排",
          "intent": "set_reminder",
          "keywordMatch": true,
          "code": "NOT_FOUND",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "C1.1-A",
            "name": "修改課程時間",
            "purpose": "驗證時間修改功能",
            "group": "C",
            "phase": "group_c",
            "content": "- **前置條件**：Group A 已建立課程\n- **測試輸入**：「測試小明的測試數學課改到下午4點」\n- **預期回覆**：「✅ 已將測試小明的測試數學課時間修改為下午4:00」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試小明的測試數學課改到下午4點",
            "expectedOutput": "✅ 已將測試小明的測試數學課時間修改為下午4:00",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "✅",
              "課程",
              "小明"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "數學課"
              ],
              "timeExpressions": [
                "下午4點"
              ],
              "actions": [
                "modifies"
              ],
              "creates": [
                "modified_courses"
              ],
              "requires": [
                "test_course___"
              ],
              "confidence": 0.8
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.8
            }
          },
          "success": false,
          "output": "❓ 沒有可供修改的最近操作。",
          "intent": "modify_course",
          "keywordMatch": true,
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "C1.1-B",
            "name": "修改每日重複課程時間",
            "purpose": "驗證每日重複課程修改",
            "group": "C",
            "phase": "group_c",
            "content": "- **前置條件**：Group A 已建立每日重複課程\n- **測試輸入**：「測試小明每天的測試晨練課改到早上7點」\n- **預期回覆**：「請問是要修改所有每天的晨練課時間，還是只修改今天？🔘 修改所有重複課程 🔘 只修改今天」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "測試小明每天的測試晨練課改到早上7點",
            "expectedOutput": "請問是要修改所有每天的晨練課時間，還是只修改今天？🔘 修改所有重複課程 🔘 只修改今天",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程"
            ],
            "expectedSuccess": null,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "晨練課"
              ],
              "timeExpressions": [
                "每天"
              ],
              "actions": [
                "creates",
                "modifies"
              ],
              "creates": [
                "modified_courses"
              ],
              "requires": [
                "test_course___"
              ],
              "confidence": 0.8
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.8
            }
          },
          "success": false,
          "output": "✅ 課程已安排成功！\n\n👦 學生：小明\n📚 課程：測試晨練課\n🔄 重複：每天 上午7:00\n📅 下次上課：2025-08-09",
          "intent": "create_recurring_course",
          "keywordMatch": true,
          "code": "ADD_COURSE_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "C1.1-C",
            "name": "修改重複課程類型",
            "purpose": "驗證重複規則修改",
            "group": "C",
            "phase": "group_c",
            "content": "- **前置條件**：Group A 已建立每週重複課程\n- **測試輸入**：「測試Lumi的測試鋼琴課改成每天下午3點」\n- **預期回覆**：「✅ 已將測試Lumi的測試鋼琴課修改為：🔄 每天 下午15:00」\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n### C2. 取消課程功能（4個用例）\n\n#### C2.1 標準取消場景\n\n",
            "annotations": {},
            "input": "測試Lumi的測試鋼琴課改成每天下午3點",
            "expectedOutput": "✅ 已將測試Lumi的測試鋼琴課修改為：🔄 每天 下午15:00",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "✅",
              "課程",
              "Lumi"
            ],
            "expectedSuccess": true,
            "steps": [],
            "entities": {
              "students": [
                "Lumi"
              ],
              "courses": [
                "鋼琴課"
              ],
              "timeExpressions": [
                "每天",
                "下午3點"
              ],
              "actions": [
                "creates",
                "modifies"
              ],
              "creates": [
                "modified_courses"
              ],
              "requires": [
                "test_student_lumi",
                "test_course___"
              ],
              "confidence": 1
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 1
            }
          },
          "success": true,
          "output": "✅ 課程已安排成功！\n\n👦 學生：測試Lumi\n📚 課程：測試鋼琴課\n🔄 重複：每天 下午3:00\n📅 下次上課：2025-08-09",
          "intent": "create_recurring_course",
          "keywordMatch": true,
          "code": "ADD_COURSE_OK",
          "taskSuccess": true
        },
        {
          "testCase": {
            "id": "C2.1-A",
            "name": "取消單次課程",
            "purpose": "驗證單次課程刪除",
            "group": "C",
            "phase": "group_c",
            "content": "- **前置條件**：Group A 已建立單次課程\n- **測試輸入**：「取消測試小明明天的測試數學課」\n- **預期回覆**：若資料不存在則回 NOT_FOUND；存在則給出確認或直接刪除成功提示（依現行UX）\n<!-- @expectedSuccess: false -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "取消測試小明明天的測試數學課",
            "expectedOutput": "",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "❓",
              "請提供"
            ],
            "expectedSuccess": false,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [
                "數學課"
              ],
              "timeExpressions": [
                "明天"
              ],
              "actions": [
                "deletes"
              ],
              "creates": [
                "cancelled_courses"
              ],
              "requires": [
                "test_course___"
              ],
              "confidence": 0.8
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.8
            }
          },
          "success": true,
          "output": "❌ 找不到 測試小明 的 測試數學課，請確認課程是否存在",
          "intent": "cancel_course",
          "keywordMatch": true,
          "code": "NOT_FOUND",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "C2.1-B",
            "name": "取消每日重複課程",
            "purpose": "驗證每日重複課程取消選項",
            "group": "C",
            "phase": "group_c",
            "content": "- **前置條件**：Group A 已建立每日重複課程\n- **測試輸入**：「取消測試小明的測試晨練課」\n- **預期回覆**：「請問是要取消哪個範圍？🔘 只取消今天 🔘 取消明天起所有課程 🔘 刪除整個重複課程」\n<!-- @expectedCode: RECURRING_CANCEL_OPTIONS -->\n<!-- @expectedSuccess: false -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "取消測試小明的測試晨練課",
            "expectedOutput": "請問是要取消哪個範圍？🔘 只取消今天 🔘 取消明天起所有課程 🔘 刪除整個重複課程",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程"
            ],
            "expectedSuccess": false,
            "steps": [],
            "expectedCode": "RECURRING_CANCEL_OPTIONS",
            "entities": {
              "students": [],
              "courses": [
                "晨練課"
              ],
              "timeExpressions": [],
              "actions": [
                "deletes"
              ],
              "creates": [
                "cancelled_courses"
              ],
              "requires": [
                "test_course___"
              ],
              "confidence": 0.8
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.8
            }
          },
          "success": true,
          "output": "請問是要取消哪個範圍？\n\n🔘 只取消今天\n🔘 取消明天起所有課程\n🔘 刪除整個重複課程",
          "intent": "cancel_course",
          "keywordMatch": true,
          "code": "RECURRING_CANCEL_OPTIONS",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "C2.1-C",
            "name": "取消部分每日重複課程",
            "purpose": "驗證部分時間範圍取消",
            "group": "C",
            "phase": "group_c",
            "content": "- **前置條件**：Group A 已建立每日重複課程\n- **測試輸入**：「取消測試小明下週的測試晨練課」\n- **預期回覆**：「已取消測試小明下週（YYYY/MM/DD - YYYY/MM/DD）的測試晨練課，其他時間的課程保持不變 ✅」\n<!-- @expectedCode: RECURRING_CANCEL_OPTIONS -->\n<!-- @expectedSuccess: false -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n",
            "annotations": {},
            "input": "取消測試小明下週的測試晨練課",
            "expectedOutput": "已取消測試小明下週（YYYY/MM/DD - YYYY/MM/DD）的測試晨練課，其他時間的課程保持不變 ✅",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "✅",
              "已取消",
              "課程",
              "小明"
            ],
            "expectedSuccess": false,
            "steps": [],
            "expectedCode": "RECURRING_CANCEL_OPTIONS",
            "entities": {
              "students": [],
              "courses": [
                "晨練課"
              ],
              "timeExpressions": [],
              "actions": [
                "deletes"
              ],
              "creates": [
                "cancelled_courses"
              ],
              "requires": [
                "test_course___"
              ],
              "confidence": 0.8
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.8
            }
          },
          "success": true,
          "output": "請問是要取消哪個範圍？\n\n🔘 只取消今天\n🔘 取消明天起所有課程\n🔘 刪除整個重複課程",
          "intent": "cancel_course",
          "keywordMatch": true,
          "code": "RECURRING_CANCEL_OPTIONS",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "C2.1-D",
            "name": "重複課程類型區分取消",
            "purpose": "驗證不同重複類型的取消處理",
            "group": "C",
            "phase": "group_c",
            "content": "- **前置條件**：Group A 已建立不同重複類型課程\n- **測試序列**：\n1. 輸入：「取消測試小明每天的測試晨練課」\n2. 輸入：「取消測試Lumi每週三的測試鋼琴課」\n- **預期回覆**：每種重複類型都應提供適當的取消選項\n<!-- @expectedCode: RECURRING_CANCEL_OPTIONS -->\n<!-- @expectedSuccess: false -->\n- **實際回覆**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n### C3. 系統級測試（1個用例）\n\n#### C3.1 併發處理測試\n\n",
            "annotations": {},
            "input": "取消測試Lumi每週三的測試鋼琴課",
            "expectedOutput": "",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程",
              "重複"
            ],
            "expectedSuccess": false,
            "steps": [
              {
                "input": "取消測試小明每天的測試晨練課"
              },
              {
                "input": "取消測試Lumi每週三的測試鋼琴課"
              }
            ],
            "expectedCode": "RECURRING_CANCEL_OPTIONS",
            "entities": {
              "students": [
                "Lumi"
              ],
              "courses": [
                "晨練課",
                "鋼琴課"
              ],
              "timeExpressions": [
                "每週三",
                "每天"
              ],
              "actions": [
                "creates",
                "deletes"
              ],
              "creates": [
                "cancelled_courses"
              ],
              "requires": [
                "test_student_lumi",
                "test_course___",
                "test_course___"
              ],
              "confidence": 0.9
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.9
            }
          },
          "success": true,
          "output": "請問是要取消哪個範圍？\n\n🔘 只取消今天\n🔘 取消明天起所有課程\n🔘 刪除整個重複課程",
          "intent": "stop_recurring_course",
          "keywordMatch": true,
          "code": "RECURRING_CANCEL_OPTIONS",
          "taskSuccess": false
        },
        {
          "testCase": {
            "id": "C3.1-A",
            "name": "併發用戶操作",
            "purpose": "驗證併發處理能力",
            "group": "C",
            "phase": "group_c",
            "content": "- **測試方法**：同時發送3個不同測試用戶的課程查詢請求\n- **預期結果**：所有請求正確處理，無數據混淆\n- **實際結果**：（待填）\n- **測試結果**：（待填）\n- **問題分析**：（待填）\n\n---\n\n## 執行計畫與數據管理\n\n### 階段執行順序\n```\n準備階段 → Group A → Group B → Group C → 清理階段\n```\n\n### 數據準備腳本\n- **setup-test-environment.js** - 環境初始化\n- **cleanup-test-data.js** - 測試數據清理\n- **verify-prerequisites.js** - 前置條件檢查\n\n### 測試數據標準\n- 測試用戶ID：`U_test_user_qa`\n- 學生名稱前綴：`測試*`\n- 課程名稱前綴：`測試*`\n\n### 執行時程\n- **Group A**：預計1小時（23個用例）\n- **Group B**：預計0.75小時（14個用例，包含數據驗證）\n- **Group C**：預計0.4小時（8個用例）\n- **總計**：2.15小時\n\n### 品質指標\n- **Group A 通過率目標**：≥90%\n- **Group B 通過率目標**：≥85%\n- **Group C 通過率目標**：≥80%\n- **整體功能覆蓋率**：≥95%\n\n---\n\n## 已知問題與限制\n\n### 🚨 已知功能缺陷\n1. **\"每天\"重複課程** - calculateNextCourseDate() 未處理每日循環邏輯\n2. **圖片上傳功能** - LINE Bot API 404錯誤，功能完全失效\n\n### ⚠️ 測試限制\n1. **API限制** - 測試間隔2-3秒避免服務端過載\n2. **數據隔離** - 測試數據使用特定前綴，避免污染生產資料\n3. **環境依賴** - 需要Firebase、Google Calendar、Redis等服務正常運行\n\n**總計測試用例：45個** (實際統計修正)\n**重點更新**：\n- ✅ 每日重複課程功能已實現 (v1.3.4)\n- 🔧 功能開關測試 (ENABLE_DAILY_RECURRING)\n- 📊 重複課程類型區分測試 (daily/weekly/monthly)\n- 🔄 重複課程查詢、修改、取消完整測試\n\n**預計執行時間：2.2小時**\n**核心改進：階段式架構 + 數據管理 + 重複課程功能擴展**\n",
            "annotations": {},
            "input": "",
            "expectedOutput": "",
            "expectedFinalOutput": "",
            "expectedKeywords": [
              "課程"
            ],
            "expectedSuccess": null,
            "steps": [],
            "entities": {
              "students": [],
              "courses": [],
              "timeExpressions": [
                "每天",
                "每日"
              ],
              "actions": [
                "creates",
                "queries",
                "modifies",
                "deletes"
              ],
              "creates": [
                "modified_courses"
              ],
              "requires": [],
              "confidence": 0.5
            },
            "validation": {
              "isValid": true,
              "issues": [],
              "confidence": 0.5
            }
          },
          "success": true,
          "output": "😊 不太理解您的意思，試試這些功能：\n\n• 新增課程：「小明明天上午10點英文課」\n• 查詢課程：「查詢小明的課表」  \n• 記錄內容：「記錄昨天數學課的內容」\n• 設定提醒：「設定提醒」\n\n💡 您也可以直接告訴我想要做什麼，我會盡力幫助您！",
          "intent": "unknown",
          "keywordMatch": true,
          "code": "UNKNOWN_HELP",
          "taskSuccess": true
        }
      ]
    }
  }
}