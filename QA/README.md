# QA è‡ªå‹•åŒ–æ¸¬è©¦ç³»çµ±

åŸºæ–¼ç¬¬ä¸€æ€§åŸå‰‡è¨­è¨ˆçš„éšæ®µå¼è‡ªå‹•åŒ–æ¸¬è©¦ç³»çµ±ï¼Œç¢ºä¿ LINE èª²ç¨‹ç®¡ç†æ©Ÿå™¨äººçš„åŠŸèƒ½å®Œæ•´æ€§å’Œç©©å®šæ€§ã€‚

## ğŸ¯ æ ¸å¿ƒç‰¹è‰²

- **éšæ®µå¼æ¸¬è©¦æ¶æ§‹** - è§£æ±ºå‰ç½®æ•¸æ“šä¾è³´å•é¡Œ
- **è‡ªå‹•æ•¸æ“šç®¡ç†** - å®Œå…¨éš”é›¢çš„æ¸¬è©¦ç’°å¢ƒ
- **æ™ºèƒ½ä¾è³´è¿½è¹¤** - ç¢ºä¿æ¸¬è©¦åŸ·è¡Œé †åºæ­£ç¢º
- **å…¨é¢éŒ¯èª¤åˆ†æ** - è©³ç´°çš„å¤±æ•—åŸå› åˆ†é¡

## ğŸ“ æ–‡ä»¶çµæ§‹

```
QA/
â”œâ”€â”€ README.md                           # æœ¬æ–‡æª”
â”œâ”€â”€ QA-rules.md                         # QA åŸ·è¡Œè¦ç¯„
â”œâ”€â”€ comprehensive-test-plan-revised.md  # å®Œæ•´æ¸¬è©¦è¦åŠƒ
â”œâ”€â”€ test-data-management.md            # æ•¸æ“šç®¡ç†æ¶æ§‹èªªæ˜
â”œâ”€â”€ config/
â”‚   â””â”€â”€ test-dependencies.yaml         # ä¾è³´é—œä¿‚é…ç½®
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ test-data-manager.js           # æ¸¬è©¦æ•¸æ“šç®¡ç†å™¨
â”‚   â”œâ”€â”€ automated-test-runner.js       # è‡ªå‹•åŒ–åŸ·è¡Œå™¨
â”‚   â””â”€â”€ test-scripts-verification.js   # è…³æœ¬åŠŸèƒ½é©—è­‰
â””â”€â”€ reports/                           # æ¸¬è©¦å ±å‘Šç›®éŒ„
    â””â”€â”€ (è‡ªå‹•ç”Ÿæˆçš„å ±å‘Šæ–‡ä»¶)
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. ç’°å¢ƒæº–å‚™

ç¢ºä¿ä»¥ä¸‹ç’°å¢ƒè®Šæ•¸å·²è¨­å®šï¼š
```bash
LINE_CHANNEL_ACCESS_TOKEN=your_line_token
LINE_CHANNEL_SECRET=your_line_secret
OPENAI_API_KEY=your_openai_key
FIREBASE_PROJECT_ID=your_firebase_project
```

### 2. é©—è­‰è…³æœ¬åŠŸèƒ½

```bash
# é©—è­‰æ‰€æœ‰æ¸¬è©¦è…³æœ¬æ˜¯å¦æ­£å¸¸å·¥ä½œ
node QA/scripts/test-scripts-verification.js
```

### 3. åŸ·è¡Œå®Œæ•´æ¸¬è©¦å¥—ä»¶

```bash
# åŸ·è¡Œæ‰€æœ‰éšæ®µçš„æ¸¬è©¦
node QA/scripts/automated-test-runner.js run

# åªåŸ·è¡Œç‰¹å®šéšæ®µ
node QA/scripts/automated-test-runner.js phase A  # ç¨ç«‹åŠŸèƒ½æ¸¬è©¦
node QA/scripts/automated-test-runner.js phase B  # ä¾è³´åŠŸèƒ½æ¸¬è©¦
node QA/scripts/automated-test-runner.js phase C  # è¤‡é›œæ“ä½œæ¸¬è©¦
```

### 4. å–®ç¨ä½¿ç”¨æ•¸æ“šç®¡ç†å™¨

```bash
# æª¢æŸ¥æ¸¬è©¦ç’°å¢ƒ
node QA/scripts/test-data-manager.js check

# æ¸…ç†æ¸¬è©¦æ•¸æ“š
node QA/scripts/test-data-manager.js clean

# æº–å‚™ç‰¹å®šéšæ®µæ•¸æ“š
node QA/scripts/test-data-manager.js setup A

# æŸ¥çœ‹æ•¸æ“šæ‘˜è¦
node QA/scripts/test-data-manager.js summary
```

## ğŸ“Š éšæ®µå¼æ¸¬è©¦æ¶æ§‹

### Group A: ç¨ç«‹åŠŸèƒ½æ¸¬è©¦ï¼ˆ35å€‹ç”¨ä¾‹ï¼‰
**ç›®æ¨™**ï¼šæ¸¬è©¦ä¸éœ€è¦é ç½®è³‡æ–™çš„åŸºç¤åŠŸèƒ½
- æ–°å¢å–®æ¬¡èª²ç¨‹ï¼ˆ12å€‹ç”¨ä¾‹ï¼‰
- æ–°å¢é‡è¤‡èª²ç¨‹ï¼ˆ15å€‹ç”¨ä¾‹ï¼‰
- ç³»çµ±åŸºç¤åŠŸèƒ½ï¼ˆ8å€‹ç”¨ä¾‹ï¼‰

**ç‰¹é»**ï¼š
- ç„¡éœ€å‰ç½®è³‡æ–™
- ç‚ºå¾ŒçºŒéšæ®µå»ºç«‹åŸºç¤æ•¸æ“š
- é€šéç‡ç›®æ¨™ï¼šâ‰¥90%

### Group B: ä¾è³´åŠŸèƒ½æ¸¬è©¦ï¼ˆ40å€‹ç”¨ä¾‹ï¼‰
**ç›®æ¨™**ï¼šæ¸¬è©¦éœ€è¦ç¾æœ‰è³‡æ–™çš„åŠŸèƒ½
- æŸ¥è©¢èª²ç¨‹åŠŸèƒ½ï¼ˆ15å€‹ç”¨ä¾‹ï¼‰
- è¨˜éŒ„å…§å®¹åŠŸèƒ½ï¼ˆ15å€‹ç”¨ä¾‹ï¼‰
- è¨­å®šæé†’åŠŸèƒ½ï¼ˆ10å€‹ç”¨ä¾‹ï¼‰

**ç‰¹é»**ï¼š
- ä¾è³´ Group A å»ºç«‹çš„æ•¸æ“š
- é©—è­‰æ•¸æ“šè®€å–å’Œæ“ä½œåŠŸèƒ½
- é€šéç‡ç›®æ¨™ï¼šâ‰¥85%

### Group C: è¤‡é›œæ“ä½œæ¸¬è©¦ï¼ˆ20å€‹ç”¨ä¾‹ï¼‰
**ç›®æ¨™**ï¼šæ¸¬è©¦é«˜ç´šåŠŸèƒ½å’Œç³»çµ±é‚Šç•Œ
- ä¿®æ”¹èª²ç¨‹åŠŸèƒ½ï¼ˆ8å€‹ç”¨ä¾‹ï¼‰
- å–æ¶ˆèª²ç¨‹åŠŸèƒ½ï¼ˆ7å€‹ç”¨ä¾‹ï¼‰
- ç³»çµ±ç´šæ¸¬è©¦ï¼ˆ5å€‹ç”¨ä¾‹ï¼‰

**ç‰¹é»**ï¼š
- éœ€è¦å®Œæ•´æ•¸æ“šç’°å¢ƒ
- æ¸¬è©¦è¤‡é›œæ¥­å‹™é‚è¼¯
- é€šéç‡ç›®æ¨™ï¼šâ‰¥80%

## ğŸ› ï¸ æ ¸å¿ƒçµ„ä»¶èªªæ˜

### 1. æ¸¬è©¦æ•¸æ“šç®¡ç†å™¨ (`test-data-manager.js`)

**åŠŸèƒ½**ï¼š
- è‡ªå‹•ç’°å¢ƒæª¢æŸ¥å’Œæ¸…ç†
- éšæ®µæ€§æ•¸æ“šæº–å‚™
- ä¾è³´é—œä¿‚é©—è­‰
- æ¸¬è©¦éš”é›¢æ©Ÿåˆ¶

**æ ¸å¿ƒæ–¹æ³•**ï¼š
```javascript
// æª¢æŸ¥æ¸¬è©¦ç’°å¢ƒ
await testDataManager.checkTestEnvironment();

// æ¸…ç†æ‰€æœ‰æ¸¬è©¦æ•¸æ“š
await testDataManager.cleanupAllTestData();

// ç‚ºç‰¹å®šéšæ®µæº–å‚™æ•¸æ“š
await testDataManager.setupPhaseData('A');

// é©—è­‰æ¸¬è©¦å‰ç½®æ¢ä»¶
await testDataManager.verifyPrerequisites(testCase);
```

### 2. ä¾è³´é—œä¿‚é…ç½® (`test-dependencies.yaml`)

**çµæ§‹**ï¼š
- **phases** - æ¸¬è©¦éšæ®µå®šç¾©
- **test_groups** - æ¸¬è©¦çµ„é…ç½®
- **data_entities** - æ•¸æ“šå¯¦é«”ä¾è³´
- **execution_rules** - åŸ·è¡Œè¦å‰‡
- **known_issues** - å·²çŸ¥å•é¡Œæ¨™è¨˜

**é—œéµé…ç½®**ï¼š
```yaml
phases:
  group_a:
    dependencies: []
    provides: ["basic_students", "basic_courses"]
  group_b:
    dependencies: ["basic_students", "basic_courses"]
    provides: ["course_records", "reminders"]
```

### 3. è‡ªå‹•åŒ–åŸ·è¡Œå™¨ (`automated-test-runner.js`)

**åŠŸèƒ½**ï¼š
- é…ç½®å’Œç”¨ä¾‹è¼‰å…¥
- éšæ®µå¼åŸ·è¡Œæ§åˆ¶
- å¯¦æ™‚çµæœåˆ†æ
- è©³ç´°å ±å‘Šç”Ÿæˆ

**åŸ·è¡Œæµç¨‹**ï¼š
```
ç’°å¢ƒæª¢æŸ¥ â†’ æ•¸æ“šæ¸…ç† â†’ Group A â†’ Group B â†’ Group C â†’ å ±å‘Šç”Ÿæˆ
```

## ğŸ“‹ æ¸¬è©¦ç”¨ä¾‹è¨­è¨ˆæ¨™æº–

æ¯å€‹æ¸¬è©¦ç”¨ä¾‹åŒ…å«ï¼š
- **id** - å”¯ä¸€è­˜åˆ¥ç¢¼ï¼ˆå¦‚ A1.1-Aï¼‰
- **name** - æ¸¬è©¦åç¨±
- **purpose** - æ¸¬è©¦ç›®çš„
- **input** - æ¸¬è©¦è¼¸å…¥
- **expected** - é æœŸçµæœ
- **dependencies** - ä¾è³´æ¢ä»¶
- **timeout** - è¶…æ™‚è¨­å®š

## ğŸ” å·²çŸ¥å•é¡Œå’Œé™åˆ¶

### åŠŸèƒ½ç¼ºé™·
1. **æ¯æ—¥é‡è¤‡èª²ç¨‹æœªå¯¦ç¾** - `handle_add_course_task.js` çš„ `calculateNextCourseDate()` æœªè™•ç†æ¯æ—¥å¾ªç’°
2. **åœ–ç‰‡ä¸Šå‚³åŠŸèƒ½å¤±æ•ˆ** - LINE Bot API 404éŒ¯èª¤ï¼ˆå·²å¾æ¸¬è©¦ä¸­ç§»é™¤ï¼‰

### æŠ€è¡“é™åˆ¶
- æ¸¬è©¦é–“éœ€è¦ 2-3 ç§’é–“éš”é¿å… API éè¼‰
- Redis é€£æ¥å»¶é²å¯èƒ½å½±éŸ¿å›æ‡‰æ™‚é–“
- éœ€è¦å®Œæ•´çš„ Firebase ç’°å¢ƒæ”¯æŒ

## ğŸ“Š æˆåŠŸæ¨™æº–

- **Group A é€šéç‡**ï¼šâ‰¥90%
- **Group B é€šéç‡**ï¼šâ‰¥85%
- **Group C é€šéç‡**ï¼šâ‰¥80%
- **æ•´é«”é€šéç‡**ï¼šâ‰¥85%
- **å–®æ¸¬è©¦å›æ‡‰æ™‚é–“**ï¼šâ‰¤5ç§’

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

**1. ç’°å¢ƒæª¢æŸ¥å¤±æ•—**
```bash
# æª¢æŸ¥ç’°å¢ƒè®Šæ•¸
echo $LINE_CHANNEL_ACCESS_TOKEN
echo $FIREBASE_PROJECT_ID

# é©—è­‰æœå‹™é€£æ¥
curl http://localhost:3000/health
```

**2. æ¸¬è©¦æ•¸æ“šæ¸…ç†å¤±æ•—**
```bash
# æ‰‹å‹•æ¸…ç†
node QA/scripts/test-data-manager.js clean

# æª¢æŸ¥æ•¸æ“šæ‘˜è¦
node QA/scripts/test-data-manager.js summary
```

**3. ä¾è³´æª¢æŸ¥å¤±æ•—**
- ç¢ºä¿å‰ä¸€éšæ®µæ¸¬è©¦æˆåŠŸåŸ·è¡Œ
- æª¢æŸ¥ Firebase ä¸­æ˜¯å¦æœ‰å°æ‡‰çš„æ¸¬è©¦æ•¸æ“š
- æŸ¥çœ‹ `test-dependencies.yaml` é…ç½®æ˜¯å¦æ­£ç¢º

## ğŸ“ˆ çµæœåˆ†æ

### å ±å‘Šå…§å®¹
- éšæ®µåŸ·è¡Œæ‘˜è¦
- è©³ç´°æ¸¬è©¦çµæœ
- éŒ¯èª¤åˆ†é¡åˆ†æ
- æ€§èƒ½æŒ‡æ¨™çµ±è¨ˆ
- æˆåŠŸæ¨™æº–é”æˆæƒ…æ³

### å ±å‘Šä½ç½®
- æ§åˆ¶å°å³æ™‚è¼¸å‡º
- JSON è©³ç´°å ±å‘Šï¼š`QA/reports/test-report-{timestamp}.json`
- è…³æœ¬é©—è­‰å ±å‘Šï¼š`QA/reports/script-verification-{timestamp}.json`

## ğŸ¯ æœ€ä½³å¯¦è¸

1. **åŸ·è¡Œå‰æº–å‚™**
   - ç¢ºä¿æ¸¬è©¦ç’°å¢ƒä¹¾æ·¨
   - æª¢æŸ¥æ‰€æœ‰ä¾è³´æœå‹™ç‹€æ…‹
   - å‚™ä»½é‡è¦ç”Ÿç”¢æ•¸æ“š

2. **æ¸¬è©¦åŸ·è¡Œ**
   - ä½¿ç”¨åºåˆ—åŸ·è¡Œé¿å…æ•¸æ“šç«¶çˆ­
   - ç›£æ§è³‡æºä½¿ç”¨æƒ…æ³
   - åŠæ™‚è™•ç†å¤±æ•—æ¸¬è©¦

3. **çµæœåˆ†æ**
   - é‡é»é—œæ³¨å¤±æ•—ç‡è¶¨å‹¢
   - åˆ†æéŒ¯èª¤åˆ†ä½ˆæ¨¡å¼
   - å»ºç«‹å›æ­¸æ¸¬è©¦åŸºç·š

## ğŸ”„ æŒçºŒæ”¹é€²

- **æ¯é€±**ï¼šåŸ·è¡Œå®Œæ•´æ¸¬è©¦å¥—ä»¶ï¼Œæ›´æ–°æˆåŠŸåŸºç·š
- **æ¯æœˆ**ï¼šæª¢æŸ¥å·²çŸ¥å•é¡Œä¿®å¾©æƒ…æ³ï¼Œæ›´æ–°æ¸¬è©¦ç”¨ä¾‹
- **æ¯å­£**ï¼šè©•ä¼°æ¸¬è©¦è¦†è“‹ç‡ï¼Œå„ªåŒ–æ¸¬è©¦æ¶æ§‹

---

**æœ€å¾Œæ›´æ–°**ï¼š2025-08-07  
**ç¶­è­·è€…**ï¼šQA åœ˜éšŠ  
**å•é¡Œåé¥‹**ï¼šè«‹åœ¨é …ç›® Issues ä¸­æå‡º